[{"title":"ç†è§£ Flutter åº”ç”¨å’Œéƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸ","url":"/2019/07/28/understand-flutter-lifecycle/","content":"\n## å‰è¨€\n\nåœ¨ Flutter é‡Œé¢éƒ¨ä»¶ä»¥åŠåº”ç”¨æœ¬èº«éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬æ–‡åˆ†åˆ«è¯´æ˜å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸ\n\n## éƒ¨ä»¶\n\nåœ¨ Flutter é‡Œé¢æœ‰ä¸¤ç§éƒ¨ä»¶ StatefulWidget å’Œ StatelessWidgetï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸåˆ†åˆ«æ˜¯\n\n### StatelessWidget\n\næ— çŠ¶æ€éƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•ï¼Œé¦–å…ˆæ‰§è¡Œæ„é€ å‡½æ•°ç„¶åå°±æ‰§è¡Œ build æ–¹æ³•äº†\n\n```\nConstructor Function\n\nbuild()\n```\n\n### StatefulWidget\n\næœ‰çŠ¶æ€éƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¼šå¤æ‚ä¸€äº›ï¼Œå› ä¸ºæ˜¯å¤šäº†çŠ¶æ€å˜åŒ–ã€‚é¦–å…ˆæ˜¯æ„é€ å‡½æ•°ï¼Œç„¶åä¼šåˆå§‹åŒ– State åœ¨æ‰§è¡Œ build æ–¹æ³•ï¼Œå¦‚æœæ‰§è¡Œäº† setState æ–¹æ³•ï¼Œå°±è¦æ£€æŸ¥éƒ¨ä»¶æ˜¯å¦æ›´æ–°ï¼Œåœ¨æ‰§è¡Œ buildï¼Œæœ€åéƒ¨ä»¶é”€æ¯çš„æ—¶å€™æ‰§è¡Œ dispose æ–¹æ³•\n\n```\nConstructor Function\n\ninitState()\n\nbuild()\n\nsetState()\n\ndidUpdateWidget()\n\nbuild()\n\ndispose()\n```\n\n## åº”ç”¨\n\nFlutter åº”ç”¨æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¦è§‚å¯Ÿåˆ°è¿™äº›çŠ¶æ€çš„å˜åŒ–éœ€è¦è®©ä¸€ä¸ªæœ‰çŠ¶æ€éƒ¨ä»¶æ··å…¥ `WidgetsBindingObserver`ï¼Œç„¶ååœ¨ `initState` æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå½“ç„¶éƒ¨ä»¶é”€æ¯çš„æ—¶å€™éœ€è¦æŠŠåˆ›å»ºçš„è§‚å¯Ÿè€…å®ç°æ¸…é™¤\n\n- inactive åº”ç”¨å¤„äºéæ´»åŠ¨çŠ¶æ€ï¼Œå¹¶ä¸”æœªæ¥æ”¶ç”¨æˆ·è¾“å…¥\n\n- paused åº”ç”¨å½“å‰å¯¹ç”¨æˆ·ä¸å¯è§ï¼Œä¸å“åº”ç”¨æˆ·è¾“å…¥ï¼Œå¹¶åœ¨åå°è¿è¡Œ\n\n- resumed åº”ç”¨å¯è§å¹¶å“åº”ç”¨æˆ·è¾“å…¥\n\n- suspending åº”ç”¨é€€å‡ºäº†\n\nä»£ç \n\n```\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Flutter Lifecycle',\n      home: MyHomePage(),\n    );\n  }\n}\n\nclass MyHomePage extends StatefulWidget {\n  @override\n  _MyHomePageState createState() => _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage> with WidgetsBindingObserver {\n  @override\n  void initState() {\n    WidgetsBinding.instance.addObserver(this);\n    super.initState();\n  }\n\n  @override\n  void didChangeAppLifecycleState(AppLifecycleState state) {\n\tprint(state);\n  }\n\n  @override\n  void dispose() {\n    WidgetsBinding.instance.removeObserver(this);\n    super.dispose();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold();\n  }\n}\n```\n\nå¯ä»¥çœ‹åˆ°åœ¨ Flutter åº”ç”¨é‡Œé¢è¿™äº›ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯æŒºç®€å•æ˜“æ‡‚çš„\n","tags":["Flutter"],"categories":["Flutter"]},{"title":"å¯¹äº Workbox Strategieså‡ ç§ç­–ç•¥çš„è§£é‡Š","url":"/2019/07/27/about-workbox-strategies/","content":"\nè¦å°†è‡ªå·±çš„ç½‘ç«™æ”¯æŒ PWAï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ª serviceWorker åˆ°æµè§ˆå™¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ Google çš„ [Workbox](https://developers.google.com/web/tools/workbox/) å·¥å…·ï¼ŒWorkbox å¯ä»¥åœ¨æµè§ˆå™¨è¯·æ±‚èµ„æºçš„æ—¶å€™æä¾›äº†å‡ ç§ä¸åŒçš„ç­–ç•¥å¯¹è¯·æ±‚å“åº”ï¼Œæœ¬æ–‡å¯¹å‡ ç§ç­–ç•¥è¿›è¡Œè¯´æ˜ã€‚\n\n## StaleWhileRevalidate\n\nStaleWhileRevalidate æ¨¡å¼å…è®¸æ‚¨ä½¿ç”¨ç¼“å­˜çš„å“åº”å°½å¿«å“åº”è¯·æ±‚ï¼Œå¦‚æœæœªç¼“å­˜ï¼Œåˆ™è¿”å›åˆ°ç½‘ç»œè¯·æ±‚ï¼Œç„¶åï¼Œç”¨ç½‘ç»œè¯·æ±‚æ›´æ–°ç¼“å­˜ã€‚\n\n![StaleWhileRevalidate](https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/stale-while-revalidate.png)\n\n```js\nworkbox.routing.registerRoute(\n  /\\.(?:js|css)$/,\n  new workbox.strategies.StaleWhileRevalidate({\n    cacheName: 'static'\n  })\n)\n```\n\n## CacheFirst\n\nå¦‚æœç¼“å­˜ä¸­å­˜åœ¨å“åº”ï¼Œåˆ™å°†ä½¿ç”¨ç¼“å­˜çš„å“åº”æ¥å®Œæˆè¯·æ±‚ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸ä¼šä½¿ç”¨ç½‘ç»œã€‚ å¦‚æœæ²¡æœ‰ç¼“å­˜çš„å“åº”ï¼Œåˆ™å°†é€šè¿‡ç½‘ç»œè¯·æ±‚æ¥æ»¡è¶³è¯·æ±‚ï¼Œå¹¶ä¸”å°†ç¼“å­˜å“åº”ï¼Œä»¥ä¾¿ç›´æ¥ä»ç¼“å­˜æä¾›ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚\n\n![CacheFirst](https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/cache-first.png)\n\n```js\nworkbox.routing.registerRoute(\n  /\\.(?:js|css)$/,\n  new workbox.strategies.CacheFirst({\n    cacheName: 'static'\n  })\n)\n```\n\n## NetworkFirst\n\nå¯¹äºé¢‘ç¹æ›´æ–°çš„è¯·æ±‚ï¼Œç½‘ç»œä¼˜å…ˆç­–ç•¥æ˜¯ç†æƒ³çš„è§£å†³æ–¹æ¡ˆã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†å°è¯•ä»ç½‘ç»œè·å–æœ€æ–°å“åº”ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œå®ƒä¼šå°†å“åº”æ”¾å…¥ç¼“å­˜ä¸­ã€‚ å¦‚æœç½‘ç»œæ— æ³•è¿”å›å“åº”ï¼Œåˆ™å°†ä½¿ç”¨ç¼“å­˜çš„å“åº”ã€‚\n\n![NetworkFirst](https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/network-first.png)\n\n```js\nworkbox.routing.registerRoute(\n  /\\.(?:js|css)$/,\n  new workbox.strategies.NetworkFirst({\n    cacheName: 'static'\n  })\n)\n```\n\n## NetworkOnly\n\nä»…ä½¿ç”¨ç½‘ç»œå“åº”è¯·æ±‚ã€‚\n\n![NetworkOnly](https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/network-only.png)\n\n```js\nworkbox.routing.registerRoute(\n  /\\.(?:js|css)$/,\n  new workbox.strategies.NetworkOnly({\n    cacheName: 'static'\n  })\n)\n```\n\n## CacheOnly\n\nä»…ä½¿ç”¨ç¼“å­˜å“åº”è¯·æ±‚ã€‚ä¸å¸¸è§ï¼Œä½†å¦‚æœæ‚¨æœ‰è‡ªå·±çš„é¢„å…ˆç¼“å­˜æ­¥éª¤ï¼Œåˆ™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚\n\n![CacheOnly](https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/cache-only.png)\n\n```js\nworkbox.routing.registerRoute(\n  /\\.(?:js|css)$/,\n  new workbox.strategies.CacheOnly({\n    cacheName: 'static'\n  })\n)\n```\n\n## å‚è€ƒ\n\n[å®˜æ–¹æ–‡æ¡£](https://developers.google.com/web/tools/workbox/modules/workbox-strategies)\n","tags":["PWA, Workbox"],"categories":["Web"]},{"title":"ä½¿ç”¨ Travis CI éƒ¨ç½² Hugo åšå®¢åˆ° Github Pages","url":"/2019/07/26/hugo-travis-github-page/","content":"\nåŸæœ¬ä½¿ç”¨çš„æ˜¯ Netlify å»éƒ¨ç½²åšå®¢çš„ï¼ŒåŸŸåè§£æä¹Ÿæ˜¯é€šè¿‡ Netlify çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯å‘ç°åšå®¢åœ¨åˆ«äººçš„ç”µè„‘ä¸Šæ‰“ä¸å¼€...å‘ç°æ˜¯åŸŸåè§£æçš„é—®é¢˜ï¼Œæ‰€ä»¥å°±æŠŠåšå®¢æ”¾åˆ° Github Pages ä¸Šäº†ï¼Œä½†æ˜¯è¿™æ ·å°±å¤±å»äº† Netlify æä¾›çš„è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²çš„èƒ½åŠ›ï¼Œéœ€è¦è‡ªå·±å»é…ç½® Travis CI å®ç°è‡ªåŠ¨éƒ¨ç½²äº†ã€‚\n\n## é¢„å…ˆè¦æ±‚\n\n- æœ¬åœ°å®‰è£…äº† [Hugo](https://gohugo.io)\n- ä¸€ä¸ª [Github](https://github.com/) è´¦å·\n- ä½¿ç”¨ Github è´¦å·ç™»å½• [Travis](https://travis-ci.org)\n\n## åˆ›å»ºåšå®¢\n\nä½¿ç”¨ Hugo å‘½ä»¤è¡Œå·¥å…·æ–°å»ºè‡ªå·±çš„åšå®¢ï¼Œå°†ä»£ç æ¨é€åˆ°è‡ªå·±çš„ Github ä»“åº“\n\n```sh\nhugo new site my-blog\n...\ngit push\n```\n\n## æ–°å»ºä¸€ä¸ª Github Personal access token\n\nåœ¨ https://github.com/settings/tokens æ–°å»ºä¸€ä¸ª Personal access token ç”¨æ¥å‘å¸ƒåšå®¢åˆ° Github Pages æ—¶è¿›è¡ŒéªŒè¯ï¼Œå¤åˆ¶ç”Ÿæˆçš„ tokenï¼Œä¸è¦åˆ·æ–°æˆ–ç¦»å¼€å½“å‰é¡µé¢ï¼Œå¦åˆ™ token å°±çœ‹ä¸è§äº†ï¼Œåªèƒ½é‡æ–°ç”Ÿæˆ\n\n![token](/images/github-token.jpg)\n\nç™»å½•åˆ° [Travis CI](https://travis-ci.org) å¯¹é¡¹ç›®è¿›è¡Œå…³è” https://travis-ci.org/account/repositories\n\nå®Œæˆåè¿›å…¥è®¾ç½®ç•Œé¢ `https://travis-ci.org/your-gihub-user-name/your-gihub-repo/settings`\n\nåœ¨ Environment Variables å¡«å†™ GITHUB_TOKEN å˜é‡ï¼Œç‚¹å‡» Add æŒ‰é’®ï¼Œè¿™æ ·ä½ çš„ç¯å¢ƒå˜é‡å°±æ·»åŠ å®Œæˆäº†\n\n## é…ç½® .travis.yml\n\nå› ä¸º Hugo æ˜¯ç”¨ GO è¯­è¨€å†™çš„ï¼Œæ‰€ä»¥è¦é…ç½® GO ç¼–è¯‘ç¯å¢ƒï¼Œåœ¨ before_script é‡Œåˆ é™¤äº† public æ–‡ä»¶å¤¹ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰åŸŸåï¼Œå°†è‡ªå®šä¹‰åŸŸåè¾“å‡ºåˆ°æ„å»ºå‡ºæ¥çš„ CNAME æ–‡ä»¶é‡Œé¢å»ï¼Œè®°å¾—æ·»åŠ  DNS è§£æè®°å½•åˆ° Gihub å» [å‚è€ƒ](https://help.github.com/cn/articles/using-a-custom-domain-with-github-pages)\n\n```json\nlanguage: go\n\ndist: trusty\n\nsudo: false\n\nenv:\n  - HUGO_VERSION=0.56.0\n\ninstall: true\n\nbefore_script:\n  - wget https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.deb\n  - sudo dpkg -i hugo_${HUGO_VERSION}_Linux-64bit.deb\n  - rm -rf public || exit 0\n\nscript:\n  - hugo -v --gc --minify\n  - echo 'your-custom-domain.com' > public/CNAME\n\ndeploy:\n  provider: pages\n  local-dir: public\n  skip-cleanup: true\n  github-token: $GITHUB_TOKEN\n  keep-history: true\n  on:\n    branch: master\n\nbranches:\n  only:\n  - master\n\n```\n\n## æäº¤è§¦å‘æ„å»º\n\næœ€åæ–°å»ºä¸€ç¯‡æ–‡ç« ï¼Œpush åˆ° Github ä»“åº“ï¼Œè§¦å‘ Travis æ„å»ºå°±å¯ä»¥äº†ï¼Œä»¥ååšå®¢è¿›è¡Œæ›´æ–°åå°±å¯ä»¥è‡ªåŠ¨æ„å»ºå‘å¸ƒäº†ã€‚\n\n```sh\nhugo new posts/my-first-post.md\n```\n","tags":["Hugo"],"categories":["CI"]},{"title":"å¯¹äº manifest.json è®¾ç½®çš„è§£é‡Š","url":"/2019/07/25/about-manifest/","content":"\nç½‘ç«™è¦æ”¯æŒ PWAï¼Œéœ€è¦ä¸€ä¸ª `manifest.json` æ–‡ä»¶ï¼ŒW3C Web App Manifest çš„è‰æ¡ˆä¸Šå®šä¹‰äº†ä»¥ä¸‹çš„å­—æ®µï¼Œè§£é‡Šä¸€ä¸‹æ¯ä¸ªå­—æ®µæ˜¯ä»€ä¹ˆæ„æ€ã€‚\n\n```js\ndictionary WebAppManifest {\n   TextDirectionType dir = \"auto\";\n   DOMString lang;\n   USVString name;\n   USVString short_name;\n   USVString description;\n   sequence<ImageResource> icons;\n   sequence<ImageResource> screenshots;\n   sequence<USVString> categories;\n   DOMString iarc_rating_id;\n   USVString start_url;\n   DisplayModeType display = \"browser\";\n   OrientationLockType orientation;\n   USVString theme_color;\n   USVString background_color;\n   USVString scope;\n   ServiceWorkerRegistrationObject serviceworker;\n   sequence<ExternalApplicationResource> related_applications;\n   boolean prefer_related_applications = \"false\";\n};\n\ndictionary ImageResource {\n  required USVString src;\n  DOMString sizes;\n  USVString type;\n  USVString purpose;\n  USVString platform;\n};\n\ndictionary ServiceWorkerRegistrationObject {\n  required USVString src;\n  USVString scope;\n  WorkerType type = \"classic\";\n  ServiceWorkerUpdateViaCache update_via_cache = \"imports\";\n};\n\ndictionary ExternalApplicationResource {\n  required USVString platform;\n  USVString url;\n  DOMString id;\n  USVString min_version;\n  sequence<Fingerprint> fingerprints;\n};\n```\n\n**dir** æŒ‡å®šäº† manifest ä¸­å…·æœ‰æ–¹å‘æ€§çš„æˆå‘˜çš„åŸºæœ¬æ–¹å‘ï¼Œå¯ä»¥è®¾ç½® `ltr` å·¦è‡³å³, `rtl` å³è‡³å·¦, `auto` æ²¡æœ‰æ˜ç¡®æ–¹å‘ã€‚\n\n**lang** æŒ‡å®š manifest ä¸­å…·æœ‰æ–¹å‘æ€§æˆå‘˜çš„å€¼çš„ä¸»è¦è¯­è¨€ï¼ˆå› ä¸ºçŸ¥é“è¯­è¨€ä¹Ÿå¯ä»¥å¸®åŠ©æ–¹å‘æ€§ï¼‰ã€‚\n\n**name** è¡¨ç¤ºåº”ç”¨çš„åç§°ã€‚\n\n**short_name** è¡¨ç¤º Web åº”ç”¨ç¨‹åºåç§°çš„ç®€çŸ­ç‰ˆæœ¬ï¼Œç”¨äºæ²¡æœ‰è¶³å¤Ÿç©ºé—´æ¥æ˜¾ç¤º Web åº”ç”¨ç¨‹åºçš„å…¨åçš„åœ°æ–¹ã€‚\n\n**description** æè¿° Web åº”ç”¨ç¨‹åºçš„ç›®çš„ã€‚\n\n**scope** è¡¨ç¤º Web åº”ç”¨ç¨‹åºå¯¼èˆªèŒƒå›´ã€‚\n\n**icons** icons æ˜¯ ImageResources çš„æ•°ç»„ï¼Œå¯ä»¥åœ¨å„ç§æƒ…å†µä¸‹å……å½“ Web åº”ç”¨ç¨‹åºçš„å›¾æ ‡è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬å¯ç”¨äºåœ¨å…¶ä»–åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­è¡¨ç¤º Web åº”ç”¨ç¨‹åºï¼Œæˆ–è€…å°† Web åº”ç”¨ç¨‹åºä¸ OS çš„ä»»åŠ¡åˆ‡æ¢å™¨å’Œ/æˆ–ç³»ç»Ÿé¦–é€‰é¡¹é›†æˆã€‚\n\n```json\n{\n  \"icons\": [\n    {\n      \"src\": \"icon/lowres.webp\",\n      \"sizes\": \"48x48\",\n      \"type\": \"image/webp\"\n    },\n    {\n      \"src\": \"icon/lowres\",\n      \"sizes\": \"48x48\"\n    },\n    {\n      \"src\": \"icon/hd_hi.ico\",\n      \"sizes\": \"72x72 96x96 128x128 256x256\"\n    },\n    {\n      \"src\": \"icon/hd_hi.svg\",\n      \"sizes\": \"257x257\"\n    }\n  ]\n}\n```\n\n**display** å…¶å€¼æ˜¯ DisplayModeType å€¼ä¹‹ä¸€ï¼Œè¡¨ç¤ºå¼€å‘äººå‘˜å¯¹ Web åº”ç”¨ç¨‹åºçš„é¦–é€‰æ˜¾ç¤ºæ¨¡å¼ã€‚å¯ä»¥è®¾ç½®\n\n- \"fullscreen\" å ç”¨æ•´ä¸ªå¯ç”¨çš„æ˜¾ç¤ºåŒºåŸŸï¼›\n- \"standalone\" ä½¿å…¶å¤–è§‚å’Œæ„Ÿè§‰å°±åƒä¸€ä¸ªç‹¬ç«‹çš„æœ¬æœºåº”ç”¨ç¨‹åºï¼›\n- \"minimal-ui\" ç±»ä¼¼äº standalone æ¨¡å¼ï¼Œä½†ä¸ºæœ€ç»ˆç”¨æˆ·æä¾›äº†ä¸€äº›æ–¹æ³•æ¥è®¿é—®ç”¨äºæ§åˆ¶å¯¼èˆªçš„æœ€å° UI å…ƒç´ é›†ï¼ˆå³ï¼Œåé€€ï¼Œå‰è¿›ï¼Œé‡æ–°åŠ è½½ä»¥åŠå¯èƒ½ä»¥æŸç§æ–¹å¼æŸ¥çœ‹æ–‡æ¡£çš„åœ°å€ï¼‰ï¼›\n- \"browser\" ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„çº¦å®šæ‰“å¼€ Web åº”ç”¨ç¨‹åºï¼Œä»¥åœ¨ç”¨æˆ·ä»£ç†ä¸­æ‰“å¼€è¶…é“¾æ¥ï¼ˆä¾‹å¦‚ï¼Œåœ¨æµè§ˆå™¨é€‰é¡¹å¡æˆ–æ–°çª—å£ä¸­ï¼‰ï¼›\n\n**orientation** Web åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é¡¶çº§æµè§ˆä¸Šä¸‹æ–‡çš„é»˜è®¤æ–¹å‘ã€‚\n\n**start_url** è¡¨ç¤ºèµ·å§‹ URL çš„å­—ç¬¦ä¸²ï¼Œè¯¥ URL æ˜¯ç”¨æˆ·å¯åŠ¨ Web åº”ç”¨ç¨‹åºæ—¶å¼€å‘äººå‘˜æ›´å–œæ¬¢ç”¨æˆ·ä»£ç†åŠ è½½çš„ URLï¼ˆä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä»è®¾å¤‡çš„åº”ç”¨ç¨‹åºèœå•ä¸­å•å‡» Web åº”ç”¨ç¨‹åºçš„å›¾æ ‡æ—¶æˆ–ä¸»å±å¹•ï¼‰ã€‚\n\n**serviceworker** è¡¨ç¤ºåº”ç”¨ä¸­ serviceWorker çš„ä¿¡æ¯ã€‚\n\n```json\n\"serviceworker\": {\n  \"src\": \"sw.js\",\n  \"scope\": \"/foo\",\n  \"update_via_cache\": \"none\"\n}\n```\n\n**theme_color** åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„é»˜è®¤ä¸»é¢˜é¢œè‰²ã€‚\n\n**related_applications** æ˜¯åº•å±‚åº”ç”¨ç¨‹åºå¹³å°å¯è®¿é—®çš„åº”ç”¨ç¨‹åºã€‚\n\n**prefer_related_applications** è¡¨ç¤ºç›¸å…³åº”ç”¨ç¨‹åºæ˜¯å¦åº”ä¼˜å…ˆäºå½“å‰çš„ Web åº”ç”¨ç¨‹åºã€‚\n\n**background_color** Web åº”ç”¨ç¨‹åºçš„é¢„æœŸèƒŒæ™¯é¢œè‰²ã€‚\n\n**categories** Web åº”ç”¨ç¨‹åºæ‰€å±çš„é¢„æœŸåº”ç”¨ç¨‹åºç±»åˆ«ã€‚\n\n**screenshots** ä¸€ä¸ª ImageResources æ•°ç»„ï¼Œè¡¨ç¤ºå¸¸è§ä½¿ç”¨åœºæ™¯ä¸­çš„ Web åº”ç”¨ç¨‹åºçš„æˆªå›¾ã€‚\n\n**iarc_rating_id** ç”¨äºç¡®å®š Web åº”ç”¨ç¨‹åºé€‚åˆçš„å¹´é¾„ã€‚\n\nä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹\n\n```json\n{\n  \"lang\": \"en\",\n  \"dir\": \"ltr\",\n  \"name\": \"Super Racer 3000\",\n  \"description\": \"The ultimate futuristic racing game from the future!\",\n  \"short_name\": \"Racer3K\",\n  \"icons\": [\n    {\n      \"src\": \"icon/lowres.webp\",\n      \"sizes\": \"64x64\",\n      \"type\": \"image/webp\"\n    },\n    {\n      \"src\": \"icon/lowres.png\",\n      \"sizes\": \"64x64\"\n    },\n    {\n      \"src\": \"icon/hd_hi\",\n      \"sizes\": \"128x128\"\n    }\n  ],\n  \"scope\": \"/racer/\",\n  \"start_url\": \"/racer/start.html\",\n  \"display\": \"fullscreen\",\n  \"orientation\": \"landscape\",\n  \"theme_color\": \"aliceblue\",\n  \"background_color\": \"red\",\n  \"serviceworker\": {\n    \"src\": \"sw.js\",\n    \"scope\": \"/racer/\",\n    \"update_via_cache\": \"none\"\n  },\n  \"screenshots\": [\n    {\n      \"src\": \"screenshots/in-game-1x.jpg\",\n      \"sizes\": \"640x480\",\n      \"type\": \"image/jpeg\"\n    },\n    {\n      \"src\": \"screenshots/in-game-2x.jpg\",\n      \"sizes\": \"1280x920\",\n      \"type\": \"image/jpeg\"\n    }\n  ]\n}\n```\n\nè¦åœ¨é¡µé¢æ˜¯ä½¿ç”¨çš„è¯ç›´æ¥ç”¨ <link> æ ‡ç­¾å¼•ç”¨å³å¯ã€‚\n\n```html\n<link rel=\"manifest\" href=\"/manifest.json\" />\n```\n\nè¿™æ ·æµè§ˆå™¨å°±å¯ä»¥å®‰è£…ä½ çš„ Web åº”ç”¨äº†ã€‚\n","tags":["PWA"],"categories":["WEB"]},{"title":"è®© Hugo åšå®¢æ”¯æŒ PWA","url":"/2019/07/24/add-pwa-support-to-hugo/","content":"\nè®©ç”¨ Hugo æ­å»ºçš„åšå®¢æ”¯æŒ PWA å¾ˆç®€å•ï¼Œåªéœ€ 2 ä¸ªæ­¥éª¤å³å¯ï¼š\n\n## 1. æ·»åŠ ä¸€ä¸ª manifest.json æ–‡ä»¶\n\nä½¿ç”¨ https://app-manifest.firebaseapp.com æ¥ç”Ÿæˆåšå®¢çš„ manifest.json æ–‡ä»¶ï¼Œç„¶åå°†ç”Ÿæˆå‡ºæ¥çš„æ–‡ä»¶å’Œå›¾ç‰‡æ”¾åˆ°åšå®¢çš„ static ç›®å½•ï¼Œç„¶ååœ¨ layout/index.html çš„ <head> æ ‡ç­¾å†…å¼•ç”¨è¿™ä¸ªæ–‡ä»¶\n\n```html\n<head>\n  ...\n  <link rel=\"manifest\" href=\"/manifest.json\" />\n  ...\n</head>\n```\n\nè¿™æ ·ä½ çš„åšå®¢å°±å¯ä»¥å®‰è£…åˆ°æ¡Œé¢äº†\n\n## 2. ä½¿ç”¨ Workbox å·¥å…·æ³¨å†Œ ServiceWorker\n\nåœ¨ static æ–°å»ºä¸€ä¸ª `sw.js` æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æ·»åŠ ä»¥ä¸‹å†…å®¹ç”¨æ¥ä¸ºç½‘ç»œè¯·æ±‚æ·»åŠ ç¼“å­˜ï¼›ä¸»è¦æ˜¯ç¼“å­˜é™æ€èµ„æº jsï¼Œcssï¼Œå›¾ç‰‡ä»¥åŠå­—ä½“ç­‰æ–‡ä»¶ï¼Œ\nè¯¦ç»†æ–‡æ¡£å¯ä»¥æŸ¥çœ‹ [Workbox æ–‡æ¡£](https://developers.google.cn/web/tools/workbox)\n\n```js\nimportScripts('https://cdn.jsdelivr.net/npm/workbox-cdn/workbox/workbox-sw.js')\n\nif (workbox) {\n  console.log(`Yay! Workbox is loaded ğŸ‰`)\n\n  workbox.routing.registerRoute(\n    /\\.(?:js|css)$/,\n    new workbox.strategies.StaleWhileRevalidate({\n      cacheName: 'static-resources'\n    })\n  )\n\n  workbox.routing.registerRoute(\n    /\\.(?:png|jpg|jpeg|svg|gif)$/,\n    new workbox.strategies.CacheFirst({\n      cacheName: 'image-cache',\n      plugins: [\n        new workbox.expiration.Plugin({\n          maxEntries: 20,\n          maxAgeSeconds: 7 * 24 * 60 * 60\n        })\n      ]\n    })\n  )\n\n  workbox.routing.registerRoute(\n    /^https:\\/\\/fonts\\.googleapis\\.com/,\n    new workbox.strategies.StaleWhileRevalidate({\n      cacheName: 'google-fonts-stylesheets'\n    })\n  )\n\n  workbox.routing.registerRoute(\n    /^https:\\/\\/fonts\\.gstatic\\.com/,\n    new workbox.strategies.CacheFirst({\n      cacheName: 'google-fonts-webfonts',\n      plugins: [\n        new workbox.cacheableResponse.Plugin({\n          statuses: [0, 200]\n        }),\n        new workbox.expiration.Plugin({\n          maxAgeSeconds: 60 * 60 * 24 * 365,\n          maxEntries: 30\n        })\n      ]\n    })\n  )\n} else {\n  console.log(`Boo! Workbox didn't load ğŸ˜¬`)\n}\n```\n\nåŸºæœ¬å®Œæˆäº†ï¼Œå¯ä»¥ç”¨ Chrome çš„ Audits çš„å·¥å…·è·‘äº†ä¸€ä¸‹åˆ†ï¼Œçœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆåœ°æ–¹è¦ä¿®æ”¹çš„ã€‚\n","tags":["PWA"],"categories":["WEB"]},{"title":"äº†è§£ <link> æ ‡ç­¾ä¸Š rel=prexxx çš„ä½œç”¨","url":"/2019/07/22/understand-link-prexxx/","content":"\nåœ¨ HTML ä¸­ <link> æ ‡ç­¾æŒ‡å®šäº†å½“å‰æ–‡æ¡£ä¸å¤–éƒ¨èµ„æºä¹‹é—´çš„å…³ç³»\næœ¬æ–‡è¯´æ˜ <link> æ ‡ç­¾çš„ rel å±æ€§åˆ†åˆ«è®¾ç½® dns-prefetchï¼Œpreconnectï¼Œprefetchï¼Œpreloadï¼Œprerender çš„æ—¶å€™æœ‰è¯´æ˜ä½œç”¨\n\ndns-prefetchï¼šå‘æµè§ˆå™¨æç¤ºéœ€è¦èµ„æºï¼Œå…è®¸æµè§ˆå™¨åœ¨ç”¨æˆ·å•å‡»é“¾æ¥ä¹‹å‰è¿›è¡Œ DNS æŸ¥æ‰¾å’Œåè®®æ¡æ‰‹\n\npreconnectï¼šå‘æµè§ˆå™¨æä¾›æç¤ºï¼Œå»ºè®®å®ƒæå‰æ‰“å¼€ä¸é“¾æ¥ç½‘ç«™çš„è¿æ¥ï¼Œè€Œä¸æ³„éœ²ä»»ä½•ç§äººä¿¡æ¯æˆ–ä¸‹è½½ä»»ä½•å†…å®¹ï¼Œä»¥ä¾¿åœ¨éµå¾ªé“¾æ¥æ—¶å¯ä»¥æ›´å¿«åœ°è·å–é“¾æ¥çš„å†…å®¹\n\nprefetchï¼šå»ºè®®æµè§ˆå™¨æå‰è·å–é“¾æ¥èµ„æºï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ç”¨æˆ·è¯·æ±‚çš„ã€‚ ä» Firefox 44 å¼€å§‹ï¼Œå°†è€ƒè™‘ crossorigin å±æ€§çš„å€¼ï¼Œä»è€Œå¯ä»¥è¿›è¡ŒåŒ¿åé¢„å–\n\npreloadï¼šå‘Šè¯‰æµè§ˆå™¨ä¸‹è½½èµ„æºï¼Œå› ä¸ºç¨ååœ¨å½“å‰å¯¼èˆªæœŸé—´å°†éœ€è¦æ­¤èµ„æº\n\nprerenderï¼šå»ºè®®æµè§ˆå™¨æå‰è·å–é“¾æ¥èµ„æºï¼Œå¹¶ä¸”å®ƒè¿˜åœ¨å±å¹•å¤–æ¸²æŸ“é¢„å–å†…å®¹ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥å¿«é€Ÿå‘ˆç°ç»™ç”¨æˆ·\n\n## å‚è€ƒ\n\n[link_types](https://devdocs.io/html/link_types)\n\n[preconnect-vs-dns-prefetch-resource-hints](https://stackoverflow.com/questions/47273743/preconnect-vs-dns-prefetch-resource-hints)\n","tags":["HTML"],"categories":["Web"]},{"title":"æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š","url":"/2019/07/18/request-timimg/","content":"\n## ä¸€ä¸ªè¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š\n\n**Queueing** æµè§ˆå™¨ä¼šåœ¨ä»¥ä¸‹æƒ…å†µæ—¶å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„è¯·æ±‚ï¼›å½“è¯·æ±‚åè®®æ˜¯ HTTP/1.0 å’Œ HTTP/1.1 æ—¶ï¼ŒåŒä¸€åŸŸåä¸‹å·²ç»æœ‰ 6 ä¸ª TCP é“¾æ¥ï¼›æµè§ˆå™¨åœ¨åˆ†é…ç£ç›˜ç¼“å­˜\n\n**Stalled** ç”±äºæ’é˜Ÿä¸­æè¿°çš„ä»»ä½•åŸå› ï¼Œè¯·æ±‚å¯èƒ½ä¼šåœæ­¢\n\n**DNS Lookup** æµè§ˆå™¨æ­£åœ¨è§£æè¯·æ±‚çš„ IP åœ°å€\n\n**Proxy negotiation** æµè§ˆå™¨ä¸ä»£ç†æœåŠ¡å™¨åå•†è¯·æ±‚\n\n**Request sent** è¯·æ±‚å·²ç»å‘å‡º\n\n**ServiceWorker Preparation** æµè§ˆå™¨å¯åŠ¨ service worker\n\n**Request to ServiceWorker** è¯·æ±‚å·²ç»å‘ service worker å‘å‡º\n\n**Waiting (TTFB)** æµè§ˆå™¨ç­‰å¾…ç¬¬ä¸€ä¸ªå­—èŠ‚è¿”å›ï¼Œæ­¤æ—¶é—´åŒ…æ‹¬ 1 æ¬¡å¾€è¿”å»¶è¿Ÿå’ŒæœåŠ¡å™¨å‡†å¤‡å“åº”æ‰€ç”¨çš„æ—¶é—´ã€‚\n\n**Content Download**. æµè§ˆå™¨æ¥æ”¶å“åº”\n\n**Receiving Push**. æµè§ˆå™¨æ”¶åˆ°é€šè¿‡ HTTP/2 Server Push çš„å“åº”\n\n**Reading Push**. æµè§ˆå™¨æ­£åœ¨è¯»å–å…ˆå‰æ”¶åˆ°çš„æœ¬åœ°æ•°æ®\n\n## Timing breakdown phases explained\n\nHere's more information about each of the phases you may see in the Timing tab:\n\n**Queueing**. The browser queues requests when:\n\n- There are higher priority requests.\n- There are already six TCP connections open for this origin, which is the limit. Applies to HTTP/1.0 and HTTP/1.1 only.\n- The browser is briefly allocating space in the disk cache\n\n**Stalled**. The request could be stalled for any of the reasons described in**Queueing**.\n\n**DNS Lookup**. The browser is resolving the request's IP address.\n\n**Proxy negotiation**. The browser is negotiating the request with a[proxy server](https://en.wikipedia.org/wiki/Proxy_server).\n\n**Request sent**. The request is being sent.\n\n**ServiceWorker Preparation**. The browser is starting up the service worker.\n\n**Request to ServiceWorker**. The request is being sent to the service worker.\n\n**Waiting (TTFB)**. The browser is waiting for the first byte of a response. TTFB stands for Time To First Byte. This timing includes 1 round trip of latency and the time the server took to prepare the response.\n\n**Content Download**. The browser is receiving the response.\n\n**Receiving Push**. The browser is receiving data for this response via HTTP/2 Server Push.\n\n**Reading Push**. The browser is reading the local data previously received.\n","tags":["Browser"],"categories":["Web"]},{"title":"Dart è¯­è¨€ä¸­çš„ final ä¸ const çš„åŒºåˆ«","url":"/2019/07/16/dart-final-vs-const/","content":"\nåœ¨ Dart ä¸­æœ‰ `final` å’Œ `const` ä¸¤ä¸ªå…³é”®å­—ï¼Œè²Œä¼¼éƒ½æ˜¯è¡¨ç¤ºå¸¸é‡çš„ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„\n\nfinal å˜é‡çš„å€¼åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡ï¼› const å˜é‡åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å›ºå®š (const å˜é‡æ˜¯éšå¼ final çš„ç±»å‹.) æœ€é«˜çº§ final å˜é‡æˆ–ç±»å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚\n\n[å®˜æ–¹æ–‡æ¡£](https://dart.dev/guides/language/language-tour#final-and-const)\n","tags":["Dart"],"categories":["Dart"]},{"title":"å…³äº Apple çš„ Code Signing","url":"/2019/07/15/code-signing/","content":"\næƒ³è¦æŠŠ Flutter å†™çš„åº”ç”¨è¿è¡Œåœ¨ iPhone ä¸Šï¼Œå¿…é¡»è¦è¿›è¡Œ Code Signing\n\n[å®˜æ–¹æ–‡æ¡£](https://developer.apple.com/support/code-signing/)\n\n## Code Signing\n\nCode signing your app assures users that it is from a known source and the app hasnâ€™t been modified since it was last signed. Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a[certificate](https://developer.apple.com/support/certificates/)issued by Apple. For more information on how to request certificates and code sign your apps, review[Xcode Help](https://help.apple.com/xcode/mac/current/).\n\n## ä»£ç ç­¾å\n\nä»£ç ç­¾åæ‚¨çš„åº”ç”¨ç¨‹åºä¼šå‘ç”¨æˆ·ä¿è¯å®ƒæ¥è‡ªå·²çŸ¥æ¥æºï¼Œå¹¶ä¸”è¯¥åº”ç”¨ç¨‹åºè‡ªä¸Šæ¬¡ç­¾ååæœªè¢«ä¿®æ”¹ã€‚ åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥é›†æˆåº”ç”¨ç¨‹åºæœåŠ¡ï¼Œå®‰è£…åœ¨è®¾å¤‡ä¸Šæˆ–æäº¤åˆ° App Store ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨ Apple é¢å‘çš„è¯ä¹¦è¿›è¡Œç­¾åã€‚\n","tags":["iOS"],"categories":["Flutter"]}]