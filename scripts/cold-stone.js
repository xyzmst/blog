const themes={dark:"dark",light:"light"},documentHead=document.getElementsByTagName("head")[0],localTheme=localStorage.getItem("theme"),isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches,darkThemeHref="https://cdn.bootcss.com/highlight.js/9.15.10/styles/atom-one-dark.min.css";function insertThemeDarkLink(){const e=document.createElement("link");e.rel="stylesheet",e.href=darkThemeHref,documentHead.appendChild(e)}function removeThemeDarkLink(){const e=document.querySelectorAll("link");for(let t=0;t<e.length;t++){const o=e[t];o.href===darkThemeHref&&documentHead.removeChild(o)}}const path=location.pathname,navLinkList=Array.from(document.querySelectorAll(".nav-list-item")),navs=["/tags/","/about/","/friends/","/projects/","/archives/","/categories/"];"/"===path||/page/.test(path)?navLinkList[0].classList.add("active"):navs.forEach(function(e,t){if(e===path){const t=navLinkList.find(function(t){return t.dataset.link===e});t&&t.classList.add("active")}});const tocLinkList=document.querySelectorAll(".toc-link");tocLinkList.forEach(function(e){const t=e.href.replace(location.origin+"/",location.href);e.setAttribute("href",t)});const loader=document.getElementById("loader"),utteranc=document.getElementById("utteranc");if(utteranc){const e=document.createElement("script");e.async=!0,e.crossOrigin="anonymous",e.src="https://utteranc.es/client.js",e.setAttribute("repo",window.COLD_STONE.repo),e.setAttribute("issue-term","pathname"),isDarkMode||localTheme===themes.dark?(insertThemeDarkLink(),e.setAttribute("theme","github-dark")):(e.setAttribute("theme","github-light"),removeThemeDarkLink()),utteranc.appendChild(e);const t=setTimeout(function(){loader.remove(),clearTimeout(t)},3e3)}const back=document.getElementById("back");back&&back.addEventListener("click",function(){history.back()});const backTop=document.getElementById("backTop");backTop&&(window.addEventListener("scroll",()=>{const{scrollTop:e,scrollHeight:t,clientHeight:o}=document.scrollingElement;e+o>=t?backTop.classList.add("show"):backTop.classList.remove("show")}),backTop.addEventListener("click",function(){window.scroll({top:0,left:0,behavior:"smooth"})}));const toggle=document.querySelector(".footer-toggle"),darkBtn=document.querySelector(".dark-btn"),lightBtn=document.querySelector(".light-btn");function findTheme(e){const t=e.dataset.theme;return t||findTheme(e.parentElement)}localTheme===themes.dark?(document.body.classList.add("dark"),insertThemeDarkLink(),darkBtn&&(darkBtn.classList.remove("show"),lightBtn.classList.add("show"))):(removeThemeDarkLink(),darkBtn&&(lightBtn.classList.remove("show"),darkBtn.classList.add("show"))),toggle&&toggle.addEventListener("click",e=>{const t=findTheme(e.target);switch(localStorage.setItem("theme",t),t){case themes.dark:document.body.classList.add("dark"),darkBtn.classList.remove("show"),lightBtn.classList.add("show");break;case themes.light:removeThemeDarkLink(),document.body.classList.remove("dark"),lightBtn.classList.remove("show"),darkBtn.classList.add("show")}});const article=document.querySelector(".article");if(article){const e=document.querySelector(".article-toc");article.addEventListener("mouseenter",()=>{e.classList.add("fade")}),article.addEventListener("mouseleave",()=>{e.classList.remove("fade")})}