<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä½¿ç”¨ Intl å¯¹è±¡è¿›è¡Œæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–</title>
      <link href="/post/2019/10/05/js-intl/"/>
      <url>/post/2019/10/05/js-intl/</url>
      
        <content type="html"><![CDATA[<p>å¹³æ—¶é¡¹ç›®ä¸­è¦å¯¹æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–é€šå¸¸ä¼šä½¿ç”¨å¦‚ <a href="https://github.com/iamkun/dayjs" target="_blank" rel="noopener">dayjs</a>ï¼Œ<a href="https://github.com/date-fns/date-fns" target="_blank" rel="noopener">date-fns</a>ï¼Œ<a href="https://github.com/moment/moment" target="_blank" rel="noopener">moment</a> è¿™äº›ç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½åªéœ€è¦æŸå‡ ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ç¼ºå®‰è£…äº†ä¸€æ•´ä¸ªåº“å¤§å¤§å¢åŠ äº†é¡¹ç›®çš„ä½“ç§¯ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« çš„æ•°æ® <a href="https://github.com/you-dont-need/You-Dont-Need-Momentjs" target="_blank" rel="noopener">You-Dont-Need-Momentjs</a>ã€‚æœ¬æ–‡ä¸»è¦è¯´æ˜å¦‚ä½•ä½¿ç”¨æµè§ˆå™¨è‡ªå¸¦çš„ Intl å¯¹è±¡è¿›è¡Œæ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å¹³æ—¶é¡¹ç›®ä¸­è¦å¯¹æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–é€šå¸¸ä¼šä½¿ç”¨å¦‚ <a href="https://github.com/iamkun/dayjs" target="_blank" rel="noopener">dayjs</a>ï¼Œ<a href="https://github.com/date-fns/date-fns" target="_blank" rel="noopener">date-fns</a>ï¼Œ<a href="https://github.com/moment/moment" target="_blank" rel="noopener">moment</a> è¿™äº›ç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½åªéœ€è¦æŸå‡ ä¸ªæ–¹æ³•ï¼Œå´å®‰è£…äº†ä¸€æ•´ä¸ªåº“ï¼Œå¤§å¤§å¢åŠ äº†é¡¹ç›®çš„ä½“ç§¯ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« çš„æ•°æ® <a href="https://github.com/you-dont-need/You-Dont-Need-Momentjs" target="_blank" rel="noopener">You-Dont-Need-Momentjs</a>ã€‚</p><p>å…¶å®æµè§ˆå™¨æœ¬èº«å°±æœ‰ä¸€ä¸ªå¯¹è±¡æ˜¯æ¥åšè¿™äº›äº‹æƒ…çš„ï¼Œæœ¬æ–‡ä¸»è¦è¯´æ˜å¦‚ä½•ä½¿ç”¨ Intl å¯¹è±¡çš„ DateTimeFormat å’Œ RelativeTimeFormat è¿™ä¸¤ä¸ªå±æ€§æ¥è¿›è¡Œå¯¹æ—¥æœŸæ—¶é—´çš„æ ¼å¼åŒ–</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl" target="_blank" rel="noopener">MDN</a></p><blockquote><p>Intl å¯¹è±¡æ˜¯ ECMAScript å›½é™…åŒ– API çš„ä¸€ä¸ªå‘½åç©ºé—´ï¼Œå®ƒæä¾›äº†ç²¾ç¡®çš„å­—ç¬¦ä¸²å¯¹æ¯”ã€æ•°å­—æ ¼å¼åŒ–ï¼Œå’Œæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–ã€‚Collatorï¼ŒNumberFormat å’Œ DateTimeFormat å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ Intl å¯¹è±¡çš„å±æ€§ã€‚æœ¬é¡µæ–‡æ¡£å†…å®¹åŒ…æ‹¬äº†è¿™äº›å±æ€§ï¼Œä»¥åŠå›½é™…åŒ–ä½¿ç”¨çš„æ„é€ å™¨å’Œå…¶ä»–è¯­è¨€çš„æ–¹æ³•ç­‰å¸¸è§çš„åŠŸèƒ½ã€‚</p></blockquote><h2 id="æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–"><a href="#æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–" class="headerlink" title="æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–"></a>æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–</h2><p>è¦å¯¹æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–å°±è¦ä½¿ç”¨ <code>Intl.DateTimeFormat</code> å¯¹è±¡ï¼Œå®ƒæ˜¯æ ¹æ®è¯­è¨€æ¥æ ¼å¼åŒ–æ—¥æœŸå’Œæ—¶é—´çš„æ„é€ å‡½æ•°ã€‚</p><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯­è¨€ä»£ç ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ„é€ å‡½æ•°çš„é€‰é¡¹ï¼Œéƒ½æ˜¯å¯é€‰çš„</p><pre><code class="js">new Intl.DateTimeFormat([locales[, options]])</code></pre><h3 id="ç®€å•ä½¿ç”¨"><a href="#ç®€å•ä½¿ç”¨" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><pre><code class="js">const date = new Date()console.log(new Intl.DateTimeFormat(&#39;en-US&#39;).format(date))// &quot;10/8/2019&quot;console.log(new Intl.DateTimeFormat(&#39;zh-CN&#39;).format(date))// &quot;2019/10/8&quot;console.log(  new Intl.DateTimeFormat(&#39;zh-CN&#39;, {    year: &#39;numeric&#39;,    month: &#39;numeric&#39;,    day: &#39;numeric&#39;,    weekday: &#39;long&#39;,    hour: &#39;numeric&#39;,    minute: &#39;numeric&#39;,    second: &#39;numeric&#39;,    hour12: false  }).format(date))// &quot;2019å¹´10æœˆ8æ—¥æ˜ŸæœŸäºŒ 15:07:04&quot;</code></pre><h3 id="è¯¦ç»†ä½¿ç”¨"><a href="#è¯¦ç»†ä½¿ç”¨" class="headerlink" title="è¯¦ç»†ä½¿ç”¨"></a>è¯¦ç»†ä½¿ç”¨</h3><p>å‚è€ƒæ–‡æ¡£ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/DateTimeFormat" target="_blank" rel="noopener">Intl.DateTimeFormat</a></p><h2 id="ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–"><a href="#ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–" class="headerlink" title="ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–"></a>ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–</h2><p>ä½¿ç”¨ Intl.RelativeTimeFormat å¯¹ç›¸å¯¹æ—¶é—´è¿›è¡Œæ ¼å¼åŒ–</p><h3 id="è¯­æ³•-1"><a href="#è¯­æ³•-1" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>åŒä¸Šï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯­è¨€ä»£ç ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ„é€ å‡½æ•°çš„é€‰é¡¹ï¼Œéƒ½æ˜¯å¯é€‰çš„</p><pre><code class="js">new Intl.RelativeTimeFormat([locales[, options]])</code></pre><h3 id="ç®€å•ä½¿ç”¨-1"><a href="#ç®€å•ä½¿ç”¨-1" class="headerlink" title="ç®€å•ä½¿ç”¨"></a>ç®€å•ä½¿ç”¨</h3><pre><code class="js">const rtf = new Intl.RelativeTimeFormat(&#39;zh-CN&#39;)console.log(rtf.format(-3, &#39;day&#39;))// &quot;3å¤©å‰&quot;console.log(rtf.format(3, &#39;day&#39;))// &quot;3å¤©å&quot;console.log(rtf.format(3, &#39;minute&#39;))// &quot;3åˆ†é’Ÿå&quot;console.log(rtf.format(-3, &#39;second&#39;))// &quot;3ç§’é’Ÿå‰&quot;</code></pre><h3 id="è¯¦ç»†ä½¿ç”¨-1"><a href="#è¯¦ç»†ä½¿ç”¨-1" class="headerlink" title="è¯¦ç»†ä½¿ç”¨"></a>è¯¦ç»†ä½¿ç”¨</h3><p>å‚è€ƒæ–‡æ¡£ <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RelativeTimeFormat#%E5%8F%82%E6%95%B0" target="_blank" rel="noopener">Intl.RelativeTimeFormat</a></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.zhangxinxu.com/wordpress/2019/09/js-intl-zh/" target="_blank" rel="noopener">Intl</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl" target="_blank" rel="noopener">JS Intl å¯¹è±¡å®Œæ•´ç®€ä»‹åŠåœ¨ä¸­æ–‡ä¸­çš„åº”ç”¨</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é›†åˆ</title>
      <link href="/post/2019/10/01/dsa-set/"/>
      <url>/post/2019/10/01/dsa-set/</url>
      
        <content type="html"><![CDATA[<p>é›†åˆæ˜¯ä¸€ç§åŒ…å«ä¸åŒå…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œé›†åˆä¸­çš„å…ƒç´ ç§°ä¹‹ä¸ºæˆå‘˜ã€‚é›†åˆæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰¹æ€§ï¼Œä¸€æ˜¯é›†åˆä¸­çš„æˆå‘˜æ˜¯æ— åºçš„ï¼Œå…¶æ¬¡é›†åˆä¸­ä¸å­˜åœ¨ç›¸åŒçš„æˆå‘˜ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é›†åˆæ˜¯ä¸€ç§åŒ…å«ä¸åŒå…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œé›†åˆä¸­çš„å…ƒç´ ç§°ä¹‹ä¸ºæˆå‘˜ã€‚é›†åˆæœ‰ä¸¤ä¸ªé‡è¦çš„ç‰¹æ€§ï¼Œä¸€æ˜¯é›†åˆä¸­çš„æˆå‘˜æ˜¯æ— åºçš„ï¼Œå…¶æ¬¡é›†åˆä¸­ä¸å­˜åœ¨ç›¸åŒçš„æˆå‘˜ã€‚</p><h2 id="å…³äºé›†åˆ"><a href="#å…³äºé›†åˆ" class="headerlink" title="å…³äºé›†åˆ"></a>å…³äºé›†åˆ</h2><p>ä¸åŒ…å«ä»»ä½•æˆå‘˜çš„é›†åˆç§°ä¸ºç©ºé›†ï¼Œå…¨é›†åˆ™æ˜¯åŒ…å«å¯èƒ½ä¸€åˆ‡æˆå‘˜çš„é›†åˆã€‚<br>å¦‚æœä¸¤ä¸ªé›†åˆçš„æˆå‘˜å®Œå…¨ç›¸ç­‰ï¼Œåˆ™ä¸¤ä¸ªé›†åˆç›¸ç­‰ã€‚<br>å¦‚æœä¸€ä¸ªé›†åˆçš„æ‰€æœ‰æˆå‘˜éƒ½å±äºå¦ä¸€ä¸ªé›†åˆï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªé›†åˆæ˜¯å¦ä¸€ä¸ªé›†åˆçš„å­é›†ã€‚<br>å¹¶é›†-å°†ä¸¤ä¸ªé›†åˆçš„æˆå‘˜åˆå¹¶çš„æ“ä½œã€‚<br>äº¤é›†-å°†ä¸¤ä¸ªé›†åˆå…±æœ‰çš„æˆå‘˜ç»„æˆä¸€ä¸ªæ–°çš„é›†åˆã€‚<br>è¡¥é›†-å±äºä¸€ä¸ªé›†åˆè€Œä¸å±äºå¦ä¸€ä¸ªé›†åˆçš„æˆå‘˜ã€‚</p><h2 id="å®ç°é›†åˆ"><a href="#å®ç°é›†åˆ" class="headerlink" title="å®ç°é›†åˆ"></a>å®ç°é›†åˆ</h2><pre><code class="ts">class MySet {  data = &lt;any&gt;[]  get size() {    return this.data.length  }  add(element: any) {    if (this.data.indexOf(element) &gt; -1) {      return false    }    this.data.push(element)  }  remove(element: any) {    const index = this.data.indexOf(element)    if (index &gt; -1) {      this.data.splice(index, 1)      return true    }    return false  }  contains(element: any) {    if (this.data.indexOf(element) &gt; -1) {      return true    }    return false  }  // å¹¶é›†  uinon(set: MySet) {    const newSet = new MySet()    this.data.forEach((e: any) =&gt; newSet.add(e))    for (let index = 0; index &lt; set.data.length; index++) {      const ele = set.data[index]      if (!newSet.contains(ele)) {        newSet.add(ele)      }    }    return newSet  }  // äº¤é›†  intersect(set: MySet) {    const newSet = new MySet()    this.data.forEach((ele: any) =&gt; {      if (set.contains(ele)) {        newSet.add(ele)      }    })    return newSet  }  // åˆ¤æ–­æ˜¯å¦æ˜¯è¡¥é›†  subset(set: MySet) {    if (this.size &gt; set.size) {      return false    } else {      for (let index = 0; index &lt; this.data.length; index++) {        const element = this.data[index]        if (!set.contains(element)) {          return false        }      }      return true    }  }  // è¿”å›é›†åˆä¸­ä¸åŒçš„æˆå‘˜  difference(set: MySet) {    const newSet = new MySet()    for (let index = 0; index &lt; this.data.length; index++) {      const element = this.data[index]      if (!set.contains(element)) {        newSet.add(element)      }    }    return newSet  }  show() {    return this.data.forEach((e: any) =&gt; console.log(e))  }}</code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><pre><code class="ts">const setOne = new MySet()setOne.add(&#39;a&#39;)setOne.add(&#39;b&#39;)setOne.add(&#39;c&#39;)const setTwo = new MySet()setTwo.add(&#39;c&#39;)setTwo.add(&#39;d&#39;)setTwo.add(&#39;e&#39;)setTwo.add(&#39;f&#39;)const setThree = setOne.uinon(setTwo)console.log(&#39;åˆé›†&#39;)setThree.show()// åˆé›†// a b c d e fconst setFour = setOne.intersect(setTwo)console.log(&#39;äº¤é›†&#39;)setFour.show()// äº¤é›†// cconst isSubset = setOne.subset(setTwo)console.log(&#39;æ˜¯å¦æ˜¯è¡¥é›†&#39;, isSubset)// æ˜¯å¦æ˜¯è¡¥é›† falseconst setSix = setOne.difference(setTwo)console.log(&#39;æŸ¥çœ‹é›†åˆä¸­ä¸åŒçš„æˆå‘˜&#39;)setSix.show()// æŸ¥çœ‹é›†åˆä¸­ä¸åŒçš„æˆå‘˜// a b</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Provider ç®¡ç† Flutter åº”ç”¨çŠ¶æ€ (ä¸‹)</title>
      <link href="/post/2019/09/23/flutter-provider-todos-02/"/>
      <url>/post/2019/09/23/flutter-provider-todos-02/</url>
      
        <content type="html"><![CDATA[<p>ç´§æ¥ä¸Šç¯‡ï¼Œå¯¹äºä¸€ä¸ªä»£åŠäº‹é¡¹çš„æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤åŠŸèƒ½éƒ½å·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œé‡æ–°å¯åŠ¨åº”ç”¨æ•°æ®å°±é‡ç½®äº†ï¼Œä¸ºäº†å­˜å‚¨æ•°æ®å¯ä»¥å°†æ•°æ®å­˜åˆ°æ‰‹æœºçš„å­˜å‚¨é‡Œé¢æˆ–è€…å­˜åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œæœ¬æ–‡å°±å®ç°å¦‚ä½•ä½¿ç”¨ <a href="https://github.com/flutterchina/dio" target="_blank" rel="noopener">dio</a> å°†æ•°æ®å­˜åˆ°æœåŠ¡å™¨</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç´§æ¥ä¸Šç¯‡ï¼Œå¯¹äºä¸€ä¸ªä»£åŠäº‹é¡¹çš„æ–°å¢ï¼Œä¿®æ”¹ï¼Œåˆ é™¤åŠŸèƒ½éƒ½å·²ç»å®Œæˆäº†ï¼Œä½†æ˜¯æ•°æ®éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œé‡æ–°å¯åŠ¨åº”ç”¨æ•°æ®å°±é‡ç½®äº†ï¼Œä¸ºäº†å­˜å‚¨æ•°æ®å¯ä»¥å°†æ•°æ®å­˜åˆ°æ‰‹æœºçš„å­˜å‚¨é‡Œé¢æˆ–è€…å­˜åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œæœ¬æ–‡å°±å®ç°å¦‚ä½•ä½¿ç”¨ <a href="https://github.com/flutterchina/dio" target="_blank" rel="noopener">dio</a> å°†æ•°æ®å­˜åˆ°æœåŠ¡å™¨</p><p><a href="https://github.com/xrr2016/flutter_provider_todos/tree/http" target="_blank" rel="noopener">æºç åœ°å€</a></p><h2 id="å¼€å‘å‡†å¤‡"><a href="#å¼€å‘å‡†å¤‡" class="headerlink" title="å¼€å‘å‡†å¤‡"></a>å¼€å‘å‡†å¤‡</h2><p>åœ¨ <code>pubspec.yaml</code> æ·»åŠ  dio ä¾èµ–ï¼›ä¸€ä¸ªå­˜å‚¨æ•°æ®çš„æœåŠ¡ï¼Œæˆ‘ç”¨çš„æ˜¯ <a href="https://jsonbox.io/" target="_blank" rel="noopener">jsonbox</a></p><pre><code class="yml">dependencies:  dio: ^3.0.1</code></pre><h2 id="é…ç½®-dio"><a href="#é…ç½®-dio" class="headerlink" title="é…ç½® dio"></a>é…ç½® dio</h2><p>ç”±äºè¿™ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªæœåŠ¡åœ°å€ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ª dio çš„å•ä¾‹æ¥è¿›è¡Œè¯·æ±‚å°±å¾ˆå¥½äº†ï¼Œæ–°å»ºä¸€ä¸ª request.dart æ–‡ä»¶é…ç½® dioï¼Œä½¿ç”¨ä¸€ä¸ªå‡½æ•°è¿”å›åˆ›å»ºçš„ dio å®ä¾‹</p><ul><li>è®¾ç½®åŸºç¡€çš„è¯·æ±‚åœ°å€</li><li>è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´</li><li>è®¾ç½®åœ¨è°ƒè¯•æ§åˆ¶å°è¾“å‡ºè¯·æ±‚å“åº”ä½“æ–¹ä¾¿æŸ¥çœ‹è¯·æ±‚</li></ul><p>åŸºæœ¬è®¾ç½®ä¸‹å°±å¯ä»¥ç”¨äº†ï¼Œå…¶å®ƒè®¾ç½®å¯ä»¥æŸ¥çœ‹ dio çš„<a href="https://pub.flutter-io.cn/packages/dio" target="_blank" rel="noopener">æ–‡æ¡£</a></p><pre><code class="dart">import &#39;package:dio/dio.dart&#39;;const DB_URL = &#39;https://jsonbox.io/box_7ea9df49e805cf99509b&#39;;Dio craeteDio() {  BaseOptions options = BaseOptions(    baseUrl: DB_URL,    connectTimeout: 5000,    receiveTimeout: 3000,  );  Dio dio = Dio(options);  dio.interceptors.add(LogInterceptor(    error: true,    request: false,    responseBody: true,    responseHeader: false,    requestHeader: false,  ));  return dio;}</code></pre><h2 id="ä¿®æ”¹-Todo-æ¨¡å‹"><a href="#ä¿®æ”¹-Todo-æ¨¡å‹" class="headerlink" title="ä¿®æ”¹ Todo æ¨¡å‹"></a>ä¿®æ”¹ Todo æ¨¡å‹</h2><p>ç”±äºéœ€è¦ä»æœåŠ¡å™¨ä¸Šè·å– todo æ•°æ®ï¼ŒæœåŠ¡è¿”å›çš„æ•°æ®æ˜¯ json æ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ‹¿åˆ°æ•°æ®çš„æ—¶å€™å°†å•ä¸ª todo çš„ json æ•°æ®è½¬æˆ Todo å®ä¾‹ï¼Œæ–°å»ºä¸€ä¸ª model/todo.dart æ–‡ä»¶ï¼Œæ¯”ä¹‹å‰å¤šçš„æ˜¯ä¸¤ä¸ªæ–¹æ³•è€Œå·²ï¼Œ<code>fromJson</code> è¿™ä¸ªå·¥å‚å‡½æ•°ä½œç”¨æ˜¯ä½¿ç”¨ json æ•°æ®å®ä¾‹åŒ–ä¸€ä¸ª Todoï¼Œ<code>toJson</code> æ–¹æ³•ç”¨æ¥å°†ä¸€ä¸ª Todo è½¬æˆä¸€ä¸ª Map ç»“æ„çš„æ•°æ®</p><p>å¦‚æœä¸€ä¸ªæ¨¡å‹çš„å­—æ®µè¾ƒå°‘å¯ä»¥æ‰‹å†™ï¼Œä½†æ˜¯å½“å­—æ®µè¾ƒå¤šæ¯”è¾ƒå¤æ‚çš„æ—¶å€™å°±éœ€è¦ä½¿ç”¨å·¥å…·æ¥å¸®åŠ©ç”Ÿæˆä»£ç äº†ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ <a href="https://app.quicktype.io/" target="_blank" rel="noopener">quicktype</a> è¿™ä¸ªå·¥å…·</p><pre><code class="dart">class Todo {  String id;  bool finish;  String thing;  Todo({    this.id,    this.thing,    this.finish,  });  factory Todo.fromJson(Map&lt;String, dynamic&gt; json) =&gt; Todo(        id: json[&quot;_id&quot;].toString(),        thing: json[&quot;thing&quot;],        finish: json[&quot;finish&quot;],      );  Map&lt;String, dynamic&gt; toJson() =&gt; {        &quot;id&quot;: id,        &quot;thing&quot;: thing,        &quot;finish&quot;: finish,      };}</code></pre><h2 id="å‘é€è¯·æ±‚"><a href="#å‘é€è¯·æ±‚" class="headerlink" title="å‘é€è¯·æ±‚"></a>å‘é€è¯·æ±‚</h2><p>é…ç½®å¥½ dio å°±å¯ä»¥åœ¨ todos.dart å‘æœåŠ¡å™¨å‘é€è¯·æ±‚äº†ï¼Œä¿®æ”¹ store/todos.dartï¼Œç»™ Todos ç±»æ·»åŠ äº†ä¸€ä¸ª _dio å±æ€§ç”¨æ¥å‘é€è¯·æ±‚ï¼Œä¸€ä¸ª getTodos æ–¹æ³•ç”¨æ¥è·å–å…¨éƒ¨ todo çš„åˆ—è¡¨æ•°æ®ï¼Œç„¶åä¿®æ”¹ addTodoï¼ŒremoveTodoï¼ŒeditTodo æ–¹æ³•ä½¿ç”¨ _dio å‘æœåŠ¡å™¨å‘é€ postï¼Œdeleteï¼Œput è¯·æ±‚ã€‚</p><p>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯å°† json è½¬æ¢æˆå®ä¾‹çš„é—®é¢˜ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå‡ºç°ç±»ä¼¼</p><pre><code class="dart">type &#39;List&lt;dynamic&gt;&#39; is not a subtype of type &#39;List&lt;Todo&gt;&#39;</code></pre><p>è¿™ç§é”™è¯¯ï¼Œè¿™ç§éƒ½æ˜¯ç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œæˆ‘çœ‹äº†ä¸€ç¯‡æ–‡ç« åæ‰ç®—å¼„æ‡‚äº†ä¸€ç‚¹ <a href="https://medium.com/flutter-community/parsing-complex-json-in-flutter-747c46655f51" target="_blank" rel="noopener">parsing-complex-json-in-flutter</a></p><pre><code class="dart">import &#39;package:dio/dio.dart&#39;;import &#39;package:flutter/foundation.dart&#39;;import &#39;../request.dart&#39;;import &#39;../model/todo.dart&#39;;class Todos extends ChangeNotifier {  List&lt;Todo&gt; _items = [];  Dio _dio = craeteDio();  get items {    return [..._items];  }  void refresh() {    notifyListeners();  }  Future&lt;List&gt; getTodos() async {    try {      Response response = await _dio.get(&#39;/todos&#39;);      final list = response.data as List;      _items = List&lt;Todo&gt;.from(list.map((i) =&gt; Todo.fromJson(i)).toList());      return items;    } on DioError catch (err) {      throw err;    }  }  Future addTodo(String thing) async {    try {      Response response = await _dio.post(&#39;/todos&#39;, data: {        &quot;thing&quot;: thing,        &quot;finish&quot;: false,      });      Todo todo = Todo(        thing: thing,        id: response.data[&quot;_id&quot;],        finish: response.data[&quot;finish&quot;],      );      _items.insert(0, todo);      refresh();    } on DioError catch (err) {      throw err;    }  }  Future removeTodo(int index) async {    try {      String todoId = _items[index].id;      await _dio.delete(&quot;/todos/$todoId&quot;);      _items.removeAt(index);      refresh();    } catch (err) {      throw err;    }  }  Future editTodo(int index, String thing, bool finish) async {    String todoId = _items[index].id;    try {      await _dio.put(&quot;/todos/$todoId&quot;, data: {        &quot;thing&quot;: thing,        &quot;finish&quot;: finish,      });      Todo todo = _items[index];      todo.thing = thing;      todo.finish = finish;      refresh();    } catch (e) {      throw e;    }  }  void toggleFinish(int index) {    final todo = _items[index];    todo.finish = !todo.finish;    refresh();  }  bool isTodoExist(String thing) {    bool isExist = false;    for (var i = 0; i &lt; _items.length; i++) {      final todo = _items[i];      if (todo.thing == thing) {        isExist = true;      }    }    return isExist;  }}</code></pre><h2 id="ä½¿ç”¨æ•°æ®"><a href="#ä½¿ç”¨æ•°æ®" class="headerlink" title="ä½¿ç”¨æ•°æ®"></a>ä½¿ç”¨æ•°æ®</h2><p>æœ‰äº†æ•°æ®åå°±å¯ä»¥åœ¨åˆ—è¡¨é¡µä½¿ç”¨äº†ï¼Œç”±äºç°åœ¨æ•°æ®æ˜¯ä»æœåŠ¡å™¨è¿”å›çš„ï¼Œä¼šæœ‰è¯·æ±‚è€—æ—¶ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>FutureBuilder</code> è¿™ä¸ªéƒ¨ä»¶æ¸²æŸ“åˆ—è¡¨ï¼Œ<code>FutureBuilder</code> éœ€è¦ä¸€ä¸ªè®¾ç½®ä¸€ä¸ª future æ¥åˆ¤æ–­çŠ¶æ€ï¼Œè¿™é‡Œè‡ªç„¶æ˜¯ Todos ç±»çš„ <code>getTodos</code> æ–¹æ³•è¿”å›çš„ Future å¯¹è±¡ï¼Œç„¶å builder å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ context ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ snapshot å¯¹è±¡ï¼Œè¡¨ç¤ºçš„æ˜¯è¿™ä¸ª future çš„çŠ¶æ€ã€‚</p><p>åœ¨ builder æ–¹æ³•é‡Œé¢ç”¨ä¸€ä¸ª switch è¯­å¥åˆ¤æ–­è¿™ä¸ª future çš„çŠ¶æ€ï¼Œæ ¹æ®çŠ¶æ€è¿”å›éœ€è¦æ¸²æŸ“çš„éƒ¨ä»¶ï¼Œæœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ noneï¼ˆçŠ¶æ€ä¸å­˜åœ¨ï¼‰ï¼Œactiveï¼ˆè¿è¡Œä¸­ï¼‰ï¼Œwaitingï¼ˆç­‰å¾…ä¸­ï¼‰ï¼Œdoneï¼ˆå®Œæˆï¼‰ï¼Œå¦‚æœéƒ½ä¸åŒ¹é…å°±ï¼Œè¿”å›ä¸€ä¸ª null å€¼ã€‚</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;store/todos.dart&#39;;import &#39;widget/add_todo_button.dart&#39;;import &#39;widget/edit_todo_button.dart&#39;;import &#39;widget/remove_todo_button.dart&#39;;class TodosPage extends StatelessWidget {  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(title: Text(&#39;Flutter Provider Todos&#39;)),      body: FutureBuilder(        future: Provider.of&lt;Todos&gt;(context).getTodos(),        builder: (context, snapshot) {          switch (snapshot.connectionState) {            case ConnectionState.none:              return Text(&#39;Press button to start.&#39;);            case ConnectionState.active:            case ConnectionState.waiting:              return Center(child: CircularProgressIndicator());            case ConnectionState.done:              if (snapshot.hasError) {                print(snapshot.error);                return Center(                  child: Text(                    &#39;å‡ºé”™äº†ï¼Œè¯·é‡è¯•&#39;,                    style: TextStyle(fontSize: 18.0, color: Colors.red),                  ),                );              }              List items = snapshot.data;              if (items == null) {                return Center(                  child: Text(                    &#39;è¿˜æ²¡æœ‰ä»£åŠäº‹é¡¹ï¼Œå¿«å»æ·»åŠ å§&#39;,                    style: TextStyle(fontSize: 18.0),                  ),                );              }              return ListView.builder(                  itemCount: items.length,                  itemBuilder: (_, index) {                    return Column(                      children: &lt;Widget&gt;[                        ListTile(                          title: Text(                            items[index].thing,                            style: TextStyle(                              color: items[index].finish                                  ? Colors.green                                  : Colors.grey,                            ),                          ),                          trailing: Container(                            width: 150,                            child: Row(                              mainAxisAlignment: MainAxisAlignment.end,                              children: &lt;Widget&gt;[                                EditTodoButton(todoIndex: index),                                RemoveTodoButton(todoIndex: index),                              ],                            ),                          ),                        ),                        Divider(),                      ],                    );                  });          }          return null;        },      ),      floatingActionButton: Consumer&lt;Todos&gt;(        builder: (_, todos, child) {          return AddTodoButton();        },      ),      floatingActionButtonLocation: FloatingActionButtonLocation.centerFloat,    );  }}</code></pre><h2 id="ä¿®æ”¹æŒ‰é’®"><a href="#ä¿®æ”¹æŒ‰é’®" class="headerlink" title="ä¿®æ”¹æŒ‰é’®"></a>ä¿®æ”¹æŒ‰é’®</h2><p>æ¥ä¸‹æ¥å°±æ˜¯éœ€è¦ä¿®æ”¹æ–°å¢ï¼Œç¼–è¾‘ï¼Œåˆ é™¤ä»£åŠçš„æŒ‰é’®äº†ï¼ŒåŒç†ç”±äºç°åœ¨éœ€è¦è·ŸæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®è¯·æ±‚çŠ¶æ€æ¥å¤„ç†é€»è¾‘ï¼Œä¸»è¦çš„ä¿®æ”¹å°±æ˜¯ä½¿ç”¨ <code>async/await</code> è¯­æ³•ç­‰åˆ°ä¸€ä¸ªè¯·æ±‚å®Œæˆåï¼Œæ ¹æ®è¿”å›å€¼è¿›è¡Œå¤„ç†ã€‚</p><p>æ·»åŠ  Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../store/todos.dart&#39;;class AddTodoButton extends StatefulWidget {  @override  _AddTodoButtonState createState() =&gt; _AddTodoButtonState();}class _AddTodoButtonState extends State&lt;AddTodoButton&gt; {  final _formKey = GlobalKey&lt;FormState&gt;();  final _controller = TextEditingController();  @override  void dispose() {    _formKey.currentState.dispose();    _controller.dispose();    super.dispose();  }  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(      builder: (_, todos, child) {        _addTodo() async {          final isValid = _formKey.currentState.validate();          if (!isValid) {            return;          }          final thing = _controller.value.text;          try {            await todos.addTodo(thing);            Navigator.pop(context);            _controller.clear();          } catch (e) {            Scaffold.of(context).showSnackBar(              SnackBar(content: Text(&#39;æ–°å¢ä»£åŠå¤±è´¥äº†ï¼Œè¯·é‡è¯•ã€‚&#39;)),            );          }        }        return FloatingActionButton(          child: Icon(Icons.add),          onPressed: () {            print(&#39;add todo&#39;);            return showDialog(              context: context,              builder: (BuildContext _) {                return SimpleDialog(                  title: Text(&#39;æ·»åŠ  Todo&#39;),                  contentPadding: const EdgeInsets.all(24.0),                  children: &lt;Widget&gt;[                    Form(                      key: _formKey,                      child: Column(                        children: &lt;Widget&gt;[                          TextFormField(                            autofocus: true,                            autovalidate: false,                            controller: _controller,                            keyboardType: TextInputType.text,                            decoration: InputDecoration(                              border: OutlineInputBorder(),                              labelText: &#39;è¾“å…¥ä½ æƒ³åšçš„äº‹&#39;,                            ),                            validator: (val) {                              if (val.isEmpty) {                                return &#39;æƒ³åšçš„äº‹ä¸èƒ½ä¸ºç©º&#39;;                              }                              bool isExist = todos.isTodoExist(val);                              if (isExist) {                                return &#39;è¿™ä»¶äº‹æƒ…å·²ç»å­˜åœ¨äº†&#39;;                              }                              return null;                            },                          ),                          SizedBox(height: 20),                          Row(                            mainAxisAlignment: MainAxisAlignment.end,                            children: &lt;Widget&gt;[                              FlatButton(                                child: Text(&#39;å–æ¶ˆ&#39;),                                onPressed: () {                                  Navigator.pop(context);                                },                              ),                              RaisedButton(                                child: Text(                                  &#39;ç¡®å®š&#39;,                                  style: TextStyle(color: Colors.white),                                ),                                color: Theme.of(context).primaryColor,                                onPressed: _addTodo,                              ),                            ],                          ),                        ],                      ),                    ),                  ],                );              },            );          },        );      },    );  }}</code></pre><p>ç¼–è¾‘ Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../model/todo.dart&#39;;import &#39;../store/todos.dart&#39;;class EditTodoButton extends StatefulWidget {  final todoIndex;  const EditTodoButton({Key key, this.todoIndex}) : super(key: key);  @override  _EditTodoButtonState createState() =&gt; _EditTodoButtonState();}class _EditTodoButtonState extends State&lt;EditTodoButton&gt; {  final _formKey = GlobalKey&lt;FormState&gt;();  @override  void dispose() {    _formKey?.currentState?.dispose();    super.dispose();  }  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(      builder: (context, todos, child) {        final todoIndex = widget.todoIndex;        final Todo todo = todos.items[todoIndex];        return IconButton(          color: Colors.blue,          icon: Icon(Icons.edit),          onPressed: () {            return showDialog(              context: context,              builder: (_) {                return SimpleDialog(                  title: Text(&#39;ç¼–è¾‘ Todo&#39;),                  contentPadding: const EdgeInsets.all(24.0),                  children: &lt;Widget&gt;[                    Form(                      key: _formKey,                      child: Column(                        children: &lt;Widget&gt;[                          TextFormField(                            autofocus: false,                            autovalidate: false,                            initialValue: todo.thing,                            decoration: InputDecoration(                              border: OutlineInputBorder(),                              labelText: &#39;è¾“å…¥ä½ æƒ³åšçš„äº‹&#39;,                            ),                            onChanged: (val) {                              todo.thing = val;                            },                            validator: (val) {                              if (val.isEmpty) {                                return &#39;æƒ³åšçš„äº‹ä¸èƒ½ä¸ºç©º&#39;;                              }                              return null;                            },                          ),                          SizedBox(height: 20),                          SwitchListTile(                            title: const Text(&#39;æ˜¯å¦å®Œæˆ&#39;),                            value: todo.finish,                            onChanged: (bool value) {                              todo.finish = value;                            },                          ),                          SizedBox(height: 20),                          Row(                            mainAxisAlignment: MainAxisAlignment.end,                            children: &lt;Widget&gt;[                              FlatButton(                                child: Text(&#39;å–æ¶ˆ&#39;),                                onPressed: () =&gt; Navigator.pop(context),                              ),                              RaisedButton(                                child: Text(                                  &#39;ç¡®å®š&#39;,                                  style: TextStyle(color: Colors.white),                                ),                                color: Theme.of(context).primaryColor,                                onPressed: () async {                                  final isValid =                                      _formKey.currentState.validate();                                  if (!isValid) {                                    return;                                  }                                  try {                                    await todos.editTodo(                                      todoIndex,                                      todo.thing,                                      todo.finish,                                    );                                    Navigator.pop(context);                                  } catch (e) {                                    Scaffold.of(context).showSnackBar(                                      SnackBar(content: Text(&#39;ä¿®æ”¹ä»£åŠå¤±è´¥äº†ï¼Œè¯·é‡è¯•ã€‚&#39;)),                                    );                                  }                                },                              )                            ],                          ),                        ],                      ),                    ),                  ],                );              },            );          },        );      },    );  }}</code></pre><p>åˆ é™¤ Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../model/todo.dart&#39;;import &#39;../store/todos.dart&#39;;class RemoveTodoButton extends StatelessWidget {  final int todoIndex;  const RemoveTodoButton({Key key, this.todoIndex}) : super(key: key);  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(builder: (_, todos, child) {      final Todo todo = todos.items[todoIndex];      return IconButton(        color: Colors.red,        icon: Icon(Icons.delete),        onPressed: () {          print(&#39;delete todo&#39;);          showDialog(            context: context,            builder: (BuildContext context) {              return AlertDialog(                title: Text(&#39;ç¡®è®¤åˆ é™¤ ${todo.thing}?&#39;),                actions: &lt;Widget&gt;[                  FlatButton(                    child: Text(                      &#39;å–æ¶ˆ&#39;,                      style: TextStyle(color: Colors.grey),                    ),                    onPressed: () =&gt; Navigator.pop(context),                  ),                  FlatButton(                    child: Text(&#39;ç¡®è®¤&#39;),                    onPressed: () async {                      await todos.removeTodo(todoIndex);                      Navigator.pop(context);                    },                  ),                ],              );            },          );        },      );    });  }}</code></pre><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>è‡³æ­¤æ‰€æœ‰çš„æ•°æ®éƒ½å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šäº†ï¼Œé‡å¯åº”ç”¨æ•°æ®ä¹Ÿä¼šä»æœåŠ¡å™¨ä¸Šè·å–äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Provider ç®¡ç† Flutter åº”ç”¨çŠ¶æ€ (ä¸Š)</title>
      <link href="/post/2019/09/11/flutter-provider-todos-01/"/>
      <url>/post/2019/09/11/flutter-provider-todos-01/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªåº”ç”¨å†…é€šå¸¸ä¼šæœ‰ä¸¤ç§æ•°æ®ï¼Œéƒ¨ä»¶å†…éƒ¨çš„ä½¿ç”¨çš„ä¸´æ—¶æ€§æ•°æ®ä»¥åŠå¾ˆå¤šéƒ¨ä»¶ä½¿ç”¨çš„å…¨å±€æ€§æ•°æ®ï¼Œéƒ¨ä»¶å†…éƒ¨ä½¿ç”¨çš„æ•°æ®å¯ä»¥é€šè¿‡ StatefulWidget æ¥ç®¡ç†ï¼Œä½†æ˜¯å…¨å±€æ€§çš„æ•°æ®å¦‚æœé€šè¿‡ä»ä¸Šåˆ°ä¸‹ä¼ é€’çš„æ–¹å¼ä¼šä½¿ä»£ç å†™çš„ååˆ†ç¹çï¼Œè¿™æ—¶å°±éœ€è¦ä¸€ä¸ªçŠ¶æ€ç®¡ç†å·¥å…·æ¥è¿›è¡Œç®¡ç†äº†ï¼Œæœ¬æ–‡è¯´æ˜å¦‚ä½•ä½¿ç”¨ Provider æ¥ç®¡ç†è¿™ç§åº”ç”¨çš„å…¨å±€æ€§çš„æ•°æ®</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸€ä¸ªåº”ç”¨å†…é€šå¸¸ä¼šæœ‰ä¸¤ç§æ•°æ®ï¼Œéƒ¨ä»¶å†…éƒ¨çš„ä½¿ç”¨çš„ä¸´æ—¶æ€§æ•°æ®ä»¥åŠå¾ˆå¤šéƒ¨ä»¶ä½¿ç”¨çš„å…¨å±€æ€§æ•°æ®ï¼Œéƒ¨ä»¶å†…éƒ¨ä½¿ç”¨çš„æ•°æ®å¯ä»¥é€šè¿‡ StatefulWidget æ¥ç®¡ç†ï¼Œä½†æ˜¯å…¨å±€æ€§çš„æ•°æ®å¦‚æœé€šè¿‡ä»ä¸Šåˆ°ä¸‹ä¼ é€’çš„æ–¹å¼ä¼šä½¿ä»£ç å†™çš„ååˆ†ç¹çï¼Œè¿™æ—¶å°±éœ€è¦ä¸€ä¸ªçŠ¶æ€ç®¡ç†å·¥å…·æ¥è¿›è¡Œç®¡ç†äº†ï¼Œæœ¬æ–‡è¯´æ˜å¦‚ä½•ä½¿ç”¨ Provider æ¥ç®¡ç†è¿™ç§åº”ç”¨çš„å…¨å±€æ€§çš„æ•°æ®</p><h2 id="ä»€ä¹ˆæ˜¯-Provider"><a href="#ä»€ä¹ˆæ˜¯-Provider" class="headerlink" title="ä»€ä¹ˆæ˜¯ Provider"></a>ä»€ä¹ˆæ˜¯ Provider</h2><p>å®˜æ–¹çš„å®šä¹‰æ˜¯ï¼š A mixture between dependency injection (DI) and state management, built with widgets for widgets. ç¿»è¯‘è¿‡æ¥å¤§æ„æ˜¯ä¸€ç§ä¾èµ–æ³¨å…¥å’ŒçŠ¶æ€ç®¡ç†çš„æ··åˆæ–¹æ¡ˆï¼Œä½¿ç”¨éƒ¨ä»¶åˆ›å»ºï¼Œä½œç”¨äºéƒ¨ä»¶ ğŸ˜…</p><p><a href="https://pub.flutter-io.cn/documentation/provider/latest/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Provider"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-Provider" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Provider"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Provider</h2><p>åº”ç”¨ä¸­é€šå¸¸ä¼šæœ‰ä¸€äº›å¾ˆå¤šéƒ¨ä»¶éƒ½éœ€è¦çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œç”¨æˆ·è®¾ç½®ï¼Œåœ°ç†ä½ç½®ç­‰ï¼Œå¦‚æœåªæ˜¯ä½¿ç”¨ StatefullWeight çš„è¯å°±éœ€è¦å°†çŠ¶æ€æå‡åˆ°ä¸€ä¸ªçˆ¶éƒ¨ä»¶ä¸­ç„¶åå‘ä¸‹è¿›è¡Œä¼ é€’ï¼Œä¼šå¾ˆç¹çï¼Œä½¿ç”¨ provider çš„è¯å¯ä»¥å°†å¯¹ä¸€ç§çŠ¶æ€æ•°æ®çš„æ“ä½œæ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶å†…ï¼Œç„¶åä½¿ç”¨åˆ°è¿™ä¸ªæ•°æ®çš„éƒ¨ä»¶åªéœ€è¦ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œå½“æ•°æ®æœ‰å˜åŒ–æ—¶ï¼Œéƒ¨ä»¶ä¼šè‡ªåŠ¨çš„é‡æ–°æ„å»ºï¼Œä½¿ç•Œé¢æ›´æ–°ã€‚</p><h2 id="ä¸€ä¸ªä¾‹å­-ğŸŒ°"><a href="#ä¸€ä¸ªä¾‹å­-ğŸŒ°" class="headerlink" title="ä¸€ä¸ªä¾‹å­ ğŸŒ°"></a>ä¸€ä¸ªä¾‹å­ ğŸŒ°</h2><p>ä½¿ç”¨ä¸€ä¸ª todo åº”ç”¨æ¥è¯´æ˜å¦‚ä½•åœ¨ Flutter åº”ç”¨ä¸­ä½¿ç”¨ Providerï¼Œæœ€ç»ˆçš„å®Œæˆçš„åº”ç”¨æ˜¯è¿™æ ·çš„ï¼Œå¯ä»¥æ–°å¢ï¼Œç¼–è¾‘å’Œåˆ é™¤ todoã€‚</p><p><a href="https://github.com/xrr2016/flutter_provider_todos" target="_blank" rel="noopener">æºç åœ°å€</a></p><img src="images/provider-todos.png" width="360" style="width:360px"><h3 id="åˆ›å»ºåº”ç”¨"><a href="#åˆ›å»ºåº”ç”¨" class="headerlink" title="åˆ›å»ºåº”ç”¨"></a>åˆ›å»ºåº”ç”¨</h3><p>é¦–å…ˆä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®</p><pre><code class="sh">flutter create flutter_provider_todos</code></pre><p>ç„¶ååœ¨é¡¹ç›®çš„ pubspec.yml æ·»åŠ  provider</p><pre><code class="yml">dependencies:  provider: ^3.1.0</code></pre><p>åˆ›å»ºä¸€ä¸ª store æ–‡ä»¶å¤¹ä»¥åŠ todos.dart ç”¨æ¥å­˜æ”¾åº”ç”¨ä¸­éœ€è¦ç”¨åˆ°çš„å…¨å±€æ€§æ•°æ®ï¼Œæ–°å»ºä¸€ä¸ª widget ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾åº”ç”¨ä¸­çš„éƒ¨ä»¶ä»¥åŠä¸€ä¸ªæ˜¾ç¤º todo çš„é¡µé¢ todos_page.dart</p><img src="images/todos-folder.jpg" width="360" style="width:360px"><p>é¦–å…ˆåˆ›å»º todos è¿™ä¸ªå…¨å±€æ€§çš„æ•°æ®ï¼Œä¿®æ”¹ store/todos.dartï¼Œåˆ›å»ºä¸€ä¸ª Todo ç±»è¡¨ç¤ºä¸€ä¸ªä»£åŠäº‹é¡¹ï¼Œç„¶åå®ç° Todos ç±»ï¼Œ Todos æ··åˆäº† ChangeNotifier ç±»ï¼Œä¸ºäº†ä½¿ç”¨ notifyListeners æ–¹æ³•æ¥é€šçŸ¥ UI æ›´æ–°ï¼Œå› æ­¤éœ€è¦å¯¼å…¥ foundation.dartï¼ŒTodos ç±»ä½¿ç”¨ä¸€ä¸ª _items æ•°ç»„å­˜æ”¾ Todo æ•°æ®ï¼Œä»¥åŠå…¶å®ƒå¯¹ Todo è¿›è¡Œæ“ä½œçš„æ–¹æ³•ã€‚</p><pre><code class="dart">import &#39;package:flutter/foundation.dart&#39;;class Todo {  bool finish;  String thing;  Todo({    @required this.thing,    this.finish = false,  });}class Todos extends ChangeNotifier {  List&lt;Todo&gt; _items = [    Todo(thing: &#39;Play lol&#39;, finish: true),    Todo(thing: &#39;Learn flutter&#39;, finish: false),    Todo(thing: &#39;Read book&#39;, finish: false),    Todo(thing: &#39;Watch anime&#39;, finish: false),  ];  get items {    return [..._items];  }  get finishTodos {    return _items.where((todo) =&gt; todo.finish);  }  void refresh() {    notifyListeners();  }  void addTodo(Todo todo) {    _items.insert(0, todo);    refresh();  }  void removeTodo(int index) {    _items.removeAt(index);    refresh();  }  void editTodo(int index, String newThing, bool isFinish) {    Todo todo = _items[index];    todo.thing = newThing;    todo.finish = isFinish;    refresh();  }  void toggleFinish(int index) {    final todo = _items[index];    todo.finish = !todo.finish;    refresh();  }  bool isTodoExist(String thing) {    bool isExist = false;    for (var i = 0; i &lt; _items.length; i++) {      final todo = _items[i];      if (todo.thing == thing) {        isExist = true;      }    }    return isExist;  }}</code></pre><p>ç„¶åä½¿ç”¨ provider æä¾›çš„ ChangeNotifierProvider æ–¹æ³•å°†æ•°æ®æ³¨å†Œåˆ°æ•´ä¸ªåº”ç”¨ï¼Œå¦‚æœæœ‰å¤šä¸ªæ•°æ®å°±éœ€è¦ä½¿ç”¨ MultiProvider æ–¹æ³•</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;todos_page.dart&#39;;import &#39;store/todos.dart&#39;;void main() =&gt; runApp(MyApp());class MyApp extends StatelessWidget {  @override  Widget build(BuildContext context) {    return MaterialApp(      title: &#39;Todos&#39;,      debugShowCheckedModeBanner: false,      theme: ThemeData(        primarySwatch: Colors.green,      ),      home: ChangeNotifierProvider(        builder: (context) =&gt; Todos(),        child: TodosPage(),      ),    );  }}</code></pre><h3 id="åˆ—è¡¨é¡µé¢"><a href="#åˆ—è¡¨é¡µé¢" class="headerlink" title="åˆ—è¡¨é¡µé¢"></a>åˆ—è¡¨é¡µé¢</h3><p>æ¥ç€å°±æ˜¯å®ç°æ˜¾ç¤º todo åˆ—è¡¨çš„é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢å°±æ˜¯è¦ç”¨åˆ° Todos ç±»é‡Œé¢çš„æ•°æ®çš„éƒ¨ä»¶ï¼Œè¦ä½¿ç”¨ provider çš„æ•°æ®é¦–å…ˆè¦å¯¼å…¥ provider ä»¥åŠå¯¹åº”çš„æ•°æ®ç±» Todosï¼Œç„¶åç”¨ Consumer åŠ ç±»å‹ Todos æ¥ä½¿ç”¨è¿™ä¸ªæ•°æ®</p><pre><code class="dart">Consumer&lt;Todos&gt;(  builder: (ctx, todos, child) {    return YourWidget()  },)</code></pre><p>è¿™ä¸ªé¡µé¢ä½¿ç”¨äº†ä¸€ä¸ª ListView.builder() æ¥æ¸²æŸ“ Todosï¼Œç„¶åæ¯ä¸€é¡¹ä½¿ç”¨ä¸€ä¸ª ListTile å±•ç¤ºã€‚æ–°å¢ï¼Œç¼–è¾‘å’Œåˆ é™¤å¯¹åº”äº† 3 ä¸ªä¸åŒçš„éƒ¨ä»¶ï¼Œåˆ†åˆ«æ˜¯ AddTodoButton()ï¼ŒEditTodoButton()ï¼Œ RemoveTodoButton()</p><pre><code class="dart">// todos_page.dartimport &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;store/todos.dart&#39;;import &#39;widget/add_todo_button.dart&#39;;import &#39;widget/edit_todo_button.dart&#39;;import &#39;widget/remove_todo_button.dart&#39;;class TodosPage extends StatelessWidget {  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(title: Text(&#39;Flutter Provider Todos&#39;)),      body: Consumer&lt;Todos&gt;(        builder: (ctx, todos, child) {          List&lt;Todo&gt; items = todos.items;          return ListView.builder(            itemCount: items.length,            itemBuilder: (_, index) =&gt; Column(              children: &lt;Widget&gt;[                ListTile(                  title: Text(                    items[index].thing,                    style: TextStyle(                      color: items[index].finish ? Colors.green : Colors.grey,                    ),                  ),                  trailing: Container(                    width: 150,                    child: Row(                      mainAxisAlignment: MainAxisAlignment.end,                      children: &lt;Widget&gt;[                        EditTodoButton(todoIndex: index),                        RemoveTodoButton(todoIndex: index),                      ],                    ),                  ),                ),                Divider(),              ],            ),          );        },      ),      floatingActionButton: AddTodoButton(),      floatingActionButtonLocation: FloatingActionButtonLocation.centerFloat,    );  }}</code></pre><h3 id="å®ç°åŠŸèƒ½"><a href="#å®ç°åŠŸèƒ½" class="headerlink" title="å®ç°åŠŸèƒ½"></a>å®ç°åŠŸèƒ½</h3><p>æ¥ä¸‹æ¥å°±æ˜¯è¦å®ç°è¿™ 3 ä¸ªæŒ‰é’®äº†ï¼Œåœ¨ widget ç›®å½•åˆ›å»ºå¯¹åº”çš„æ–‡ä»¶ï¼Œæ¯ä¸ªæŒ‰é’®éƒ½ä¼šä½¿ç”¨åˆ° Todos ç±»é‡Œé¢å®šä¹‰çš„æ–¹æ³•ï¼Œæ‰€ä»¥éƒ½éœ€è¦å¯¼å…¥ provider å’Œ Todos ç±»ï¼Œç‚¹å‡»æŒ‰é’®ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†è¯¢é—®å¯¹åº”çš„æ“ä½œï¼Œ</p><img src="images/todos-widget.jpg" style="width:360px"><p>æ·»åŠ  Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../store/todos.dart&#39;;class AddTodoButton extends StatefulWidget {  @override  _AddTodoButtonState createState() =&gt; _AddTodoButtonState();}class _AddTodoButtonState extends State&lt;AddTodoButton&gt; {  final _formKey = GlobalKey&lt;FormState&gt;();  final _controller = TextEditingController();  @override  void dispose() {    _formKey.currentState.dispose();    _controller.dispose();    super.dispose();  }  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(      builder: (_, todos, child) {        return FloatingActionButton(          child: Icon(Icons.add),          onPressed: () {            print(&#39;add todo&#39;);            return showDialog(              context: context,              builder: (BuildContext _) {                return SimpleDialog(                  title: Text(&#39;æ·»åŠ  Todo&#39;),                  contentPadding: const EdgeInsets.all(24.0),                  children: &lt;Widget&gt;[                    Form(                      key: _formKey,                      child: Column(                        children: &lt;Widget&gt;[                          TextFormField(                            autofocus: true,                            autovalidate: false,                            controller: _controller,                            keyboardType: TextInputType.text,                            decoration: InputDecoration(                              border: OutlineInputBorder(),                              labelText: &#39;è¾“å…¥ä½ æƒ³åšçš„äº‹&#39;,                            ),                            validator: (val) {                              if (val.isEmpty) {                                return &#39;æƒ³åšçš„äº‹ä¸èƒ½ä¸ºç©º&#39;;                              }                              bool isExist = todos.isTodoExist(val);                              if (isExist) {                                return &#39;è¿™ä»¶äº‹æƒ…å·²ç»å­˜åœ¨äº†&#39;;                              }                              return null;                            },                          ),                          SizedBox(height: 20),                          Row(                            mainAxisAlignment: MainAxisAlignment.end,                            children: &lt;Widget&gt;[                              FlatButton(                                child: Text(&#39;å–æ¶ˆ&#39;),                                onPressed: () {                                  Navigator.pop(context);                                },                              ),                              RaisedButton(                                child: Text(                                  &#39;ç¡®å®š&#39;,                                  style: TextStyle(color: Colors.white),                                ),                                color: Theme.of(context).primaryColor,                                onPressed: () {                                  final isValid =                                      _formKey.currentState.validate();                                  if (!isValid) {                                    return;                                  }                                  final thing = _controller.value.text;                                  todos.addTodo(Todo(                                    thing: thing,                                    finish: false,                                  ));                                  _controller.clear();                                  Navigator.pop(context);                                },                              )                            ],                          ),                        ],                      ),                    ),                  ],                );              },            );          },        );      },    );  }}</code></pre><img src="https://github.com/xrr2016/flutter_provider_todos/raw/master/add-todo.png" width="360" style="width:360px"><p>ç¼–è¾‘ Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../store/todos.dart&#39;;class EditTodoButton extends StatefulWidget {  final todoIndex;  const EditTodoButton({Key key, this.todoIndex}) : super(key: key);  @override  _EditTodoButtonState createState() =&gt; _EditTodoButtonState();}class _EditTodoButtonState extends State&lt;EditTodoButton&gt; {  final _formKey = GlobalKey&lt;FormState&gt;();  @override  void dispose() {    _formKey?.currentState?.dispose();    super.dispose();  }  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(      builder: (context, todos, child) {        final todoIndex = widget.todoIndex;        final Todo todo = todos.items[todoIndex];        return IconButton(          color: Colors.blue,          icon: Icon(Icons.edit),          onPressed: () {            return showDialog(              context: context,              builder: (context) {                return SimpleDialog(                  title: Text(&#39;ç¼–è¾‘ Todo&#39;),                  contentPadding: const EdgeInsets.all(24.0),                  children: &lt;Widget&gt;[                    Form(                      key: _formKey,                      child: Column(                        children: &lt;Widget&gt;[                          TextFormField(                            autofocus: false,                            autovalidate: false,                            initialValue: todo.thing,                            decoration: InputDecoration(                              border: OutlineInputBorder(),                              labelText: &#39;è¾“å…¥ä½ æƒ³åšçš„äº‹&#39;,                            ),                            onChanged: (val) {                              todo.thing = val;                            },                            validator: (val) {                              if (val.isEmpty) {                                return &#39;æƒ³åšçš„äº‹ä¸èƒ½ä¸ºç©º&#39;;                              }                              return null;                            },                          ),                          SizedBox(height: 20),                          SwitchListTile(                            title: const Text(&#39;æ˜¯å¦å®Œæˆ&#39;),                            value: todo.finish,                            onChanged: (bool value) {                              todo.finish = value;                            },                          ),                          SizedBox(height: 20),                          Row(                            mainAxisAlignment: MainAxisAlignment.end,                            children: &lt;Widget&gt;[                              FlatButton(                                child: Text(&#39;å–æ¶ˆ&#39;),                                onPressed: () =&gt; Navigator.pop(context),                              ),                              RaisedButton(                                child: Text(                                  &#39;ç¡®å®š&#39;,                                  style: TextStyle(color: Colors.white),                                ),                                color: Theme.of(context).primaryColor,                                onPressed: () {                                  final isValid =                                      _formKey.currentState.validate();                                  if (!isValid) {                                    return;                                  }                                  Navigator.pop(context);                                  todos.editTodo(                                    todoIndex,                                    todo.thing,                                    todo.finish,                                  );                                },                              )                            ],                          ),                        ],                      ),                    ),                  ],                );              },            );          },        );      },    );  }}</code></pre><img src="https://github.com/xrr2016/flutter_provider_todos/raw/master/edit-todo.png" width="360" style="width:360px"><p>åˆ é™¤ Todo æŒ‰é’®</p><pre><code class="dart">import &#39;package:flutter/material.dart&#39;;import &#39;package:provider/provider.dart&#39;;import &#39;../store/todos.dart&#39;;class RemoveTodoButton extends StatelessWidget {  final int todoIndex;  const RemoveTodoButton({Key key, this.todoIndex}) : super(key: key);  @override  Widget build(BuildContext context) {    return Consumer&lt;Todos&gt;(builder: (_, todos, child) {      final Todo todo = todos.items[todoIndex];      return IconButton(        color: Colors.red,        icon: Icon(Icons.delete),        onPressed: () {          print(&#39;delete todo&#39;);          showDialog(            context: context,            builder: (BuildContext context) {              return AlertDialog(                title: Text(&#39;ç¡®è®¤åˆ é™¤ ${todo.thing}?&#39;),                actions: &lt;Widget&gt;[                  FlatButton(                    child: Text(                      &#39;å–æ¶ˆ&#39;,                      style: TextStyle(color: Colors.grey),                    ),                    onPressed: () =&gt; Navigator.pop(context),                  ),                  FlatButton(                    child: Text(&#39;ç¡®è®¤&#39;),                    onPressed: () {                      todos.removeTodo(todoIndex);                      Navigator.pop(context);                    },                  ),                ],              );            },          );        },      );    });  }}</code></pre><img src="https://github.com/xrr2016/flutter_provider_todos/raw/master/remove-todo.png" width="360" style="width:360px"><p>å¯ä»¥çœ‹åˆ°è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•éœ€è¦çš„åªæ˜¯å‘å¯¹åº”çš„éƒ¨ä»¶æ³¨å…¥è¿™ä¸ªæ•°æ®ï¼Œç„¶åä½¿ç”¨å°±å¯ä»¥äº†</p><h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>ä½¿ç”¨äº† provider åï¼Œæ•°æ®ä»¥åŠå¯¹ä¸€ä¸ª Todo çš„æ“ä½œéƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢äº†ï¼Œä¸ç”¨åœ¨å¤šä¸ªå±‚çº§é—´ä¼ é€’æ•°æ®ï¼Œå¹¶ä¸”åœ¨æ•°æ®å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°äº† UIï¼Œæ‰€ä»¥æ˜¯ååˆ†æœ‰å¿…è¦çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹å“ˆå¸Œè¡¨</title>
      <link href="/post/2019/09/08/dsa-hash/"/>
      <url>/post/2019/09/08/dsa-hash/</url>
      
        <content type="html"><![CDATA[<p>å“ˆå¸Œè¡¨æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥å¿«é€Ÿçš„æ’å…¥å’Œå–ç”¨ï¼Œä½†æ˜¯æŸ¥è¯¢æ•°æ®æ•ˆç‡ä½ä¸‹</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å“ˆå¸Œè¡¨æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥å¿«é€Ÿçš„æ’å…¥å’Œå–ç”¨ï¼Œä½†æ˜¯æŸ¥è¯¢æ•°æ®æ•ˆç‡ä½ä¸‹ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>åŸºäºæ•°ç»„å®ç°å“ˆå¸Œè¡¨ï¼Œæ•°ç»„çš„é•¿åº¦æ˜¯é¢„å…ˆè®¾å®šçš„ï¼Œæœ‰éœ€è¦æ˜¯å¢åŠ ã€‚æœ€å¸¸è§çš„æ˜¯å°†æ•°ç»„çš„é•¿åº¦è®¾ä¸ºä¸€ä¸ªè´¨æ•°</p><pre><code class="ts">class HashTable {  table = &lt;any&gt;[]  constructor() {    this.table = Array.from({      length: 137    })  }  // å°†å­—ç¬¦ä¸²çš„ ASCLL ç ç›¸åŠ å¯¹æ•°ç»„é•¿åº¦æ±‚ä½™  hash(data: string) {    let total = 0    for (let index = 0; index &lt; data.length; index++) {      total += data.charCodeAt(index)    }    return total % this.table.length  }  // æ›´ä¼˜çš„ hash æ–¹æ³•  betterHash(data: string) {    const H = 37    let total = 0    for (let index = 0; index &lt; data.length; index++) {      total += H * total + data.charCodeAt(index)    }    total = total % this.table.length    if (total &lt; 0) {      total += this.table.length - 1    }    return parseInt(total.toString())  }  // å­˜å‚¨æ•°æ®  put(key: string, data: any) {    const pos = this.betterHash(key)    this.table[pos] = data  }  // è·å–æ•°æ®  get(key: string) {    return this.table[this.betterHash(key)]  }  // æ˜¾ç¤ºæ•°æ®  show() {    for (let index = 0; index &lt; this.table.length; index++) {      const item = this.table[index]      if (item) {        console.log(`${index}: ${item}`)      }    }  }}</code></pre><p>æµ‹è¯•ä¸‹</p><pre><code class="ts">const hashTable = new HashTable()hashTable.put(&#39;David&#39;, &#39;David&#39;)hashTable.put(&#39;Jennifer&#39;, &#39;Jennifer&#39;)hashTable.put(&#39;Donnie&#39;, &#39;Donnie&#39;)hashTable.put(&#39;Raymond&#39;, &#39;Raymond&#39;)hashTable.put(&#39;Cynthia&#39;, &#39;Cynthia&#39;)hashTable.put(&#39;Mike&#39;, &#39;Mike&#39;)hashTable.put(&#39;Clayton&#39;, &#39;Clayton&#39;)hashTable.put(&#39;Danny&#39;, &#39;Danny&#39;)hashTable.put(&#39;Jonathan&#39;, &#39;Jonathan&#39;)hashTable.show()console.log(&#39;Jonathan: &#39;, hashTable.get(&#39;Jonathan&#39;))</code></pre><p>è¾“å‡º</p><pre><code class="ts">12: Jennifer22: Raymond55: Donnie58: Clayton80: Jonathan82: Mike103: Cynthia110: DannyJonathan:  Jonathan</code></pre><h2 id="ç¢°æ’å¤„ç†"><a href="#ç¢°æ’å¤„ç†" class="headerlink" title="ç¢°æ’å¤„ç†"></a>ç¢°æ’å¤„ç†</h2><p>å½“å“ˆå¸Œæ–¹æ³•å¯¹äºå¤šä¸ªè¾“å…¥äº§ç”Ÿäº†ç›¸åŒçš„è¾“å‡ºæ˜¯å°±ä¼šå‡ºç°ç¢°æ’ï¼Œä¸¤ç§å¯ä»¥è§£å†³é”®çš„ç¢°æ’é—®é¢˜å¼€é“¾æ³•ä»¥åŠçº¿æ€§æ¢æµ‹æ³•</p><p>å¼€é“¾æ³•</p><p>å¼€é“¾æ³•æŒ‡çš„æ˜¯åœ¨å®ç° hash è¡¨çš„åº•å±‚æ•°ç»„ä¸­ï¼Œæ¯ä¸ªæ•°ç»„åˆæ˜¯ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚å¦ä¸€ä¸ªæ•°ç»„ï¼Œè¿™æ ·å³ä½¿æœ‰ä¸¤ä¸ªé”® hash åçš„å€¼ç›¸åŒï¼Œä¾ç„¶è¢«ä¿å­˜åœ¨åŒæ ·çš„ä½ç½®ï¼Œä½†æ˜¯ä»–ä»¬åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­çš„ä½ç½®æ˜¯ä¸åŒçš„ã€‚</p><p>è¦å®ç°å¼€é“¾æ³•ï¼Œåœ¨åˆ›å»ºå­˜å‚¨é”®å€¼çš„æ•°ç»„æ—¶ï¼Œé€šè¿‡ä¸€ä¸ªå‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œç„¶åå°†è¯¥æ•°ç»„èµ‹å€¼ç»™ hash è¡¨é‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œåˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</p><p>çº¿æ€§æ¢æµ‹æ³•</p><p>çº¿æ€§æ¢æµ‹æ³•æŒ‡çš„æ˜¯å½“å‘ç”Ÿç¢°æ’æ—¶æ£€æŸ¥ hash è¡¨é‡Œçš„ä¸‹ä¸€ä¸ªä½ç½®æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºå°±å°†æ•°æ®å­˜å…¥è¯¥ä½ç½®ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™ç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºä½å­ä¸ºæ­¢ã€‚é€šå¸¸æ¥è¯´å¦‚æœæ•°ç»„çš„å¤§å°æ˜¯å¾…å­˜å‚¨æ•°æ®ä¸ªæ•°çš„ 1.5 å€æ—¶ï¼Œé‚£ä¹ˆç”¨å¼€é“¾æ³•ï¼›å¦‚æœæ•°ç»„çš„å¤§å°æ˜¯å¾…å­˜å‚¨çš„æ•°æ®ä¸¤å€ä»¥ä¸Šæ—¶ï¼Œé‚£ä¹ˆä½¿ç”¨çº¿æ€§æ¢æµ‹æ³•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Egg.js ä¸­ä½¿ç”¨ Redis ç¼“å­˜æå‡æ€§èƒ½</title>
      <link href="/post/2019/08/31/egg-redis-cache/"/>
      <url>/post/2019/08/31/egg-redis-cache/</url>
      
        <content type="html"><![CDATA[<p>Redis æ˜¯ä¸€æ¬¾å¼€æºçš„ï¼ŒåŸºäº BSD è®¸å¯çš„ï¼Œé«˜çº§é”®å€¼ç¼“å­˜å’Œå­˜å‚¨ç³»ç»Ÿã€‚Redis çš„é”®åŒ…æ‹¬ stringï¼Œhashï¼Œlistï¼Œsetï¼Œsorted setï¼Œbitmap å’Œ hyperloglogã€‚ä½ å¯ä»¥åœ¨è¿™äº›ç±»å‹ä¸Šé¢è¿è¡ŒåŸå­æ“ä½œï¼Œä¾‹å¦‚ï¼Œè¿½åŠ å­—ç¬¦ä¸²ï¼Œå¢åŠ å“ˆå¸Œä¸­çš„å€¼ï¼ŒåŠ å…¥ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨ï¼Œè®¡ç®—é›†åˆçš„äº¤é›†ã€å¹¶é›†å’Œå·®é›†ï¼Œæˆ–è€…æ˜¯ä»æœ‰åºé›†åˆä¸­è·å–æœ€é«˜æ’åçš„å…ƒç´ ã€‚</p><p>è¦åœ¨ Egg.js ä¸­ä½¿ç”¨ redisï¼Œåªéœ€è¦å®‰è£… redis å³å¯</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Redis æ˜¯ä¸€æ¬¾å¼€æºçš„ï¼ŒåŸºäº BSD è®¸å¯çš„ï¼Œé«˜çº§é”®å€¼ç¼“å­˜å’Œå­˜å‚¨ç³»ç»Ÿã€‚Redis çš„é”®åŒ…æ‹¬ stringï¼Œhashï¼Œlistï¼Œsetï¼Œsorted setï¼Œbitmap å’Œ hyperloglogã€‚ä½ å¯ä»¥åœ¨è¿™äº›ç±»å‹ä¸Šé¢è¿è¡ŒåŸå­æ“ä½œï¼Œä¾‹å¦‚ï¼Œè¿½åŠ å­—ç¬¦ä¸²ï¼Œå¢åŠ å“ˆå¸Œä¸­çš„å€¼ï¼ŒåŠ å…¥ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨ï¼Œè®¡ç®—é›†åˆçš„äº¤é›†ã€å¹¶é›†å’Œå·®é›†ï¼Œæˆ–è€…æ˜¯ä»æœ‰åºé›†åˆä¸­è·å–æœ€é«˜æ’åçš„å…ƒç´ ã€‚</p><p>è¦åœ¨ Egg.js ä¸­ä½¿ç”¨ redisï¼Œåªéœ€è¦å®‰è£… npm i redis å³å¯ã€‚</p><p>é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥éªŒè¯ä¸€ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå¯ä»¥è¿”å›å¼€æºä»“åº“åœ¨ Github ä¸Šçš„ star æ•°é‡çš„æ•°æ®æ¥å£ï¼Œæ¥æµ‹è¯•ä½¿ç”¨ Redis åå¸¦æ¥çš„æå‡ï¼Œä»£ç åœ°å€: <a href="https://github.com/xrr2016/egg-redis-test" target="_blank" rel="noopener">https://github.com/xrr2016/egg-redis-test</a></p><h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><p>é¦–å…ˆä½¿ç”¨ Egg.js åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p><pre><code class="bash">mkdir egg-redis-test &amp;&amp; cd egg-redis-testnpm init egg --type=simplenpm i</code></pre><p>å®‰è£… redis</p><pre><code class="sh">npm i redis</code></pre><p>å¯åŠ¨é¡¹ç›®</p><pre><code class="bash">npm run devopen http://localhost:7001</code></pre><p>å…ˆåˆ›å»º controller å’Œ service ç›®å½•ï¼Œç”¨æ¥æ”¾å¤„ç†è¯·æ±‚å’Œè¿”å›æ•°æ®çš„æ–¹æ³•ï¼Œå®Œæˆåçš„é¡¹ç›®ç›®å½•ä¸º</p><p><img src="/images/egg-folder.jpg" alt="folder"></p><p>ä¿®æ”¹ router.js æ–‡ä»¶ï¼Œæ·»åŠ è·¯ç”±ï¼Œç„¶ååœ¨ controller/home.js æ–‡ä»¶å®ç° stars æ–¹æ³•</p><pre><code class="js">&#39;use strict&#39;module.exports = app =&gt; {  const { router, controller } = app  router.get(&#39;/&#39;, controller.home.index)  router.get(&#39;/stars&#39;, controller.home.stars)}</code></pre><p>ä¿®æ”¹ controller/home.js æ–‡ä»¶ï¼Œæ¥æ”¶è¯·æ±‚ä¼ è¿‡æ¥çš„ query å‚æ•°å‘ä¸‹ä¼ ç»™ stars service è¿”å›ç»“æœ</p><pre><code class="js">&#39;use strict&#39;const Controller = require(&#39;egg&#39;).Controllerclass HomeController extends Controller {  async stars() {    const { ctx, service } = this    const { owner, name } = ctx.query    ctx.body = await service.home.stars(owner, name)  }}module.exports = HomeController</code></pre><p>åœ¨ service/home.js é‡Œå®ç° stars æ–¹æ³•ï¼Œéœ€è¦åšçš„å°±æ˜¯é€šè¿‡ controller ä¼ è¿‡æ¥çš„ owner, name å‚æ•°ï¼Œè¯·æ±‚ Github çš„æ¥å£ï¼Œè¿”å›æ•°æ®ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œè¯·æ±‚çš„æ˜¯ Github çš„ graphql æ¥å£ï¼Œæ‰€ä»¥é¦–å…ˆéœ€è¦åœ¨ Github ä¸Šæ–°å»ºä¸€ä¸ª tokenï¼Œtoken ä¸èƒ½ç›´æ¥å†™åœ¨ä»£ç é‡Œé¢ï¼Œéœ€è¦å°† token æ”¾åœ¨ç¯å¢ƒå˜é‡é‡Œï¼Œå¦åˆ™ä»£ç æäº¤åˆ° Github åä¼šå¤±æ•ˆã€‚</p><p><img src="/images/redis-token.jpg" alt="token"></p><p>åˆ›å»º token åä½¿ç”¨ <a href="https://github.com/motdotla/dotenv#readme" target="_blank" rel="noopener">dotenv</a> ä¿å­˜ç¯å¢ƒå˜é‡ï¼Œå…ˆå®‰è£…ç„¶ååœ¨é¡¹ç›®ç›®å½•åˆ›å»ºä¸€ä¸ª .env æ–‡ä»¶</p><pre><code class="bash">npm i dotenv</code></pre><p><img src="/images/env.jpg" alt="token"></p><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨ egg.js è‡ªå¸¦çš„ crul æ–¹æ³•å‘ Github æ¥å£å‘é€ post è¯·æ±‚ï¼Œä»£ç å¦‚ä¸‹</p><pre><code class="js">&#39;use strict&#39;require(&#39;dotenv&#39;).config()const Service = require(&#39;egg&#39;).Serviceclass HomeService extends Service {  async stars(owner, name) {    function setResponse(name, stars) {      return { msg: `${name} has ${stars} stars.` }    }    const query = `      query {        repository(owner: ${owner}, name: ${name}) {          stargazers {            totalCount          }        }      }    `    const result = await this.ctx.curl(&#39;https://api.github.com/graphql&#39;, {      method: &#39;POST&#39;,      dataType: &#39;json&#39;,      headers: {        Authorization: `token ${process.env.TOKEN}`      },      data: JSON.stringify({ query }),      timeout: 10000    })    const data = result.data.data    return setResponse(name, data.repository.stargazers.totalCount)  }}module.exports = HomeService</code></pre><p>ä½¿ç”¨ postman æµ‹è¯•ä¸€ä¸‹æ¥å£</p><p><img src="/images/redis-before.jpg" alt="folder"></p><p>è€—æ—¶å¹³å‡ 1 ç§’å·¦å³ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨ Redis æ·»åŠ ç¼“å­˜ï¼Œé¦–å…ˆéœ€è¦åœ¨æœ¬åœ°å®‰è£… Redisï¼Œå‚è€ƒ <a href="https://redis.io/download" target="_blank" rel="noopener">Redis download</a>ï¼ŒMac å¯ä»¥ç›´æ¥ä½¿ç”¨ homebrew å®‰è£…</p><p>å®‰è£…</p><pre><code class="bash">brew install redis</code></pre><p>å¯åŠ¨</p><pre><code class="bash">redis-server /usr/local/etc/redis.conf</code></pre><p>è¿›å…¥ redis å‘½ä»¤è¡Œ</p><pre><code class="bash">redis-cli</code></pre><p>ç¼“å­˜çš„ä¸»è¦é€»è¾‘å°±æ˜¯ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚å®Œå¾—åˆ° Github çš„æ•°æ®å°†æ•°æ®æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œå†æ¬¡è¯·æ±‚çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œä¹Ÿéœ€è¦ç»™ç¼“å­˜è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œ<br>éœ€è¦ä»ç¯å¢ƒå˜é‡ä¸­æ‹¿åˆ° tokenï¼Œpost è¯·æ±‚çš„æ•°æ®è¦ç”¨ JSON.stringify æ–¹æ³•ä¼ ç»™ Github æ¥å£ï¼Œå¦åˆ™å‡ºç°è§£æé”™è¯¯ï¼Œä»£ç å¦‚ä¸‹</p><pre><code class="js">&#39;use strict&#39;require(&#39;dotenv&#39;).config()const redis = require(&#39;redis&#39;)const { promisify } = require(&#39;util&#39;)const Service = require(&#39;egg&#39;).Serviceconst REDIS_PORT = process.env.PORT || 6379const client = redis.createClient(REDIS_PORT)const getAsync = promisify(client.get).bind(client)const setexAsync = promisify(client.setex).bind(client)class HomeService extends Service {  async stars(owner, name) {    const key = `${owner}/${name}`    const stars = await getAsync(key)    function setResponse(name, stars) {      return { msg: `${name} has ${stars} stars.` }    }    if (stars !== null) {      return setResponse(name, stars)    }    const query = `      query {        repository(owner: ${owner}, name: ${name}) {          stargazers {            totalCount          }        }      }    `    const result = await this.ctx.curl(&#39;https://api.github.com/graphql&#39;, {      method: &#39;POST&#39;,      dataType: &#39;json&#39;,      headers: {        Authorization: `token ${process.env.TOKEN}`      },      data: JSON.stringify({ query }),      timeout: 10000    })    const data = result.data.data    await setexAsync(key, 10, data.repository.stargazers.totalCount)    return setResponse(name, data.repository.stargazers.totalCount)  }}module.exports = HomeService</code></pre><p>å†æ¬¡æµ‹è¯•ï¼Œé¦–å…ˆæŠŠ Redis é‡Œé¢çš„ç¼“å­˜æ¸…ç©ºï¼Œä½¿ç”¨ Redis çš„å‘½ä»¤è¡Œè¿è¡Œ</p><pre><code class="bash">FLUSHALL</code></pre><p>å‘é€è¯·æ±‚ï¼Œç¬¬ä¸€æ¬¡çš„è€—æ—¶è¿˜æ˜¯ä¸€ç§’å¤šï¼Œç„¶ååœ¨å¤±æ•ˆæ—¶é—´å†…è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨ç¼“å­˜çš„æ•°æ®åè€—æ—¶å¤§å¤§å‡å°‘äº†ï¼Œæ€§èƒ½æå‡æ•ˆæœæ˜¾è‘—ï¼Œå®é™…é¡¹ç›®å¯ä»¥è®¾ç½®ä¸€ä¸ªè¾ƒé•¿çš„ç¼“å­˜å¤±æ•ˆæ—¶é—´</p><p><img src="/images/redis-after.jpg" alt="folder"></p><p>å½“ç„¶ç¼“å­˜è¿‡æœŸååˆè¦é‡æ–°å‘ Github å‘é€è¯·æ±‚äº†ï¼Œå› ä¸º Redis å·²ç»æŠŠæ•°æ®åˆ é™¤äº†</p><p><img src="/images/redis-vue.jpg" alt="folder"></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://redis.io/documentation" target="_blank" rel="noopener">Redis documentation</a></p><p><a href="https://github.com/noderedis/node_redis" target="_blank" rel="noopener">Node Redis</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹å­—å…¸</title>
      <link href="/post/2019/08/28/dsa-dictionary/"/>
      <url>/post/2019/08/28/dsa-dictionary/</url>
      
        <content type="html"><![CDATA[<p>å­—å…¸æ˜¯ä¸€ç§ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œé”®ç”¨æ¥æŸ¥æ‰¾ï¼Œå€¼ç”¨æ¥ä¿å­˜æ•°æ®</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å­—å…¸æ˜¯ä¸€ç§ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨æ•°æ®çš„æ•°æ®ç»“æ„ï¼Œé”®ç”¨æ¥æŸ¥æ‰¾ï¼Œå€¼ç”¨æ¥ä¿å­˜æ•°æ®</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><pre><code class="ts">class Dictionary {  data: any[] = []  // æ·»åŠ å…ƒç´   add(key: any, value: any) {    this.data[key] = value  }  // æŸ¥æ‰¾å…ƒç´   find(key: any) {    return this.data[key]  }  // åˆ é™¤å…ƒç´   remove(key: any) {    delete this.data[key]  }  // æ˜¾ç¤ºå…ƒç´   show() {    Object.entries(this.data).forEach(item =&gt; {      console.log(&#39;key:&#39;, item[0], &#39; value:&#39;, item[1])    })  }  // å…ƒç´ ä¸ªæ•°  count() {    let n = 0    Object.keys(this.data).forEach(_ =&gt; {      n += 1    })    return n  }  // æ¸…ç©ºå…ƒç´   clear() {    Object.keys(this.data).forEach((key: any) =&gt; {      delete this.data[key]    })  }}</code></pre><p>æµ‹è¯•</p><pre><code class="ts">const dictionary = new Dictionary()dictionary.add(&#39;a&#39;, &#39;a&#39;)dictionary.add(&#39;b&#39;, &#39;b&#39;)dictionary.add(&#39;c&#39;, &#39;c&#39;)dictionary.add(&#39;d&#39;, &#39;d&#39;)dictionary.add(&#39;e&#39;, &#39;e&#39;)dictionary.show()console.log(&#39;count: &#39;, dictionary.count())dictionary.clear()console.log(&#39;clear: &#39;, dictionary.count())</code></pre><p>è¾“å‡º</p><pre><code class="json">key: a  value: akey: b  value: bkey: c  value: ckey: d  value: dkey: e  value: ecount:  5clear:  0</code></pre><p>æ’åºå­—å…¸çš„è¾“å‡ºï¼Œéœ€è¦é‡æ–°å®šä¹‰ show æ–¹æ³•</p><pre><code class="ts">// æ˜¾ç¤ºå…ƒç´ show() {  Object.entries(this.data)    .sort()    .forEach(item =&gt; {      console.log(&#39;key:&#39;, item[0], &#39; value:&#39;, item[1])    })}</code></pre><p>æµ‹è¯•ä¸€ä¸‹</p><pre><code class="ts">const dictionary = new Dictionary()dictionary.add(&#39;c&#39;, &#39;c&#39;)dictionary.add(&#39;a&#39;, &#39;a&#39;)dictionary.add(&#39;d&#39;, &#39;d&#39;)dictionary.add(&#39;e&#39;, &#39;e&#39;)dictionary.add(&#39;b&#39;, &#39;b&#39;)dictionary.show()</code></pre><p>è¾“å‡º</p><pre><code class="json">key: a  value: akey: b  value: bkey: c  value: ckey: d  value: dkey: e  value: e</code></pre><p>ä½¿ç”¨ Object.keys æ–¹æ³•æ‹¿åˆ°å­—å…¸çš„ keys æ•°ç»„åï¼Œåœ¨ç”¨ sort æ–¹æ³•å°±å¯ä»¥æ˜¾ç¤ºæœ‰åºçš„å­—å…¸è¾“å‡ºäº†</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é“¾è¡¨</title>
      <link href="/post/2019/08/25/dsa-linklist/"/>
      <url>/post/2019/08/25/dsa-linklist/</url>
      
        <content type="html"><![CDATA[<p>é“¾è¡¨æ˜¯ä¸€ç»„èŠ‚ç‚¹ç»„æˆçš„é›†åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘å®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‡å‘èŠ‚ç‚¹çš„å¼•ç”¨å«åšé“¾</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é“¾è¡¨æ˜¯ä¸€ç»„èŠ‚ç‚¹ç»„æˆçš„é›†åˆï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨æŒ‡å‘å®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŒ‡å‘èŠ‚ç‚¹çš„å¼•ç”¨å«åšé“¾ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ä½¿ç”¨ LinkedListNode ç±»æ¥è¡¨ç¤ºèŠ‚ç‚¹ï¼Œä½¿ç”¨ LinkedList æ¥è¡¨ç¤ºé“¾è¡¨</p><pre><code class="ts">class LinkedListNode {  element: any  next: LinkedListNode  constructor(element: any) {    this.element = element    this.next = null  }}class LinkedList {  // å¤´èŠ‚ç‚¹  head: LinkedListNode  constructor() {    this.head = new LinkedListNode(&#39;head&#39;)  }  // æŸ¥æ‰¾  find(element: any) {    let currentNode: LinkedListNode = this.head    while (currentNode.element !== element) {      currentNode = currentNode.next    }    return currentNode  }  // æ’å…¥  insert(element: any, item: any) {    let newNode = new LinkedListNode(element)    let currentNode = this.find(item)    newNode.next = currentNode.next    currentNode.next = newNode  }  // ç§»é™¤  remove(element: any) {    let prevNode = this.findPrevNode(element)    if (!(prevNode.next === null)) {      prevNode.next = prevNode.next.next    }  }  //  findPrevNode(element: any) {    let currentNode = this.head    while (      !(currentNode.next === null) &amp;&amp;      currentNode.next.element !== element    ) {      currentNode = currentNode.next    }    return currentNode  }  // æ˜¾ç¤º  display() {    let currentNode = this.head    while (!(currentNode.next === null)) {      console.log(currentNode.next.element)      currentNode = currentNode.next    }  }}</code></pre><p>æµ‹è¯•</p><pre><code class="ts">const foods = new LinkedList()foods.insert(&#39;eggs&#39;, &#39;head&#39;)foods.insert(&#39;apple&#39;, &#39;eggs&#39;)foods.insert(&#39;bread&#39;, &#39;apple&#39;)foods.insert(&#39;chese&#39;, &#39;bread&#39;)foods.insert(&#39;rice&#39;, &#39;chese&#39;)foods.display()console.log(&#39;------------&#39;)foods.remove(&#39;bread&#39;)foods.display()</code></pre><p>è¾“å‡º</p><pre><code class="json">eggsapplebreadcheserice------------eggsapplecheserice</code></pre><h2 id="åŒå‘é“¾è¡¨"><a href="#åŒå‘é“¾è¡¨" class="headerlink" title="åŒå‘é“¾è¡¨"></a>åŒå‘é“¾è¡¨</h2><p>è¦å®ç°åŒå‘é“¾è¡¨é¦–å…ˆè¦ä¸º LinkedListNode ç±»å¢åŠ ä¸€ä¸ª prev å±æ€§</p><pre><code class="ts">class LinkedListNode {  element: any  prev: LinkedListNode  next: LinkedListNode  constructor(element: any) {    this.element = element    this.prev = null    this.next = null  }}</code></pre><p>ç„¶åä¿®æ”¹ LinkedList ç±»çš„ insert, remove æ–¹æ³•</p><pre><code class="ts">class LinkedList {  // å¤´èŠ‚ç‚¹  head: LinkedListNode = new LinkedListNode(&#39;head&#39;)  // æŸ¥æ‰¾  find(element: any) {    let currentNode = this.head    while (currentNode.element !== element) {      currentNode = currentNode.next    }    return currentNode  }  // æ‰¾åˆ°æœ€åçš„èŠ‚ç‚¹  findLast() {    let currentNode = this.head    while (currentNode.next !== null) {      currentNode = currentNode.next    }    return currentNode  }  // æ’å…¥  insert(element: any, item: any) {    let newNode = new LinkedListNode(element)    let currentNode = this.find(item)    newNode.prev = currentNode    newNode.next = currentNode.next    currentNode.next = newNode  }  // ç§»é™¤  remove(element: any) {    let currentNode = this.find(element)    if (currentNode.next !== null) {      currentNode.prev.next = currentNode.next      currentNode.next.prev = currentNode.prev      currentNode.next = null      currentNode.prev = null    }  }  // æ˜¾ç¤º  display() {    let currentNode = this.head    while (!(currentNode.next === null)) {      console.log(currentNode.next.element)      currentNode = currentNode.next    }  }  // å€’å™æ˜¾ç¤º  displayReverse() {    let currentNode = this.findLast()    while (currentNode.prev !== null) {      console.log(currentNode.element)      currentNode = currentNode.prev    }  }}</code></pre><p>æµ‹è¯•ä¸€ä¸‹</p><pre><code class="ts">foods.insert(&#39;eggs&#39;, &#39;head&#39;)foods.insert(&#39;apple&#39;, &#39;eggs&#39;)foods.insert(&#39;bread&#39;, &#39;apple&#39;)foods.insert(&#39;chese&#39;, &#39;bread&#39;)foods.insert(&#39;rice&#39;, &#39;chese&#39;)foods.display()console.log(&#39;------------&#39;)foods.remove(&#39;bread&#39;)foods.display()console.log(&#39;------------&#39;)foods.displayReverse()</code></pre><p>è¾“å‡º</p><pre><code class="json">eggsapplebreadcheserice------------eggsapplecheserice------------ricecheseappleeggs</code></pre><h2 id="å¾ªç¯é“¾è¡¨"><a href="#å¾ªç¯é“¾è¡¨" class="headerlink" title="å¾ªç¯é“¾è¡¨"></a>å¾ªç¯é“¾è¡¨</h2><p>åˆ›å»ºå¾ªç¯é“¾è¡¨éœ€è¦è®©å®ƒçš„å¤´èŠ‚ç‚¹çš„ next å±æ€§æŒ‡å‘æœ¬èº«ï¼Œ ç„¶åä¿®æ”¹ display æ–¹æ³•</p><pre><code class="ts">this.head.next = this.head // æ˜¾ç¤ºdisplay() {  let currentNode = this.head  while (currentNode.next !== null &amp;&amp; currentNode.next.element !== &#39;head&#39;) {    console.log(currentNode.next.element)    currentNode = currentNode.next  }}</code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é“¾è¡¨æ˜¯ä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå¦‚æœå‘ç°æ•°ç»„åœ¨ä½¿ç”¨æ—¶å¾ˆæ…¢ï¼Œå°±å¯ä»¥è€ƒè™‘ç”¨é“¾è¡¨æ›¿ä»£å®ƒï¼Œä½†æ˜¯å¦‚æœéœ€è¦å¯¹æ•°æ®éšæœºè®¿é—®ï¼Œæ•°ç»„ä»»ç„¶æ˜¯æ›´ä¼˜çš„é€‰æ‹©</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•åœ¨ Egg.js ä¸­ä½¿ç”¨ Sequelize çš„äº‹åŠ¡ Transaction</title>
      <link href="/post/2019/08/22/egg-sequelize-transaction/"/>
      <url>/post/2019/08/22/egg-sequelize-transaction/</url>
      
        <content type="html"><![CDATA[<p>åœ¨æŸ¥äº†å‡ é <a href="https://sequelize.org/" target="_blank" rel="noopener">Sequelize</a> å…³äº <a href="https://sequelize.org/master/manual/transactions.html" target="_blank" rel="noopener">Transactions</a> çš„æ–‡æ¡£ï¼Œçœ‹äº†å¤§ä½¬åŒäº‹çš„ä»£ç åï¼Œæˆ‘ç»ˆäºå¼„æ‡‚æ€ä¹ˆåœ¨ egg.js æ¡†æ¶é‡Œé¢ä½¿ç”¨äº‹åŠ¡äº† ğŸ˜“</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨æŸ¥äº†å‡ é <a href="https://sequelize.org/" target="_blank" rel="noopener">Sequelize</a> å…³äº <a href="https://sequelize.org/master/manual/transactions.html" target="_blank" rel="noopener">Transactions</a> çš„æ–‡æ¡£ï¼Œçœ‹äº†å¤§ä½¬åŒäº‹çš„ä»£ç åï¼Œæˆ‘ç»ˆäºå¼„æ‡‚æ€ä¹ˆåœ¨ egg.js æ¡†æ¶é‡Œé¢ä½¿ç”¨äº‹åŠ¡äº† ğŸ˜“</p><h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>Sequelize å…³äºäº‹åŠ¡çš„ç¤ºä¾‹ä»£ç æ˜¯è¿™æ ·æ»´ï¼Œé¦–å…ˆé€šè¿‡ <code>sequelize.transaction</code> æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªäº‹åŠ¡åï¼ŒæŠŠè¿™ä¸ªäº‹åŠ¡ä¼ ç»™éœ€è¦è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå¦‚æ–°å¢ç”¨æˆ·ï¼Œç»™ç”¨æˆ·åŠ å±æ€§ç­‰ï¼Œä½†æ˜¯çœ‹ä¸Šå»ä»£ç æ¯”è¾ƒéš¾æ‡‚</p><pre><code class="js">return sequelize.transaction().then(t =&gt; {  return User.create(    {      firstName: &#39;Bart&#39;,      lastName: &#39;Simpson&#39;    },    { transaction: t }  )    .then(user =&gt; {      return user.addSibling(        {          firstName: &#39;Lisa&#39;,          lastName: &#39;Simpson&#39;        },        { transaction: t }      )    })    .then(() =&gt; {      return t.commit()    })    .catch(err =&gt; {      return t.rollback()    })})</code></pre><p>å®é™…ä½¿ç”¨çš„è¯éœ€è¦ç”¨ <code>async/await</code> è¯­æ³•è®©ä»£ç çœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ä¸€ç‚¹ï¼Œåœ¨ egg.js ä¸­ä½¿ç”¨çš„ç¤ºä¾‹å¦‚ä¸‹ï¼Œé¦–å…ˆéœ€è¦ç”¨å½“å‰ä¸Šä¸‹æ–‡ä¸­çš„ model å¯¹è±¡ï¼ˆå°±æ˜¯å¯¹æ•°æ®è¡¨çš„æ˜ å°„å¯¹è±¡ï¼‰åˆ›å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶ååœ¨ <code>try/catch</code> ä¸­æ‰§è¡Œæ‰€è¦è¿›è¡Œçš„æ“ä½œï¼Œå¦‚æœæ“ä½œæŠ›å‡ºäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šå›æ»š</p><pre><code class="js">const transaction = await this.ctx.model.transaction()try {  await this.ctx.model.create(this.ctx.request.body, { transaction })  await this.ctx.service.user.find(userId, { transaction });  await this.ctx.service.product.destory(productId, { transaction });  ...  await transaction.commit()} catch (err) {  await transaction.rollback()  throw err}</code></pre><p>ç”¨äº† <code>async/await</code> è¯­æ³•ï¼Œä»£ç ç¡®å®æ¸…æ™°äº†å¾ˆå¤š</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Egg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹é˜Ÿåˆ—</title>
      <link href="/post/2019/08/18/das-queue/"/>
      <url>/post/2019/08/18/das-queue/</url>
      
        <content type="html"><![CDATA[<p>é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œåªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºï¼Œå¯ä»¥å°†é˜Ÿåˆ—æƒ³è±¡æˆåœ¨é¥­åº—æ’é˜Ÿå–é¤çš„äººç¾¤ï¼Œåœ¨é˜Ÿä¼å‰é¢çš„å…ˆå–é¤ï¼Œåæ¥çš„äººåå–é¤</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é˜Ÿåˆ—æ˜¯ä¸€ç§åˆ—è¡¨ï¼Œåªèƒ½åœ¨é˜Ÿå°¾æ’å…¥å…ƒç´ ï¼Œåœ¨é˜Ÿé¦–åˆ é™¤å…ƒç´ ã€‚é˜Ÿåˆ—ç”¨äºå­˜å‚¨æŒ‰é¡ºåºæ’åˆ—çš„çš„æ•°æ®ï¼Œå…ˆè¿›å…ˆå‡ºï¼Œå¯ä»¥å°†é˜Ÿåˆ—æƒ³è±¡æˆåœ¨é¥­åº—æ’é˜Ÿå–é¤çš„äººç¾¤ï¼Œåœ¨é˜Ÿä¼å‰é¢çš„å…ˆå–é¤ï¼Œåæ¥çš„äººåå–é¤ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç”¨ TypeScript å®ç°é˜Ÿåˆ—</p><pre><code class="ts">class Queue {  data: Array&lt;any&gt; = []  // å…¥é˜Ÿ  enqueue(element: any) {    this.data.push(element)  }  // å‡ºé˜Ÿ  dequeue() {    return this.data.shift()  }  // è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´   front() {    return this.data[0]  }  // è¿”å›æœ€åä¸€ä¸ªå…ƒç´   back() {    return this.data[this.data.length - 1]  }  // æ˜¾ç¤ºé˜Ÿåˆ—ä¸­æ‰€æœ‰å…ƒç´   toString() {    return this.data.map(ele =&gt; `${ele}`).toString()  }  // åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º  empty() {    if (this.data.length) {      return false    }    return true  }}</code></pre><p>æµ‹è¯•ä¸€ä¸‹</p><pre><code class="ts">const queue = new Queue()queue.enqueue(&#39;a&#39;)queue.enqueue(&#39;b&#39;)queue.enqueue(&#39;c&#39;)queue.enqueue(&#39;d&#39;)queue.enqueue(&#39;e&#39;)console.log(&#39;queue: &#39;, queue)console.log(&#39;front: &#39;, queue.front())console.log(&#39;back: &#39;, queue.back())queue.dequeue()queue.dequeue()queue.dequeue()queue.dequeue()console.log(&#39;queue: &#39;, queue)console.log(&#39;queue: &#39;, queue.empty())</code></pre><p>è¾“å‡º</p><pre><code class="json">queue:  Queue { data: [ &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;, &#39;e&#39; ] }front: aback:  equeue:  Queue { data: [ &#39;e&#39; ] }queue:  false</code></pre><h2 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h2><p>ä¼˜å…ˆé˜Ÿåˆ—æŒ‡çš„æ˜¯åœ¨åˆ é™¤é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ—¶å€™éœ€è¦è€ƒè™‘å…ƒç´ çš„ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„å…ƒç´ å…ˆå‡ºé˜Ÿï¼Œä¼˜å…ˆçº§ä½çš„åå‡ºé˜Ÿï¼ŒåŒç­‰ä¼˜å…ˆçº§çš„å…ƒç´ æŒ‰åŸæœ¬çš„é¡ºåºå‡ºé˜Ÿã€‚</p><p>é¦–å…ˆéœ€è¦ä¸€ä¸ªå…·æœ‰ä¼˜å…ˆçº§çš„å…ƒç´ </p><pre><code class="ts">interface Element {  data: any  code: number // code è¡¨ç¤ºä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œ0 ä¸ºæœ€é«˜}</code></pre><p>ç„¶åéœ€è¦ä¿®æ”¹ä¸‹é˜Ÿåˆ—çš„å‡ºé˜Ÿæ–¹æ³•ï¼Œæ‰¾åˆ°é˜Ÿåˆ—ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œç„¶åå°†å…¶ç§»é™¤é˜Ÿåˆ—</p><pre><code class="ts">dequeue() {  const codes = this.data.map(ele =&gt; ele.code)  const minCode = Math.min.apply(null, codes)  const index = this.data.findIndex(ele =&gt; ele.code === minCode)  return this.data.splice(index, 1)}</code></pre><p>æµ‹è¯•ä¸€ä¸‹</p><pre><code class="ts">const queue = new Queue()queue.enqueue({ data: &#39;a&#39;, code: 5 })queue.enqueue({ data: &#39;b&#39;, code: 4 })queue.enqueue({ data: &#39;c&#39;, code: 3 })queue.enqueue({ data: &#39;d&#39;, code: 2 })queue.enqueue({ data: &#39;e&#39;, code: 1 })console.log(&#39;queue: &#39;, queue)queue.dequeue()queue.dequeue()queue.dequeue()queue.dequeue()console.log(&#39;queue: &#39;, queue)</code></pre><p>è¾“å‡º</p><pre><code class="json">queue:  Queue {  data:   [     { data: &#39;a&#39;, code: 5 },     { data: &#39;b&#39;, code: 4 },     { data: &#39;c&#39;, code: 3 },     { data: &#39;d&#39;, code: 2 },     { data: &#39;e&#39;, code: 1 }  ]}queue:  Queue {  data:    [      { data: &#39;a&#39;, code: 5 },      { data: &#39;b&#39;, code: 4 }    ]}</code></pre><p>å¯ä»¥çœ‹åˆ°é˜Ÿåˆ—ä¸­å‰©ä¸‹äº†ä¼˜å…ˆçº§è¾ƒä½çš„å…ƒç´ </p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº Flutter çš„å®‰å“æ‰“åŒ…</title>
      <link href="/post/2019/08/14/flutter-android-build/"/>
      <url>/post/2019/08/14/flutter-android-build/</url>
      
        <content type="html"><![CDATA[<p>Flutter åœ¨æ‰“åŒ…å®‰å“åº”ç”¨æ—¶æœ‰ä¸¤ç§æ–¹å¼ <code>flutter build apk</code> å’Œ <code>flutter build appbundle</code>ï¼Œæœ¬æ–‡è¯´ä¸‹è¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>Flutter åœ¨æ‰“åŒ…å®‰å“åº”ç”¨æ—¶æœ‰ä¸¤ç§æ–¹å¼ <code>flutter build apk</code> å’Œ <code>flutter build appbundle</code>ï¼Œæœ¬æ–‡è¯´ä¸‹è¿™ä¸¤ç§æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p><h2 id="Appbundle"><a href="#Appbundle" class="headerlink" title="Appbundle"></a>Appbundle</h2><p>Android App Bundle æ˜¯ä¸Šä¼ åˆ° Google Play ç”¨ä»¥æ”¯æŒ Dynamic Delivery çš„æ–‡ä»¶ï¼Œæ‰©å±•åä¸º .aabï¼Œä¸€ä¸ª bundle åŒ…å«æ‰€æœ‰åº”ç”¨çš„å·²ç¼–è¯‘ä»£ç å’Œèµ„æºï¼Œä½†æ˜¯è¿˜æ²¡æœ‰ç”Ÿæˆ apk å’Œ Google Play çš„ç­¾åã€‚</p><p>Google Play çš„æ–°åº”ç”¨æœåŠ¡æ¨¡å¼ç§°ä¸º Dynamic Deliveryï¼ˆåŠ¨æ€ä¼ é€ï¼‰ï¼Œä½¿ç”¨ä½ çš„åº”ç”¨åŒ…ä¸ºæ¯ä¸ªç”¨æˆ·çš„è®¾å¤‡é…ç½®ç”Ÿæˆå¹¶æä¾›ä¼˜åŒ–çš„ APKï¼Œå› æ­¤ç”¨æˆ·åªä¸‹è½½è¿è¡Œåº”ç”¨æ‰€éœ€çš„ä»£ç å’Œèµ„æºã€‚å¼€å‘è€…ä¸å†éœ€è¦æ„å»ºï¼Œç­¾åå’Œç®¡ç†å¤šä¸ª APK æ¥æ”¯æŒä¸åŒçš„è®¾å¤‡ï¼Œç”¨æˆ·å¯ä»¥è·å¾—æ›´å°ï¼Œæ›´ä¼˜åŒ–çš„ä¸‹è½½ã€‚</p><p><a href="https://developer.android.com/guide/app-bundle" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="Apk"><a href="#Apk" class="headerlink" title="Apk"></a>Apk</h2><p>å¦‚æœåº”ç”¨ä¸å‘å¸ƒåˆ° Google Playï¼Œåˆ™éœ€è¦å‘å¸ƒå¤šä¸ª apkï¼Œä½†å¿…é¡»è‡ªå·±æ„å»ºï¼Œç­¾åå’Œç®¡ç†æ¯ä¸ª apkã€‚</p><p>é€šå¸¸æ„å»ºä¸€ä¸ª apk ç”¨ä»¥æ”¯æŒæ‰€æœ‰ç›®æ ‡è®¾å¤‡ï¼Œä½†ç”±äºéœ€è¦æ”¯æŒå¤šä¸ªå±å¹•å¯†åº¦æˆ–åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆABIï¼‰çš„æ–‡ä»¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´éå¸¸å¤§çš„ apkï¼Œå‡å°‘ apk å¤§å°çš„ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºå¤šä¸ª apkï¼Œåœ¨æ‰§è¡Œ <code>flutter build apk</code> çš„æ—¶å€™å¯ä»¥æ·»åŠ æ„å»ºå‚æ•° <code>--target-platform android-arm,android-arm64 --split-per-abi</code>ï¼Œ è¿™æ ·æ„å»ºå‡ºæ¥çš„ apk åŒ…å«ç‰¹å®šå±å¹•å¯†åº¦æˆ– ABI çš„æ–‡ä»¶ã€‚</p><p><a href="https://developer.android.com/studio/build/configure-apk-splits" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹æ ˆ</title>
      <link href="/post/2019/08/10/dsa-stack/"/>
      <url>/post/2019/08/10/dsa-stack/</url>
      
        <content type="html"><![CDATA[<p>æ ˆæ˜¯ä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºå®ƒåªèƒ½åœ¨æ ˆé¡¶æ·»åŠ æˆ–åˆ é™¤ï¼Œè¿™æ ·çš„æ“ä½œå¾ˆå¿«ï¼Œå®ƒæ˜¯è¢«ç§°ä¹‹ä¸ºåå…¥å…ˆå‡ºï¼ˆLIFOï¼Œlast in first outï¼‰çš„æ•°æ®ç»“æ„ã€‚å¯ä»¥å°†æ ˆæƒ³è±¡æˆä¸€å è£…èœçš„ç›˜å­ï¼Œç”¨çš„æ—¶å€™å…ˆæ‹¿æœ€ä¸Šé¢çš„ï¼Œæ´—å¥½çš„ç›˜å­åˆä¼šæ”¾åˆ°æœ€ä¸Šé¢</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æ ˆæ˜¯ä¸€ç§é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼Œå› ä¸ºå®ƒåªèƒ½åœ¨æ ˆé¡¶æ·»åŠ æˆ–åˆ é™¤ï¼Œè¿™æ ·çš„æ“ä½œå¾ˆå¿«ï¼Œå®ƒæ˜¯è¢«ç§°ä¹‹ä¸ºåå…¥å…ˆå‡ºï¼ˆLIFOï¼Œlast in first outï¼‰çš„æ•°æ®ç»“æ„ã€‚å¯ä»¥å°†æ ˆæƒ³è±¡æˆä¸€å è£…èœçš„ç›˜å­ï¼Œç”¨çš„æ—¶å€™å…ˆæ‹¿æœ€ä¸Šé¢çš„ï¼Œæ´—å¥½çš„ç›˜å­åˆä¼šæ”¾åˆ°æœ€ä¸Šé¢ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç”¨ TypeScript å®ç°æ ˆ</p><pre><code class="ts">class Stack {  top: number = 0  data: Array&lt;any&gt; = []  get length() {    return this.top  }  // å‘æ ˆä¸­å‹å…¥ä¸€ä¸ªæ–°å…ƒç´   push(element: any) {    this.data.push(element)    this.top += 1  }  // è¿”å›æ ˆé¡¶å…ƒç´ , åŒæ—¶å°† top å€¼å‡ 1  pop() {    this.top -= 1    return this.data.pop()  }  // è¿”å›æ ˆé¡¶å…ƒç´   peek() {    if (!this.data.length) {      return false    }    return this.data[this.top - 1]  }  // æ¸…ç©ºæ ˆ  clear() {    this.top = 0  }}</code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><pre><code class="ts">const stack = new Stack()stack.push(&#39;aaa&#39;)stack.push(&#39;bbb&#39;)stack.push(&#39;ccc&#39;)stack.push(&#39;ddd&#39;)console.log(&#39;æ‰§è¡Œ push æ–¹æ³•å\n&#39;, stack)stack.pop()console.log(&#39;æ‰§è¡Œ pop æ–¹æ³•å\n&#39;, stack)console.log(&#39;æ‰§è¡Œ peek æ–¹æ³•åè¿”å›ï¼š&#39;, stack.peek())stack.clear()console.log(&#39;æ‰§è¡Œ clear æ–¹æ³•å\n&#39;, stack)æ‰§è¡Œ push æ–¹æ³•å Stack { data: [ &#39;aaa&#39;, &#39;bbb&#39;, &#39;ccc&#39;, &#39;ddd&#39; ], top: 4 }æ‰§è¡Œ pop æ–¹æ³•å Stack { data: [ &#39;aaa&#39;, &#39;bbb&#39;, &#39;ccc&#39; ], top: 3 }æ‰§è¡Œ peek æ–¹æ³•åè¿”å›ï¼š cccæ‰§è¡Œ clear æ–¹æ³•å Stack { data: [ &#39;aaa&#39;, &#39;bbb&#39;, &#39;ccc&#39; ], top: 0 }</code></pre><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><h3 id="æ•°åˆ¶é—´çš„è½¬æ¢ï¼Œå°†-10-è¿›åˆ¶çš„æ•°è½¬åŒ–ä¸ºå¦ä¸€ç§è¿›åˆ¶"><a href="#æ•°åˆ¶é—´çš„è½¬æ¢ï¼Œå°†-10-è¿›åˆ¶çš„æ•°è½¬åŒ–ä¸ºå¦ä¸€ç§è¿›åˆ¶" class="headerlink" title="æ•°åˆ¶é—´çš„è½¬æ¢ï¼Œå°† 10 è¿›åˆ¶çš„æ•°è½¬åŒ–ä¸ºå¦ä¸€ç§è¿›åˆ¶"></a>æ•°åˆ¶é—´çš„è½¬æ¢ï¼Œå°† 10 è¿›åˆ¶çš„æ•°è½¬åŒ–ä¸ºå¦ä¸€ç§è¿›åˆ¶</h3><p>æ­¤ç®—æ³•åªé’ˆå¯¹åŸºæ•°ä¸º 2 ï½ 9 çš„æƒ…å†µ</p><pre><code class="ts">function mulBase(num: number, base: number) {  const stack = new Stack()  while (num &gt; 0) {    stack.push(num % base)    num = Math.floor((num /= base))  }  let converted = &#39;&#39;  while (stack.length &gt; 0) {    converted += stack.pop()  }  return converted}console.log(&#39;num = 2 base = 2ï¼š&#39;, mulBase(2, 2)) // 10console.log(&#39;num = 32 base = 2ï¼š&#39;, mulBase(32, 2)) // 100000console.log(&#39;num = 125 base = 8ï¼š&#39;, mulBase(125, 8)) // 175</code></pre><h3 id="åˆ¤æ–­å›æ–‡"><a href="#åˆ¤æ–­å›æ–‡" class="headerlink" title="åˆ¤æ–­å›æ–‡"></a>åˆ¤æ–­å›æ–‡</h3><pre><code class="ts">function isPalindrome(word: string) {  let rword = &#39;&#39;  const stack = new Stack()  word.split(&#39;&#39;).forEach(w =&gt; stack.push(w))  while (stack.length &gt; 0) {     rword += stack.pop()  }  if(word === rword) {    return true  }  return false}console.log(&#39;hello&#39;, isPalindrome(&#39;hello&#39;));console.log(&#39;bob&#39;, isPalindrome(&#39;bob&#39;));console.log(&#39;racecar&#39;, isPalindrome(&#39;racecar&#39;));hello falsebob trueracecar true</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹åˆ—è¡¨</title>
      <link href="/post/2019/08/08/datastructure-list/"/>
      <url>/post/2019/08/08/datastructure-list/</url>
      
        <content type="html"><![CDATA[<p>åˆ—è¡¨æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¦‚ä»£åŠäº‹é¡¹ï¼Œåä½³æ¦œå•ç­‰ã€‚å½“ä¸éœ€è¦åœ¨ä¸€ä¸ªå¾ˆé•¿çš„åºåˆ—ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œæˆ–è€…å¯¹å…¶æ’åºæ—¶ï¼Œåˆ—è¡¨æ˜¾å¾—å°¤å…¶æœ‰ç”¨</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åˆ—è¡¨æ˜¯ä¸€ç§å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¦‚ä»£åŠäº‹é¡¹ï¼Œåä½³æ¦œå•ç­‰ã€‚å½“ä¸éœ€è¦åœ¨ä¸€ä¸ªå¾ˆé•¿çš„åºåˆ—ä¸­æŸ¥æ‰¾å…ƒç´ ï¼Œæˆ–è€…å¯¹å…¶æ’åºæ—¶ï¼Œåˆ—è¡¨æ˜¾å¾—å°¤å…¶æœ‰ç”¨</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ä½¿ç”¨ TypeScript å®ç°åˆ—è¡¨ç±»ï¼Œè¦å®ç°çš„çš„åˆ—è¡¨ç±»æ˜¯</p><pre><code class="ts">class List {  pos: number // åˆ—è¡¨å½“å‰ä½ç½®  listSize: number // åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°  data: [] // åˆ—è¡¨çš„æ•°æ®å­˜å‚¨ä½ç½®  constructor() {    this.pos = 0    this.listSize = 0    this.data = []  }  get length() {    return this.listSize  }  // æ¸…ç©ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´   clear() {}  // è¿”å›åˆ—è¡¨çš„å­—ç¬¦ä¸²å½¢å¼  toString() {}  // è¿”å›å½“å‰ä½ç½®çš„å…ƒç´   getElement() {}  // åœ¨ç°æœ‰å…ƒç´ åæ’å…¥æ–°å…ƒç´   insert() {}  // åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ–°å…ƒç´   append() {}  // ä»åˆ—è¡¨ä¸­åˆ é™¤å…ƒç´   remove() {}  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´   front() {}  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªå…ƒç´   end() {}  // å°†å½“å‰ä½ç½®å‘å‰ç§»ä¸€ä½  prev() {}  // å°†å½“å‰ä½ç½®å‘åç§»ä¸€ä½  next() {}  // åˆ¤æ–­æ˜¯å¦æœ‰åä¸€ä¸ªå…ƒç´   hasNext() {}  // åˆ¤æ–­æ˜¯å¦æœ‰å‰ä¸€ä¸ªå…ƒç´   hasPrev() {}  // è¿”å›åˆ—è¡¨çš„å½“å‰ä½ç½®  currentPos() {}  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®  moveTo() {}}</code></pre><p>å°†åˆ—è¡¨ç±»å®ç°å</p><pre><code class="ts">class List {  pos: number // åˆ—è¡¨å½“å‰ä½ç½®  data: Array&lt;any&gt; // åˆ—è¡¨çš„æ•°æ®å­˜å‚¨  listSize: number // åˆ—è¡¨çš„å…ƒç´ ä¸ªæ•°  constructor() {    this.pos = 0    this.listSize = 0    this.data = []  }  // è¿”å›åˆ—è¡¨çš„é•¿åº¦  get length() {    return this.listSize  }  // è¿”å›åˆ—è¡¨çš„å½“å‰ä½ç½®  get currentPos() {    return this.pos  }  // æ¸…ç©ºåˆ—è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´   clear() {    delete this.data    this.data.length = this.listSize = this.pos = 0  }  // è¿”å›åˆ—è¡¨çš„å­—ç¬¦ä¸²å½¢å¼  toString() {    return this.data.toString()  }  // è¿”å›å½“å‰ä½ç½®çš„å…ƒç´   getElement() {    return this.data[this.pos]  }  // åœ¨ç°æœ‰å…ƒç´ åæ’å…¥æ–°å…ƒç´   insert(element: any, after: any) {    const index = this.findIndex(after)    if (index &gt; -1) {      this.data.splice(index + 1, 0, element)      this.listSize += 1      return true    }    return false  }  // åœ¨åˆ—è¡¨çš„æœ«å°¾æ·»åŠ æ–°å…ƒç´   append(element: any) {    this.data.push(element)    this.listSize += 1  }  // ä»åˆ—è¡¨ä¸­åˆ é™¤å…ƒç´   remove(element: any) {    const index = this.findIndex(element)    if (index &gt; -1) {      this.data.splice(index, 1)      this.listSize -= 1      return true    }    return false  }  // åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­  contains(element: any) {    return this.data.includes(element)  }  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°ç¬¬ä¸€ä¸ªå…ƒç´   front() {    this.pos = 0  }  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°æœ€åä¸€ä¸ªå…ƒç´   end() {    this.pos = this.listSize - 1  }  // å°†å½“å‰ä½ç½®å‘å‰ç§»ä¸€ä½  prev() {    if (this.pos &gt; 0) {      this.pos -= 1    }  }  // å°†å½“å‰ä½ç½®å‘åç§»ä¸€ä½  next() {    if (this.pos &lt; this.listSize) {      this.pos += 1    }  }  // åˆ¤æ–­æ˜¯å¦æœ‰åä¸€ä¸ªå…ƒç´   hasNext() {    return this.pos &lt; this.listSize  }  // åˆ¤æ–­æ˜¯å¦æœ‰å‰ä¸€ä¸ªå…ƒç´   hasPrev() {    return this.pos &gt; 0  }  // å°†åˆ—è¡¨çš„å½“å‰ä½ç½®ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®  moveTo(position: number) {    if (position &gt; 0 &amp;&amp; position &lt; this.listSize) {      this.pos = position    }  }  // æŸ¥æ‰¾å…ƒç´ ä½ç½®  private findIndex(element: any) {    return this.data.findIndex(ele =&gt; element === ele)  }}</code></pre><h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><pre><code class="ts">const list = new List()list.append(&#39;aaa&#39;)list.append(&#39;bbb&#39;)list.append(&#39;ccc&#39;)list.append(&#39;ddd&#39;)list.append(&#39;eee&#39;)console.log(&#39;list :&#39;, list)</code></pre><p>è¾“å‡º</p><pre><code class="ts">list : List {  pos: 0,  listSize: 5,  data: [ &#39;aaa&#39;, &#39;bbb&#39;, &#39;ccc&#39;, &#39;ddd&#39;, &#39;eee&#39; ] }</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DSA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨æœåŠ¡å™¨ä¸Šæ­å»º Npm ç§æœ</title>
      <link href="/post/2019/08/08/create-privite-npm-server/"/>
      <url>/post/2019/08/08/create-privite-npm-server/</url>
      
        <content type="html"><![CDATA[<p>éƒ¨é—¨éœ€è¦å»ºä¸€ä¸ª npm ç§æœï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹å‘ç°æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å¼€æºå·¥å…· <a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener">Verdaccio</a>ï¼Œæœ‰ 3 ä¸­æ–¹å¼å¯ä»¥åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ­å»ºï¼Œä»¥ Centos ä¸ºä¾‹</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>éƒ¨é—¨éœ€è¦å»ºä¸€ä¸ª npm ç§æœï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹å‘ç°æœ‰ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å¼€æºå·¥å…· <a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener">Verdaccio</a>ï¼Œæœ‰ 3 ä¸­æ–¹å¼å¯ä»¥åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šæ­å»ºï¼Œä»¥ Centos ä¸ºä¾‹</p><h2 id="ä½¿ç”¨-Node-js-ç¯å¢ƒ"><a href="#ä½¿ç”¨-Node-js-ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨ Node.js ç¯å¢ƒ"></a>ä½¿ç”¨ Node.js ç¯å¢ƒ</h2><p>é¦–å…ˆéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… node ç¯å¢ƒ</p><pre><code class="bash">curl -sL https://rpm.nodesource.com/setup_10.x | sudo bash -</code></pre><pre><code class="bash">sudo yum install nodejs</code></pre><p>å®‰è£…åæ£€æŸ¥ node æ˜¯å¦æ­£ç¡®å®‰è£…</p><pre><code class="bash">node -v</code></pre><p>ç„¶åå®‰è£… Verdaccio</p><pre><code class="bash">npm install -g verdaccio</code></pre><p>å®‰è£…å®Œæˆå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œ å¦‚æœä½¿ç”¨çš„æ˜¯ root ç”¨æˆ·ä¼šæç¤ºä½ ä¸è¦ä½¿ç”¨ root è´¦æˆ·</p><pre><code class="bash">verdaccio</code></pre><p>ä½†æ˜¯è¿™æ ·é€€å‡ºåæœåŠ¡å°±åœæ­¢äº†ï¼Œæ‰€ä»¥éœ€è¦ pm2 è¿›è¡Œå¯åŠ¨</p><p>å…¨å±€å®‰è£… pm2</p><pre><code class="bash">npm install -g pm2</code></pre><p>ä½¿ç”¨ pm2 å¯åŠ¨ Verdaccio</p><pre><code class="bash">pm2 start verdaccio</code></pre><h2 id="ä½¿ç”¨-Docker"><a href="#ä½¿ç”¨-Docker" class="headerlink" title="ä½¿ç”¨ Docker"></a>ä½¿ç”¨ Docker</h2><p>é¦–å…ˆéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… Dockerï¼Œæœ‰äº† Docker ä¹‹åå°±å¾ˆç®€å•äº†</p><p>æ‹‰å–é•œåƒ</p><pre><code class="bash">docker pull verdaccio/verdaccio</code></pre><p>è¿è¡Œå®¹å™¨</p><pre><code class="bash">docker run -d --rm --name verdaccio -p 4873:4873 verdaccio/verdaccio</code></pre><h2 id="ä½¿ç”¨-Cloudron"><a href="#ä½¿ç”¨-Cloudron" class="headerlink" title="ä½¿ç”¨ Cloudron"></a>ä½¿ç”¨ Cloudron</h2><p>è¿™ç§æ–¹å¼æ²¡è¯•è¿‡ï¼Œå› ä¸ºä¸Šé¢ä¸¤ç§å·²ç»å¾ˆæ–¹ä¾¿äº†</p><p>é“¾æ¥ <a href="https://cloudron.io/button/org.eggertsson.verdaccio.html" target="_blank" rel="noopener">https://cloudron.io/button/org.eggertsson.verdaccio.html</a></p><h2 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h2><p>ç§æœå®‰è£…å®Œæˆåå¯ä»¥é€šè¿‡ ip åœ°å€+ç«¯å£å·çš„å½¢å¼è®¿é—®äº† xxx.xxx.xxx.xxx:4873</p><p>è¦ç”¨åŸŸåè®¿é—®çš„è¯å°±éœ€è¦å°†è‡ªå·±çš„åŸŸåè§£æåˆ°æœåŠ¡å™¨ä¸Šå»</p><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h2><p><a href="https://verdaccio.org/docs/en/installation" target="_blank" rel="noopener">https://verdaccio.org/docs/en/installation</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flutter World ä¸Šçº¿å•¦</title>
      <link href="/post/2019/08/03/flutter-world-release/"/>
      <url>/post/2019/08/03/flutter-world-release/</url>
      
        <content type="html"><![CDATA[<p>ä¸€å¤§æ³¢å…³äº Flutter çš„å­¦ä¹ èµ„æºé›†åˆ</p><a id="more"></a><h2 id="Flutter-World-ä¸Šçº¿å•¦ï¼"><a href="#Flutter-World-ä¸Šçº¿å•¦ï¼" class="headerlink" title="Flutter World ä¸Šçº¿å•¦ï¼"></a>Flutter World ä¸Šçº¿å•¦ï¼</h2><p>ä¸€å¤§æ³¢å…³äº Flutter çš„å­¦ä¹ èµ„æºé›†åˆï¼Œæƒ³è¦å…¥å‘çš„åŒå­¦å¿«å»æŸ¥çœ‹å§ ğŸ‘Œ</p><p><a href="https://flutterworld.site" target="_blank" rel="noopener">https://flutterworld.site</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨ Centos ä¸­å®‰è£… Java8</title>
      <link href="/post/2019/08/01/centos-install-java8/"/>
      <url>/post/2019/08/01/centos-install-java8/</url>
      
        <content type="html"><![CDATA[<p>ç”±äºè¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… <a href="https://jenkins.io/zh/" target="_blank" rel="noopener">Jenkins</a> æ‰€ä»¥é¦–å…ˆè¦å®‰è£… java</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºè¦åœ¨æœåŠ¡å™¨ä¸Šå®‰è£… <a href="https://jenkins.io/zh/" target="_blank" rel="noopener">Jenkins</a> æ‰€ä»¥é¦–å…ˆè¦å®‰è£… javaã€‚</p><h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><p>å®‰è£…ä¹‹å‰æœ€å¥½æ›´æ–°ä¸‹</p><pre><code class="bash">yum -y update</code></pre><h2 id="å®‰è£…-Java8"><a href="#å®‰è£…-Java8" class="headerlink" title="å®‰è£… Java8"></a>å®‰è£… Java8</h2><pre><code class="bash">yum install java-1.8.0-openjdk</code></pre><h2 id="æŸ¥çœ‹ç‰ˆæœ¬"><a href="#æŸ¥çœ‹ç‰ˆæœ¬" class="headerlink" title="æŸ¥çœ‹ç‰ˆæœ¬"></a>æŸ¥çœ‹ç‰ˆæœ¬</h2><pre><code class="bash">java -version</code></pre><h2 id="è®¾ç½®ç¯å¢ƒå˜é‡-JAVA-HOME"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡-JAVA-HOME" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡ JAVA_HOME"></a>è®¾ç½®ç¯å¢ƒå˜é‡ JAVA_HOME</h2><p>é¦–å…ˆæ‰¾åˆ°å®‰è£… java çš„ä½ç½®</p><pre><code class="bash">update-alternatives --config java</code></pre><p>ç¼–è¾‘ .bash_profile æ–‡ä»¶</p><pre><code class="bash">vim .bash_profile</code></pre><p>æ·»åŠ è¿™ä¸€è¡Œ</p><pre><code class="bash">export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.191.b12-1.el7_6.x86_64/jre/bin/java</code></pre><p>é‡æ–°æ‰§è¡Œåˆšä¿®æ”¹çš„ .bash_profile</p><pre><code class="bash">source .bash_profile</code></pre><h2 id="éªŒè¯ä¸€ä¸‹"><a href="#éªŒè¯ä¸€ä¸‹" class="headerlink" title="éªŒè¯ä¸€ä¸‹"></a>éªŒè¯ä¸€ä¸‹</h2><pre><code class="bash">echo $JAVA_HOME</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Centos </tag>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç†è§£ Flutter åº”ç”¨å’Œéƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/post/2019/07/28/understand-flutter-lifecycle/"/>
      <url>/post/2019/07/28/understand-flutter-lifecycle/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Flutter é‡Œé¢éƒ¨ä»¶ä»¥åŠåº”ç”¨æœ¬èº«éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬æ–‡åˆ†åˆ«è¯´æ˜å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸ</p><a id="more"></a><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ Flutter é‡Œé¢éƒ¨ä»¶ä»¥åŠåº”ç”¨æœ¬èº«éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ¬æ–‡åˆ†åˆ«è¯´æ˜å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸ</p><h2 id="éƒ¨ä»¶"><a href="#éƒ¨ä»¶" class="headerlink" title="éƒ¨ä»¶"></a>éƒ¨ä»¶</h2><p>åœ¨ Flutter é‡Œé¢æœ‰ä¸¤ç§éƒ¨ä»¶ StatefulWidget å’Œ StatelessWidgetï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸåˆ†åˆ«æ˜¯</p><h3 id="StatelessWidget"><a href="#StatelessWidget" class="headerlink" title="StatelessWidget"></a>StatelessWidget</h3><p>æ— çŠ¶æ€éƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸå¾ˆç®€å•ï¼Œé¦–å…ˆæ‰§è¡Œæ„é€ å‡½æ•°ç„¶åå°±æ‰§è¡Œ build æ–¹æ³•äº†</p><pre><code>Constructor Functionbuild()</code></pre><h3 id="StatefulWidget"><a href="#StatefulWidget" class="headerlink" title="StatefulWidget"></a>StatefulWidget</h3><p>æœ‰çŠ¶æ€éƒ¨ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¼šå¤æ‚ä¸€äº›ï¼Œå› ä¸ºæ˜¯å¤šäº†çŠ¶æ€å˜åŒ–ã€‚é¦–å…ˆæ˜¯æ„é€ å‡½æ•°ï¼Œç„¶åä¼šåˆå§‹åŒ– State åœ¨æ‰§è¡Œ build æ–¹æ³•ï¼Œå¦‚æœæ‰§è¡Œäº† setState æ–¹æ³•ï¼Œå°±è¦æ£€æŸ¥éƒ¨ä»¶æ˜¯å¦æ›´æ–°ï¼Œåœ¨æ‰§è¡Œ buildï¼Œæœ€åéƒ¨ä»¶é”€æ¯çš„æ—¶å€™æ‰§è¡Œ dispose æ–¹æ³•</p><pre><code>Constructor FunctioninitState()build()setState()didUpdateWidget()build()dispose()</code></pre><h2 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h2><p>Flutter åº”ç”¨æœ¬èº«ä¹Ÿæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œè¦è§‚å¯Ÿåˆ°è¿™äº›çŠ¶æ€çš„å˜åŒ–éœ€è¦è®©ä¸€ä¸ªæœ‰çŠ¶æ€éƒ¨ä»¶æ··å…¥ <code>WidgetsBindingObserver</code>ï¼Œç„¶ååœ¨ <code>initState</code> æ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå½“ç„¶éƒ¨ä»¶é”€æ¯çš„æ—¶å€™éœ€è¦æŠŠåˆ›å»ºçš„è§‚å¯Ÿè€…å®ç°æ¸…é™¤</p><ul><li><p>inactive åº”ç”¨å¤„äºéæ´»åŠ¨çŠ¶æ€ï¼Œå¹¶ä¸”æœªæ¥æ”¶ç”¨æˆ·è¾“å…¥</p></li><li><p>paused åº”ç”¨å½“å‰å¯¹ç”¨æˆ·ä¸å¯è§ï¼Œä¸å“åº”ç”¨æˆ·è¾“å…¥ï¼Œå¹¶åœ¨åå°è¿è¡Œ</p></li><li><p>resumed åº”ç”¨å¯è§å¹¶å“åº”ç”¨æˆ·è¾“å…¥</p></li><li><p>suspending åº”ç”¨é€€å‡ºäº†</p></li></ul><p>ä»£ç </p><pre><code>class MyApp extends StatelessWidget {  @override  Widget build(BuildContext context) {    return MaterialApp(      title: &#39;Flutter Lifecycle&#39;,      home: MyHomePage(),    );  }}class MyHomePage extends StatefulWidget {  @override  _MyHomePageState createState() =&gt; _MyHomePageState();}class _MyHomePageState extends State&lt;MyHomePage&gt; with WidgetsBindingObserver {  @override  void initState() {    WidgetsBinding.instance.addObserver(this);    super.initState();  }  @override  void didChangeAppLifecycleState(AppLifecycleState state) {    print(state);  }  @override  void dispose() {    WidgetsBinding.instance.removeObserver(this);    super.dispose();  }  @override  Widget build(BuildContext context) {    return Scaffold();  }}</code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨ Flutter åº”ç”¨é‡Œé¢è¿™äº›ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯æŒºç®€å•æ˜“æ‡‚çš„</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flutter </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹äº Workbox Strategieså‡ ç§ç­–ç•¥çš„è§£é‡Š</title>
      <link href="/post/2019/07/26/about-workbox-strategies/"/>
      <url>/post/2019/07/26/about-workbox-strategies/</url>
      
        <content type="html"><![CDATA[<p>è¦å°†è‡ªå·±çš„ç½‘ç«™æ”¯æŒ PWAï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ª serviceWorker åˆ°æµè§ˆå™¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ Google çš„ <a href="https://developers.google.com/web/tools/workbox/" target="_blank" rel="noopener">Workbox</a> å·¥å…·ï¼ŒWorkbox å¯ä»¥åœ¨æµè§ˆå™¨è¯·æ±‚èµ„æºçš„æ—¶å€™æä¾›äº†å‡ ç§ä¸åŒçš„ç­–ç•¥å¯¹è¯·æ±‚å“åº”ï¼Œæœ¬æ–‡å¯¹å‡ ç§ç­–ç•¥è¿›è¡Œè¯´æ˜</p><a id="more"></a><p>è¦å°†è‡ªå·±çš„ç½‘ç«™æ”¯æŒ PWAï¼Œéœ€è¦æ³¨å†Œä¸€ä¸ª serviceWorker åˆ°æµè§ˆå™¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ Google çš„ <a href="https://developers.google.com/web/tools/workbox/" target="_blank" rel="noopener">Workbox</a> å·¥å…·ï¼ŒWorkbox å¯ä»¥åœ¨æµè§ˆå™¨è¯·æ±‚èµ„æºçš„æ—¶å€™æä¾›äº†å‡ ç§ä¸åŒçš„ç­–ç•¥å¯¹è¯·æ±‚å“åº”ï¼Œæœ¬æ–‡å¯¹å‡ ç§ç­–ç•¥è¿›è¡Œè¯´æ˜ã€‚</p><h2 id="StaleWhileRevalidate"><a href="#StaleWhileRevalidate" class="headerlink" title="StaleWhileRevalidate"></a>StaleWhileRevalidate</h2><p>StaleWhileRevalidate æ¨¡å¼å…è®¸æ‚¨ä½¿ç”¨ç¼“å­˜çš„å“åº”å°½å¿«å“åº”è¯·æ±‚ï¼Œå¦‚æœæœªç¼“å­˜ï¼Œåˆ™è¿”å›åˆ°ç½‘ç»œè¯·æ±‚ï¼Œç„¶åï¼Œç”¨ç½‘ç»œè¯·æ±‚æ›´æ–°ç¼“å­˜ã€‚</p><p><img src="https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/stale-while-revalidate.png" alt="StaleWhileRevalidate"></p><pre><code class="js">workbox.routing.registerRoute(  /\.(?:js|css)$/,  new workbox.strategies.StaleWhileRevalidate({    cacheName: &#39;static&#39;  }))</code></pre><h2 id="CacheFirst"><a href="#CacheFirst" class="headerlink" title="CacheFirst"></a>CacheFirst</h2><p>å¦‚æœç¼“å­˜ä¸­å­˜åœ¨å“åº”ï¼Œåˆ™å°†ä½¿ç”¨ç¼“å­˜çš„å“åº”æ¥å®Œæˆè¯·æ±‚ï¼Œå¹¶ä¸”æ ¹æœ¬ä¸ä¼šä½¿ç”¨ç½‘ç»œã€‚ å¦‚æœæ²¡æœ‰ç¼“å­˜çš„å“åº”ï¼Œåˆ™å°†é€šè¿‡ç½‘ç»œè¯·æ±‚æ¥æ»¡è¶³è¯·æ±‚ï¼Œå¹¶ä¸”å°†ç¼“å­˜å“åº”ï¼Œä»¥ä¾¿ç›´æ¥ä»ç¼“å­˜æä¾›ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚</p><p><img src="https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/cache-first.png" alt="CacheFirst"></p><pre><code class="js">workbox.routing.registerRoute(  /\.(?:js|css)$/,  new workbox.strategies.CacheFirst({    cacheName: &#39;static&#39;  }))</code></pre><h2 id="NetworkFirst"><a href="#NetworkFirst" class="headerlink" title="NetworkFirst"></a>NetworkFirst</h2><p>å¯¹äºé¢‘ç¹æ›´æ–°çš„è¯·æ±‚ï¼Œç½‘ç»œä¼˜å…ˆç­–ç•¥æ˜¯ç†æƒ³çš„è§£å†³æ–¹æ¡ˆã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†å°è¯•ä»ç½‘ç»œè·å–æœ€æ–°å“åº”ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œå®ƒä¼šå°†å“åº”æ”¾å…¥ç¼“å­˜ä¸­ã€‚ å¦‚æœç½‘ç»œæ— æ³•è¿”å›å“åº”ï¼Œåˆ™å°†ä½¿ç”¨ç¼“å­˜çš„å“åº”ã€‚</p><p><img src="https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/network-first.png" alt="NetworkFirst"></p><pre><code class="js">workbox.routing.registerRoute(  /\.(?:js|css)$/,  new workbox.strategies.NetworkFirst({    cacheName: &#39;static&#39;  }))</code></pre><h2 id="NetworkOnly"><a href="#NetworkOnly" class="headerlink" title="NetworkOnly"></a>NetworkOnly</h2><p>ä»…ä½¿ç”¨ç½‘ç»œå“åº”è¯·æ±‚ã€‚</p><p><img src="https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/network-only.png" alt="NetworkOnly"></p><pre><code class="js">workbox.routing.registerRoute(  /\.(?:js|css)$/,  new workbox.strategies.NetworkOnly({    cacheName: &#39;static&#39;  }))</code></pre><h2 id="CacheOnly"><a href="#CacheOnly" class="headerlink" title="CacheOnly"></a>CacheOnly</h2><p>ä»…ä½¿ç”¨ç¼“å­˜å“åº”è¯·æ±‚ã€‚ä¸å¸¸è§ï¼Œä½†å¦‚æœæ‚¨æœ‰è‡ªå·±çš„é¢„å…ˆç¼“å­˜æ­¥éª¤ï¼Œåˆ™å¯èƒ½å¾ˆæœ‰ç”¨ã€‚</p><p><img src="https://developers.google.com/web/tools/workbox/images/modules/workbox-strategies/cache-only.png" alt="CacheOnly"></p><pre><code class="js">workbox.routing.registerRoute(  /\.(?:js|css)$/,  new workbox.strategies.CacheOnly({    cacheName: &#39;static&#39;  }))</code></pre><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Workbox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Travis CI éƒ¨ç½² Hugo åšå®¢åˆ° Github Pages</title>
      <link href="/post/2019/07/26/hugo-travis-github-page/"/>
      <url>/post/2019/07/26/hugo-travis-github-page/</url>
      
        <content type="html"><![CDATA[<p>åŸæœ¬ä½¿ç”¨çš„æ˜¯ Netlify å»éƒ¨ç½²åšå®¢çš„ï¼ŒåŸŸåè§£æä¹Ÿæ˜¯é€šè¿‡ Netlify çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯å‘ç°åšå®¢åœ¨åˆ«äººçš„ç”µè„‘ä¸Šæ‰“ä¸å¼€â€¦å‘ç°æ˜¯åŸŸåè§£æçš„é—®é¢˜ï¼Œæ‰€ä»¥å°±æŠŠåšå®¢æ”¾åˆ° Github Pages ä¸Šäº†ï¼Œä½†æ˜¯è¿™æ ·å°±å¤±å»äº† Netlify æä¾›çš„è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²çš„èƒ½åŠ›ï¼Œéœ€è¦è‡ªå·±å»é…ç½® Travis CI å®ç°è‡ªåŠ¨éƒ¨ç½²äº†</p><a id="more"></a><p>åŸæœ¬ä½¿ç”¨çš„æ˜¯ Netlify å»éƒ¨ç½²åšå®¢çš„ï¼ŒåŸŸåè§£æä¹Ÿæ˜¯é€šè¿‡ Netlify çš„ DNS æœåŠ¡å™¨ï¼Œä½†æ˜¯å‘ç°åšå®¢åœ¨åˆ«äººçš„ç”µè„‘ä¸Šæ‰“ä¸å¼€â€¦å‘ç°æ˜¯åŸŸåè§£æçš„é—®é¢˜ï¼Œæ‰€ä»¥å°±æŠŠåšå®¢æ”¾åˆ° Github Pages ä¸Šäº†ï¼Œä½†æ˜¯è¿™æ ·å°±å¤±å»äº† Netlify æä¾›çš„è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²çš„èƒ½åŠ›ï¼Œéœ€è¦è‡ªå·±å»é…ç½® Travis CI å®ç°è‡ªåŠ¨éƒ¨ç½²äº†ã€‚</p><h2 id="é¢„å…ˆè¦æ±‚"><a href="#é¢„å…ˆè¦æ±‚" class="headerlink" title="é¢„å…ˆè¦æ±‚"></a>é¢„å…ˆè¦æ±‚</h2><ul><li>æœ¬åœ°å®‰è£…äº† <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a></li><li>ä¸€ä¸ª <a href="https://github.com/" target="_blank" rel="noopener">Github</a> è´¦å·</li><li>ä½¿ç”¨ Github è´¦å·ç™»å½• <a href="https://travis-ci.org" target="_blank" rel="noopener">Travis</a></li></ul><h2 id="åˆ›å»ºåšå®¢"><a href="#åˆ›å»ºåšå®¢" class="headerlink" title="åˆ›å»ºåšå®¢"></a>åˆ›å»ºåšå®¢</h2><p>ä½¿ç”¨ Hugo å‘½ä»¤è¡Œå·¥å…·æ–°å»ºè‡ªå·±çš„åšå®¢ï¼Œå°†ä»£ç æ¨é€åˆ°è‡ªå·±çš„ Github ä»“åº“</p><pre><code class="sh">hugo new site my-blog...git push</code></pre><h2 id="æ–°å»ºä¸€ä¸ª-Github-Personal-access-token"><a href="#æ–°å»ºä¸€ä¸ª-Github-Personal-access-token" class="headerlink" title="æ–°å»ºä¸€ä¸ª Github Personal access token"></a>æ–°å»ºä¸€ä¸ª Github Personal access token</h2><p>åœ¨ <a href="https://github.com/settings/tokens" target="_blank" rel="noopener">https://github.com/settings/tokens</a> æ–°å»ºä¸€ä¸ª Personal access token ç”¨æ¥å‘å¸ƒåšå®¢åˆ° Github Pages æ—¶è¿›è¡ŒéªŒè¯ï¼Œå¤åˆ¶ç”Ÿæˆçš„ tokenï¼Œä¸è¦åˆ·æ–°æˆ–ç¦»å¼€å½“å‰é¡µé¢ï¼Œå¦åˆ™ token å°±çœ‹ä¸è§äº†ï¼Œåªèƒ½é‡æ–°ç”Ÿæˆ</p><p><img src="/images/github-token.jpg" alt="token"></p><p>ç™»å½•åˆ° <a href="https://travis-ci.org" target="_blank" rel="noopener">Travis CI</a> å¯¹é¡¹ç›®è¿›è¡Œå…³è” <a href="https://travis-ci.org/account/repositories" target="_blank" rel="noopener">https://travis-ci.org/account/repositories</a></p><p>å®Œæˆåè¿›å…¥è®¾ç½®ç•Œé¢ <code>https://travis-ci.org/your-gihub-user-name/your-gihub-repo/settings</code></p><p>åœ¨ Environment Variables å¡«å†™ GITHUB_TOKEN å˜é‡ï¼Œç‚¹å‡» Add æŒ‰é’®ï¼Œè¿™æ ·ä½ çš„ç¯å¢ƒå˜é‡å°±æ·»åŠ å®Œæˆäº†</p><h2 id="é…ç½®-travis-yml"><a href="#é…ç½®-travis-yml" class="headerlink" title="é…ç½® .travis.yml"></a>é…ç½® .travis.yml</h2><p>å› ä¸º Hugo æ˜¯ç”¨ GO è¯­è¨€å†™çš„ï¼Œæ‰€ä»¥è¦é…ç½® GO ç¼–è¯‘ç¯å¢ƒï¼Œåœ¨ before_script é‡Œåˆ é™¤äº† public æ–‡ä»¶å¤¹ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰åŸŸåï¼Œå°†è‡ªå®šä¹‰åŸŸåè¾“å‡ºåˆ°æ„å»ºå‡ºæ¥çš„ CNAME æ–‡ä»¶é‡Œé¢å»ï¼Œè®°å¾—æ·»åŠ  DNS è§£æè®°å½•åˆ° Gihub å» <a href="https://help.github.com/cn/articles/using-a-custom-domain-with-github-pages" target="_blank" rel="noopener">å‚è€ƒ</a></p><pre><code class="json">language: godist: trustysudo: falseenv:  - HUGO_VERSION=0.56.0install: truebefore_script:  - wget https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_${HUGO_VERSION}_Linux-64bit.deb  - sudo dpkg -i hugo_${HUGO_VERSION}_Linux-64bit.deb  - rm -rf public || exit 0script:  - hugo -v --gc --minify  - echo &#39;your-custom-domain.com&#39; &gt; public/CNAMEdeploy:  provider: pages  local-dir: public  skip-cleanup: true  github-token: $GITHUB_TOKEN  keep-history: true  on:    branch: masterbranches:  only:  - master</code></pre><h2 id="æäº¤è§¦å‘æ„å»º"><a href="#æäº¤è§¦å‘æ„å»º" class="headerlink" title="æäº¤è§¦å‘æ„å»º"></a>æäº¤è§¦å‘æ„å»º</h2><p>æœ€åæ–°å»ºä¸€ç¯‡æ–‡ç« ï¼Œpush åˆ° Github ä»“åº“ï¼Œè§¦å‘ Travis æ„å»ºå°±å¯ä»¥äº†ï¼Œä»¥ååšå®¢è¿›è¡Œæ›´æ–°åå°±å¯ä»¥è‡ªåŠ¨æ„å»ºå‘å¸ƒäº†ã€‚</p><pre><code class="sh">hugo new posts/my-first-post.md</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hugo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¯¹äº PWA åº”ç”¨çš„ manifest.json æ–‡ä»¶çš„è§£é‡Š</title>
      <link href="/post/2019/07/24/about-manifest/"/>
      <url>/post/2019/07/24/about-manifest/</url>
      
        <content type="html"><![CDATA[<p>ç½‘ç«™è¦æ”¯æŒ PWAï¼Œéœ€è¦ä¸€ä¸ª <code>manifest.json</code> æ–‡ä»¶ï¼ŒW3C Web App Manifest çš„è‰æ¡ˆä¸Šå®šä¹‰äº†ä»¥ä¸‹çš„å­—æ®µï¼Œè§£é‡Šä¸€ä¸‹æ¯ä¸ªå­—æ®µæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><a id="more"></a><p>ç½‘ç«™è¦æ”¯æŒ PWAï¼Œéœ€è¦ä¸€ä¸ª <code>manifest.json</code> æ–‡ä»¶ï¼ŒW3C Web App Manifest çš„è‰æ¡ˆä¸Šå®šä¹‰äº†ä»¥ä¸‹çš„å­—æ®µï¼Œè§£é‡Šä¸€ä¸‹æ¯ä¸ªå­—æ®µæ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><pre><code class="js">dictionary WebAppManifest {   TextDirectionType dir = &quot;auto&quot;;   DOMString lang;   USVString name;   USVString short_name;   USVString description;   sequence&lt;ImageResource&gt; icons;   sequence&lt;ImageResource&gt; screenshots;   sequence&lt;USVString&gt; categories;   DOMString iarc_rating_id;   USVString start_url;   DisplayModeType display = &quot;browser&quot;;   OrientationLockType orientation;   USVString theme_color;   USVString background_color;   USVString scope;   ServiceWorkerRegistrationObject serviceworker;   sequence&lt;ExternalApplicationResource&gt; related_applications;   boolean prefer_related_applications = &quot;false&quot;;};dictionary ImageResource {  required USVString src;  DOMString sizes;  USVString type;  USVString purpose;  USVString platform;};dictionary ServiceWorkerRegistrationObject {  required USVString src;  USVString scope;  WorkerType type = &quot;classic&quot;;  ServiceWorkerUpdateViaCache update_via_cache = &quot;imports&quot;;};dictionary ExternalApplicationResource {  required USVString platform;  USVString url;  DOMString id;  USVString min_version;  sequence&lt;Fingerprint&gt; fingerprints;};</code></pre><p><strong>dir</strong> æŒ‡å®šäº† manifest ä¸­å…·æœ‰æ–¹å‘æ€§çš„æˆå‘˜çš„åŸºæœ¬æ–¹å‘ï¼Œå¯ä»¥è®¾ç½® <code>ltr</code> å·¦è‡³å³, <code>rtl</code> å³è‡³å·¦, <code>auto</code> æ²¡æœ‰æ˜ç¡®æ–¹å‘ã€‚</p><p><strong>lang</strong> æŒ‡å®š manifest ä¸­å…·æœ‰æ–¹å‘æ€§æˆå‘˜çš„å€¼çš„ä¸»è¦è¯­è¨€ï¼ˆå› ä¸ºçŸ¥é“è¯­è¨€ä¹Ÿå¯ä»¥å¸®åŠ©æ–¹å‘æ€§ï¼‰ã€‚</p><p><strong>name</strong> è¡¨ç¤ºåº”ç”¨çš„åç§°ã€‚</p><p><strong>short_name</strong> è¡¨ç¤º Web åº”ç”¨ç¨‹åºåç§°çš„ç®€çŸ­ç‰ˆæœ¬ï¼Œç”¨äºæ²¡æœ‰è¶³å¤Ÿç©ºé—´æ¥æ˜¾ç¤º Web åº”ç”¨ç¨‹åºçš„å…¨åçš„åœ°æ–¹ã€‚</p><p><strong>description</strong> æè¿° Web åº”ç”¨ç¨‹åºçš„ç›®çš„ã€‚</p><p><strong>scope</strong> è¡¨ç¤º Web åº”ç”¨ç¨‹åºå¯¼èˆªèŒƒå›´ã€‚</p><p><strong>icons</strong> icons æ˜¯ ImageResources çš„æ•°ç»„ï¼Œå¯ä»¥åœ¨å„ç§æƒ…å†µä¸‹å……å½“ Web åº”ç”¨ç¨‹åºçš„å›¾æ ‡è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼Œå®ƒä»¬å¯ç”¨äºåœ¨å…¶ä»–åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­è¡¨ç¤º Web åº”ç”¨ç¨‹åºï¼Œæˆ–è€…å°† Web åº”ç”¨ç¨‹åºä¸ OS çš„ä»»åŠ¡åˆ‡æ¢å™¨å’Œ/æˆ–ç³»ç»Ÿé¦–é€‰é¡¹é›†æˆã€‚</p><pre><code class="json">{  &quot;icons&quot;: [    {      &quot;src&quot;: &quot;icon/lowres.webp&quot;,      &quot;sizes&quot;: &quot;48x48&quot;,      &quot;type&quot;: &quot;image/webp&quot;    },    {      &quot;src&quot;: &quot;icon/lowres&quot;,      &quot;sizes&quot;: &quot;48x48&quot;    },    {      &quot;src&quot;: &quot;icon/hd_hi.ico&quot;,      &quot;sizes&quot;: &quot;72x72 96x96 128x128 256x256&quot;    },    {      &quot;src&quot;: &quot;icon/hd_hi.svg&quot;,      &quot;sizes&quot;: &quot;257x257&quot;    }  ]}</code></pre><p><strong>display</strong> å…¶å€¼æ˜¯ DisplayModeType å€¼ä¹‹ä¸€ï¼Œè¡¨ç¤ºå¼€å‘äººå‘˜å¯¹ Web åº”ç”¨ç¨‹åºçš„é¦–é€‰æ˜¾ç¤ºæ¨¡å¼ã€‚å¯ä»¥è®¾ç½®</p><ul><li>â€œfullscreenâ€ å ç”¨æ•´ä¸ªå¯ç”¨çš„æ˜¾ç¤ºåŒºåŸŸï¼›</li><li>â€œstandaloneâ€ ä½¿å…¶å¤–è§‚å’Œæ„Ÿè§‰å°±åƒä¸€ä¸ªç‹¬ç«‹çš„æœ¬æœºåº”ç”¨ç¨‹åºï¼›</li><li>â€œminimal-uiâ€ ç±»ä¼¼äº standalone æ¨¡å¼ï¼Œä½†ä¸ºæœ€ç»ˆç”¨æˆ·æä¾›äº†ä¸€äº›æ–¹æ³•æ¥è®¿é—®ç”¨äºæ§åˆ¶å¯¼èˆªçš„æœ€å° UI å…ƒç´ é›†ï¼ˆå³ï¼Œåé€€ï¼Œå‰è¿›ï¼Œé‡æ–°åŠ è½½ä»¥åŠå¯èƒ½ä»¥æŸç§æ–¹å¼æŸ¥çœ‹æ–‡æ¡£çš„åœ°å€ï¼‰ï¼›</li><li>â€œbrowserâ€ ä½¿ç”¨ç‰¹å®šäºå¹³å°çš„çº¦å®šæ‰“å¼€ Web åº”ç”¨ç¨‹åºï¼Œä»¥åœ¨ç”¨æˆ·ä»£ç†ä¸­æ‰“å¼€è¶…é“¾æ¥ï¼ˆä¾‹å¦‚ï¼Œåœ¨æµè§ˆå™¨é€‰é¡¹å¡æˆ–æ–°çª—å£ä¸­ï¼‰ï¼›</li></ul><p><strong>orientation</strong> Web åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é¡¶çº§æµè§ˆä¸Šä¸‹æ–‡çš„é»˜è®¤æ–¹å‘ã€‚</p><p><strong>start_url</strong> è¡¨ç¤ºèµ·å§‹ URL çš„å­—ç¬¦ä¸²ï¼Œè¯¥ URL æ˜¯ç”¨æˆ·å¯åŠ¨ Web åº”ç”¨ç¨‹åºæ—¶å¼€å‘äººå‘˜æ›´å–œæ¬¢ç”¨æˆ·ä»£ç†åŠ è½½çš„ URLï¼ˆä¾‹å¦‚ï¼Œå½“ç”¨æˆ·ä»è®¾å¤‡çš„åº”ç”¨ç¨‹åºèœå•ä¸­å•å‡» Web åº”ç”¨ç¨‹åºçš„å›¾æ ‡æ—¶æˆ–ä¸»å±å¹•ï¼‰ã€‚</p><p><strong>serviceworker</strong> è¡¨ç¤ºåº”ç”¨ä¸­ serviceWorker çš„ä¿¡æ¯ã€‚</p><pre><code class="json">&quot;serviceworker&quot;: {  &quot;src&quot;: &quot;sw.js&quot;,  &quot;scope&quot;: &quot;/foo&quot;,  &quot;update_via_cache&quot;: &quot;none&quot;}</code></pre><p><strong>theme_color</strong> åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡çš„é»˜è®¤ä¸»é¢˜é¢œè‰²ã€‚</p><p><strong>related_applications</strong> æ˜¯åº•å±‚åº”ç”¨ç¨‹åºå¹³å°å¯è®¿é—®çš„åº”ç”¨ç¨‹åºã€‚</p><p><strong>prefer_related_applications</strong> è¡¨ç¤ºç›¸å…³åº”ç”¨ç¨‹åºæ˜¯å¦åº”ä¼˜å…ˆäºå½“å‰çš„ Web åº”ç”¨ç¨‹åºã€‚</p><p><strong>background_color</strong> Web åº”ç”¨ç¨‹åºçš„é¢„æœŸèƒŒæ™¯é¢œè‰²ã€‚</p><p><strong>categories</strong> Web åº”ç”¨ç¨‹åºæ‰€å±çš„é¢„æœŸåº”ç”¨ç¨‹åºç±»åˆ«ã€‚</p><p><strong>screenshots</strong> ä¸€ä¸ª ImageResources æ•°ç»„ï¼Œè¡¨ç¤ºå¸¸è§ä½¿ç”¨åœºæ™¯ä¸­çš„ Web åº”ç”¨ç¨‹åºçš„æˆªå›¾ã€‚</p><p><strong>iarc_rating_id</strong> ç”¨äºç¡®å®š Web åº”ç”¨ç¨‹åºé€‚åˆçš„å¹´é¾„ã€‚</p><p>ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹</p><pre><code class="json">{  &quot;lang&quot;: &quot;en&quot;,  &quot;dir&quot;: &quot;ltr&quot;,  &quot;name&quot;: &quot;Super Racer 3000&quot;,  &quot;description&quot;: &quot;The ultimate futuristic racing game from the future!&quot;,  &quot;short_name&quot;: &quot;Racer3K&quot;,  &quot;icons&quot;: [    {      &quot;src&quot;: &quot;icon/lowres.webp&quot;,      &quot;sizes&quot;: &quot;64x64&quot;,      &quot;type&quot;: &quot;image/webp&quot;    },    {      &quot;src&quot;: &quot;icon/lowres.png&quot;,      &quot;sizes&quot;: &quot;64x64&quot;    },    {      &quot;src&quot;: &quot;icon/hd_hi&quot;,      &quot;sizes&quot;: &quot;128x128&quot;    }  ],  &quot;scope&quot;: &quot;/racer/&quot;,  &quot;start_url&quot;: &quot;/racer/start.html&quot;,  &quot;display&quot;: &quot;fullscreen&quot;,  &quot;orientation&quot;: &quot;landscape&quot;,  &quot;theme_color&quot;: &quot;aliceblue&quot;,  &quot;background_color&quot;: &quot;red&quot;,  &quot;serviceworker&quot;: {    &quot;src&quot;: &quot;sw.js&quot;,    &quot;scope&quot;: &quot;/racer/&quot;,    &quot;update_via_cache&quot;: &quot;none&quot;  },  &quot;screenshots&quot;: [    {      &quot;src&quot;: &quot;screenshots/in-game-1x.jpg&quot;,      &quot;sizes&quot;: &quot;640x480&quot;,      &quot;type&quot;: &quot;image/jpeg&quot;    },    {      &quot;src&quot;: &quot;screenshots/in-game-2x.jpg&quot;,      &quot;sizes&quot;: &quot;1280x920&quot;,      &quot;type&quot;: &quot;image/jpeg&quot;    }  ]}</code></pre><p>è¦åœ¨é¡µé¢æ˜¯ä½¿ç”¨çš„è¯ç›´æ¥ç”¨<link>æ ‡ç­¾å¼•ç”¨å³å¯ã€‚</p><pre><code class="html">&lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json&quot; /&gt;</code></pre><p>è¿™æ ·æµè§ˆå™¨å°±å¯ä»¥å®‰è£…ä½ çš„ Web åº”ç”¨äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PWA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®© Hugo åšå®¢æ”¯æŒ PWA</title>
      <link href="/post/2019/07/23/add-pwa-support-to-hugo/"/>
      <url>/post/2019/07/23/add-pwa-support-to-hugo/</url>
      
        <content type="html"><![CDATA[<p>è®©ç”¨ Hugo æ­å»ºçš„åšå®¢æ”¯æŒ PWA å¾ˆç®€å•ï¼Œåªéœ€ 2 ä¸ªæ­¥éª¤å³å¯</p><a id="more"></a><p>è®©ç”¨ Hugo æ­å»ºçš„åšå®¢æ”¯æŒ PWA å¾ˆç®€å•ï¼Œåªéœ€ 2 ä¸ªæ­¥éª¤å³å¯ï¼š</p><h2 id="æ·»åŠ ä¸€ä¸ª-manifest-json-æ–‡ä»¶"><a href="#æ·»åŠ ä¸€ä¸ª-manifest-json-æ–‡ä»¶" class="headerlink" title="æ·»åŠ ä¸€ä¸ª manifest.json æ–‡ä»¶"></a>æ·»åŠ ä¸€ä¸ª manifest.json æ–‡ä»¶</h2><p>ä½¿ç”¨ <a href="https://app-manifest.firebaseapp.com" target="_blank" rel="noopener">https://app-manifest.firebaseapp.com</a> æ¥ç”Ÿæˆåšå®¢çš„ manifest.json æ–‡ä»¶ï¼Œç„¶åå°†ç”Ÿæˆå‡ºæ¥çš„æ–‡ä»¶å’Œå›¾ç‰‡æ”¾åˆ°åšå®¢çš„ static ç›®å½•ï¼Œç„¶ååœ¨ layout/index.html çš„</p><head><meta name="generator" content="Hexo 3.9.0">æ ‡ç­¾å†…å¼•ç”¨è¿™ä¸ªæ–‡ä»¶</head><p></p><pre><code class="html">&lt;head&gt;  ...  &lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json&quot; /&gt;  ...&lt;/head&gt;</code></pre><p>è¿™æ ·ä½ çš„åšå®¢å°±å¯ä»¥å®‰è£…åˆ°æ¡Œé¢äº†</p><h2 id="ä½¿ç”¨-Workbox-å·¥å…·æ³¨å†Œ-ServiceWorker"><a href="#ä½¿ç”¨-Workbox-å·¥å…·æ³¨å†Œ-ServiceWorker" class="headerlink" title="ä½¿ç”¨ Workbox å·¥å…·æ³¨å†Œ ServiceWorker"></a>ä½¿ç”¨ Workbox å·¥å…·æ³¨å†Œ ServiceWorker</h2><p>åœ¨ static æ–°å»ºä¸€ä¸ª <code>sw.js</code> æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æ·»åŠ ä»¥ä¸‹å†…å®¹ç”¨æ¥ä¸ºç½‘ç»œè¯·æ±‚æ·»åŠ ç¼“å­˜ï¼›ä¸»è¦æ˜¯ç¼“å­˜é™æ€èµ„æº jsï¼Œcssï¼Œå›¾ç‰‡ä»¥åŠå­—ä½“ç­‰æ–‡ä»¶ï¼Œ<br>è¯¦ç»†æ–‡æ¡£å¯ä»¥æŸ¥çœ‹ <a href="https://developers.google.cn/web/tools/workbox" target="_blank" rel="noopener">Workbox æ–‡æ¡£</a></p><pre><code class="js">importScripts(&#39;https://cdn.jsdelivr.net/npm/workbox-cdn/workbox/workbox-sw.js&#39;)if (workbox) {  console.log(`Yay! Workbox is loaded ğŸ‰`)  workbox.routing.registerRoute(    /\.(?:js|css)$/,    new workbox.strategies.StaleWhileRevalidate({      cacheName: &#39;static-resources&#39;    })  )  workbox.routing.registerRoute(    /\.(?:png|jpg|jpeg|svg|gif)$/,    new workbox.strategies.CacheFirst({      cacheName: &#39;image-cache&#39;,      plugins: [        new workbox.expiration.Plugin({          maxEntries: 20,          maxAgeSeconds: 7 * 24 * 60 * 60        })      ]    })  )  workbox.routing.registerRoute(    /^https:\/\/fonts\.googleapis\.com/,    new workbox.strategies.StaleWhileRevalidate({      cacheName: &#39;google-fonts-stylesheets&#39;    })  )  workbox.routing.registerRoute(    /^https:\/\/fonts\.gstatic\.com/,    new workbox.strategies.CacheFirst({      cacheName: &#39;google-fonts-webfonts&#39;,      plugins: [        new workbox.cacheableResponse.Plugin({          statuses: [0, 200]        }),        new workbox.expiration.Plugin({          maxAgeSeconds: 60 * 60 * 24 * 365,          maxEntries: 30        })      ]    })  )} else {  console.log(`Boo! Workbox didn&#39;t load ğŸ˜¬`)}</code></pre><p>åŸºæœ¬å®Œæˆäº†ï¼Œå¯ä»¥ç”¨ Chrome çš„ Audits çš„å·¥å…·è·‘äº†ä¸€ä¸‹åˆ†ï¼Œçœ‹çœ‹è¿˜æœ‰ä»€ä¹ˆåœ°æ–¹è¦ä¿®æ”¹çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PWA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº†è§£ &lt;Link&gt; æ ‡ç­¾ä¸Š Rel=prexxx çš„ä½œç”¨</title>
      <link href="/post/2019/07/22/understand-link-prexxx/"/>
      <url>/post/2019/07/22/understand-link-prexxx/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ HTML ä¸­<link>æ ‡ç­¾æŒ‡å®šäº†å½“å‰æ–‡æ¡£ä¸å¤–éƒ¨èµ„æºä¹‹é—´çš„å…³ç³»ï¼Œæœ¬æ–‡è¯´æ˜<link>æ ‡ç­¾çš„ rel å±æ€§åˆ†åˆ«è®¾ç½® dns-prefetchï¼Œpreconnectï¼Œprefetchï¼Œpreloadï¼Œprerender çš„æ—¶å€™æœ‰è¯´æ˜ä½œç”¨</p><a id="more"></a><p>åœ¨ HTML ä¸­<link>æ ‡ç­¾æŒ‡å®šäº†å½“å‰æ–‡æ¡£ä¸å¤–éƒ¨èµ„æºä¹‹é—´çš„å…³ç³»<br>æœ¬æ–‡è¯´æ˜<link>æ ‡ç­¾çš„ rel å±æ€§åˆ†åˆ«è®¾ç½® dns-prefetchï¼Œpreconnectï¼Œprefetchï¼Œpreloadï¼Œprerender çš„æ—¶å€™æœ‰è¯´æ˜ä½œç”¨</p><p>dns-prefetchï¼šå‘æµè§ˆå™¨æç¤ºéœ€è¦èµ„æºï¼Œå…è®¸æµè§ˆå™¨åœ¨ç”¨æˆ·å•å‡»é“¾æ¥ä¹‹å‰è¿›è¡Œ DNS æŸ¥æ‰¾å’Œåè®®æ¡æ‰‹</p><p>preconnectï¼šå‘æµè§ˆå™¨æä¾›æç¤ºï¼Œå»ºè®®å®ƒæå‰æ‰“å¼€ä¸é“¾æ¥ç½‘ç«™çš„è¿æ¥ï¼Œè€Œä¸æ³„éœ²ä»»ä½•ç§äººä¿¡æ¯æˆ–ä¸‹è½½ä»»ä½•å†…å®¹ï¼Œä»¥ä¾¿åœ¨éµå¾ªé“¾æ¥æ—¶å¯ä»¥æ›´å¿«åœ°è·å–é“¾æ¥çš„å†…å®¹</p><p>prefetchï¼šå»ºè®®æµè§ˆå™¨æå‰è·å–é“¾æ¥èµ„æºï¼Œå› ä¸ºå®ƒå¯èƒ½æ˜¯ç”¨æˆ·è¯·æ±‚çš„ã€‚ ä» Firefox 44 å¼€å§‹ï¼Œå°†è€ƒè™‘ crossorigin å±æ€§çš„å€¼ï¼Œä»è€Œå¯ä»¥è¿›è¡ŒåŒ¿åé¢„å–</p><p>preloadï¼šå‘Šè¯‰æµè§ˆå™¨ä¸‹è½½èµ„æºï¼Œå› ä¸ºç¨ååœ¨å½“å‰å¯¼èˆªæœŸé—´å°†éœ€è¦æ­¤èµ„æº</p><p>prerenderï¼šå»ºè®®æµè§ˆå™¨æå‰è·å–é“¾æ¥èµ„æºï¼Œå¹¶ä¸”å®ƒè¿˜åœ¨å±å¹•å¤–æ¸²æŸ“é¢„å–å†…å®¹ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶å¯ä»¥å¿«é€Ÿå‘ˆç°ç»™ç”¨æˆ·</p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://devdocs.io/html/link_types" target="_blank" rel="noopener">link_types</a></p><p><a href="https://stackoverflow.com/questions/47273743/preconnect-vs-dns-prefetch-resource-hints" target="_blank" rel="noopener">preconnect-vs-dns-prefetch-resource-hints</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š</title>
      <link href="/post/2019/07/18/request-timimg/"/>
      <url>/post/2019/07/18/request-timimg/</url>
      
        <content type="html"><![CDATA[<p>æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š</p><a id="more"></a><h2 id="æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š"><a href="#æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š" class="headerlink" title="æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š"></a>æµè§ˆå™¨è¯·æ±‚è€—æ—¶é˜¶æ®µè§£é‡Š</h2><p><strong>Queueing</strong></p><p>æµè§ˆå™¨ä¼šåœ¨ä»¥ä¸‹æƒ…å†µæ—¶å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—ï¼Œæœ‰ä¼˜å…ˆçº§æ›´é«˜çš„è¯·æ±‚ï¼›å½“è¯·æ±‚åè®®æ˜¯ HTTP/1.0 å’Œ HTTP/1.1 æ—¶ï¼ŒåŒä¸€åŸŸåä¸‹å·²ç»æœ‰ 6 ä¸ª TCP é“¾æ¥ï¼›æµè§ˆå™¨åœ¨åˆ†é…ç£ç›˜ç¼“å­˜</p><p><strong>Stalled</strong></p><p>ç”±äºæ’é˜Ÿä¸­æè¿°çš„ä»»ä½•åŸå› ï¼Œè¯·æ±‚å¯èƒ½ä¼šåœæ­¢</p><p><strong>DNS Lookup</strong></p><p>æµè§ˆå™¨æ­£åœ¨è§£æè¯·æ±‚çš„ IP åœ°å€</p><p><strong>Proxy negotiation</strong></p><p>æµè§ˆå™¨ä¸ä»£ç†æœåŠ¡å™¨åå•†è¯·æ±‚</p><p><strong>Request sent</strong></p><p>è¯·æ±‚å·²ç»å‘å‡º</p><p><strong>ServiceWorker Preparation</strong></p><p>æµè§ˆå™¨å¯åŠ¨ service worker</p><p><strong>Request to ServiceWorker</strong></p><p>è¯·æ±‚å·²ç»å‘ service worker å‘å‡º</p><p><strong>Waiting (TTFB)</strong></p><p>æµè§ˆå™¨ç­‰å¾…ç¬¬ä¸€ä¸ªå­—èŠ‚è¿”å›ï¼Œæ­¤æ—¶é—´åŒ…æ‹¬ 1 æ¬¡å¾€è¿”å»¶è¿Ÿå’ŒæœåŠ¡å™¨å‡†å¤‡å“åº”æ‰€ç”¨çš„æ—¶é—´ã€‚</p><p><strong>Content Download</strong>.</p><p>æµè§ˆå™¨æ¥æ”¶å“åº”</p><p><strong>Receiving Push</strong>.</p><p>æµè§ˆå™¨æ”¶åˆ°é€šè¿‡ HTTP/2 Server Push çš„å“åº”</p><p><strong>Reading Push</strong>.</p><p>æµè§ˆå™¨æ­£åœ¨è¯»å–å…ˆå‰æ”¶åˆ°çš„æœ¬åœ°æ•°æ®</p><h2 id="Timing-breakdown-phases-explained"><a href="#Timing-breakdown-phases-explained" class="headerlink" title="Timing breakdown phases explained"></a>Timing breakdown phases explained</h2><p>Hereâ€™s more information about each of the phases you may see in the Timing tab:</p><p><strong>Queueing</strong>.</p><p>The browser queues requests when:</p><ul><li>There are higher priority requests.</li><li>There are already six TCP connections open for this origin, which is the limit. Applies to HTTP/1.0 and HTTP/1.1 only.</li><li>The browser is briefly allocating space in the disk cache</li></ul><p><strong>Stalled</strong>.</p><p>The request could be stalled for any of the reasons described in<strong>Queueing</strong>.</p><p><strong>DNS Lookup</strong>.</p><p>The browser is resolving the requestâ€™s IP address.</p><p><strong>Proxy negotiation</strong>.</p><p>The browser is negotiating the request with a<a href="https://en.wikipedia.org/wiki/Proxy_server" target="_blank" rel="noopener">proxy server</a>.</p><p><strong>Request sent</strong>.</p><p>The request is being sent.</p><p><strong>ServiceWorker Preparation</strong>.</p><p>The browser is starting up the service worker.</p><p><strong>Request to ServiceWorker</strong>.</p><p>The request is being sent to the service worker.</p><p><strong>Waiting (TTFB)</strong></p><p>The browser is waiting for the first byte of a response. TTFB stands for Time To First Byte. This timing includes 1 round trip of latency and the time the server took to prepare the response.</p><p><strong>Content Download</strong></p><p>The browser is receiving the response.</p><p><strong>Receiving Push</strong></p><p>The browser is receiving data for this response via HTTP/2 Server Push.</p><p><strong>Reading Push</strong></p><p>The browser is reading the local data previously received.</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Browser </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dart è¯­è¨€ä¸­çš„ Final ä¸ Const çš„åŒºåˆ«</title>
      <link href="/post/2019/07/16/dart-final-vs-const/"/>
      <url>/post/2019/07/16/dart-final-vs-const/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Dart ä¸­æœ‰ <code>final</code> å’Œ <code>const</code> ä¸¤ä¸ªå…³é”®å­—ï¼Œè²Œä¼¼éƒ½æ˜¯è¡¨ç¤ºå¸¸é‡çš„ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„</p><a id="more"></a><p>åœ¨ Dart ä¸­æœ‰ <code>final</code> å’Œ <code>const</code> ä¸¤ä¸ªå…³é”®å­—ï¼Œè²Œä¼¼éƒ½æ˜¯è¡¨ç¤ºå¸¸é‡çš„ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯æœ‰åŒºåˆ«çš„</p><p>final å˜é‡çš„å€¼åªèƒ½è¢«è®¾ç½®ä¸€æ¬¡ï¼› const å˜é‡åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å›ºå®š (const å˜é‡æ˜¯éšå¼ final çš„ç±»å‹.) æœ€é«˜çº§ final å˜é‡æˆ–ç±»å˜é‡åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¢«åˆå§‹åŒ–ã€‚</p><p><a href="https://dart.dev/guides/language/language-tour#final-and-const" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Dart </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº Apple çš„ Code Signing</title>
      <link href="/post/2019/07/15/code-signing/"/>
      <url>/post/2019/07/15/code-signing/</url>
      
        <content type="html"><![CDATA[<p>æƒ³è¦æŠŠ Flutter å†™çš„åº”ç”¨è¿è¡Œåœ¨ iPhone ä¸Šï¼Œå¿…é¡»è¦è¿›è¡Œ Code Signing</p><p><a href="https://developer.apple.com/support/code-signing/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h2 id="Code-Signing"><a href="#Code-Signing" class="headerlink" title="Code Signing"></a>Code Signing</h2><p>Code signing your app assures users that it is from a known source and the app hasnâ€™t been modified since it was last signed. Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a<a href="https://developer.apple.com/support/certificates/" target="_blank" rel="noopener">certificate</a>issued by Apple. For more information on how to request certificates and code sign your apps, review<a href="https://help.apple.com/xcode/mac/current/" target="_blank" rel="noopener">Xcode Help</a>.</p><h2 id="ä»£ç ç­¾å"><a href="#ä»£ç ç­¾å" class="headerlink" title="ä»£ç ç­¾å"></a>ä»£ç ç­¾å</h2><p>ä»£ç ç­¾åæ‚¨çš„åº”ç”¨ç¨‹åºä¼šå‘ç”¨æˆ·ä¿è¯å®ƒæ¥è‡ªå·²çŸ¥æ¥æºï¼Œå¹¶ä¸”è¯¥åº”ç”¨ç¨‹åºè‡ªä¸Šæ¬¡ç­¾ååæœªè¢«ä¿®æ”¹ã€‚ åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥é›†æˆåº”ç”¨ç¨‹åºæœåŠ¡ï¼Œå®‰è£…åœ¨è®¾å¤‡ä¸Šæˆ–æäº¤åˆ° App Store ä¹‹å‰ï¼Œå¿…é¡»ä½¿ç”¨ Apple é¢å‘çš„è¯ä¹¦è¿›è¡Œç­¾åã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
